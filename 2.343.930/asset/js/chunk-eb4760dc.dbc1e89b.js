(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eb4760dc"],{"0b05":function(t,e,a){"use strict";a.r(e);a("b0c0"),a("b64b"),a("ac1f"),a("5319");var i=a("7a23"),n=Object(i["X"])("data-v-1746a7ba");Object(i["D"])("data-v-1746a7ba");var c={class:"box"},s={class:"nav"},o={key:0,class:"head"},u={class:"name1"},b={key:1},l={class:"name2"},d={class:"tab"},r={key:0,class:"panel"},h=Object(i["k"])("div",{class:"title"},"项目",-1),p={class:"chooser"},O=Object(i["k"])("div",{class:"title"},"价格",-1),j={class:"chooser"},f={class:"item"},k={class:"sale"},v={class:"face"},y={class:"title"},g={class:"param"};Object(i["B"])();var m=n((function(t,e,a,m,C,w){var I=Object(i["I"])("van-icon"),A=Object(i["I"])("van-image"),M=Object(i["I"])("van-tab"),S=Object(i["I"])("van-tabs"),U=Object(i["I"])("van-empty"),$=Object(i["I"])("van-field"),_=Object(i["I"])("van-stepper"),x=Object(i["I"])("van-cell"),L=Object(i["I"])("van-action-bar-icon"),Q=Object(i["I"])("van-action-bar-button"),q=Object(i["I"])("van-action-bar"),D=Object(i["I"])("van-popup"),T=Object(i["I"])("pay"),V=Object(i["I"])("BaseLayout");return Object(i["A"])(),Object(i["g"])(V,{title:C.state.title,height:"0"},{default:n((function(){return[Object(i["k"])("div",c,[Object(i["k"])("div",s,["coupon"!=a.action?(Object(i["A"])(),Object(i["g"])("div",o,[Object(i["k"])(I,{class:"icon",name:C.state.topCat.icon||"vip-card",size:"36"},null,8,["name"]),Object(i["k"])("div",u,Object(i["M"])(C.state.topCat.name),1)])):Object(i["U"])((Object(i["A"])(),Object(i["g"])("div",b,[Object(i["k"])(A,{src:C.state.topCat.icon},null,8,["src"]),Object(i["k"])("div",l,Object(i["M"])(C.state.topCat.name),1)],512)),[[i["Q"],!C.state.subCat||0==Object.keys(C.state.subCat).length]]),C.state.subCat&&Object.keys(C.state.subCat).length>0?(Object(i["A"])(),Object(i["g"])(S,{key:2,class:["tabs",a.action],active:C.state.active,"onUpdate:active":e[1]||(e[1]=function(t){return C.state.active=t}),"swipe-threshold":3,animated:"",swipeable:"",onChange:w.handleChange},{default:n((function(){return[(Object(i["A"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(C.state.subCat,(function(t,e){return Object(i["A"])(),Object(i["g"])(M,{key:e,name:t.id},{title:n((function(){return[Object(i["k"])("div",d,[Object(i["k"])(I,{name:t.icon,size:"36"},null,8,["name"]),Object(i["j"])(Object(i["M"])(t.name),1)])]})),_:2},1032,["name"])})),128))]})),_:1},8,["class","active","onChange"])):Object(i["h"])("",!0)]),Object.keys(C.state.spu).length>0?(Object(i["A"])(),Object(i["g"])("div",r,[h,Object(i["k"])("div",p,[(Object(i["A"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(C.state.spu,(function(t,e){return Object(i["A"])(),Object(i["g"])("div",{class:["spu",{active:C.state.id==t.id}],key:e,onClick:function(e){return w.handleChoose(t)}},Object(i["M"])(t.title),11,["onClick"])})),128))]),O,Object(i["k"])("div",j,[(Object(i["A"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(C.state.sku,(function(t,e){return Object(i["U"])((Object(i["A"])(),Object(i["g"])("div",{class:["sku",{more:Object.keys(C.state.sku).length>3,active:C.state.api==e}],key:e,onClick:function(t){return C.state.api=e}},[Object(i["k"])("div",f,Object(i["M"])(t.name),1),Object(i["k"])("div",k,"￥"+Object(i["M"])(t.sale_price),1),Object(i["k"])("div",v,"官方价：￥"+Object(i["M"])(t.face_price.replace(".00","")),1)],10,["onClick"])),[[i["Q"],t.stock>0]])})),128))]),Object(i["U"])(Object(i["k"])("div",y,"描述",512),[[i["Q"],C.state.intro]]),Object(i["U"])(Object(i["k"])("div",{class:"intro",innerHTML:t.$safeHTML(C.state.intro)},null,8,["innerHTML"]),[[i["Q"],C.state.intro]])])):(Object(i["A"])(),Object(i["g"])(U,{key:1,description:"暂无项目"}))]),Object(i["k"])(q,{class:"bar"},{default:n((function(){return[Object(i["U"])(Object(i["k"])("div",g,[Object(i["U"])(Object(i["k"])($,{modelValue:C.state.account,"onUpdate:modelValue":e[2]||(e[2]=function(t){return C.state.account=t}),border:!1,type:"text",placeholder:"请填写充值账号（手机号）"},null,8,["modelValue"]),[[i["Q"],0==C.state.type&&C.state.api.length>0]]),Object(i["U"])(Object(i["k"])(x,{border:!1,title:"购买数量"},{value:n((function(){return[Object(i["k"])(_,{modelValue:C.state.entity,"onUpdate:modelValue":e[3]||(e[3]=function(t){return C.state.entity=t}),theme:"round","input-width":"42","button-size":"24","disable-input":!1,min:"1",max:"100",integer:""},null,8,["modelValue"])]})),_:1},512),[[i["Q"],1==C.state.type&&C.state.api.length>0]])],512),[[i["Q"],C.state.api.length>0]]),Object(i["k"])(L,{icon:"chat-o",text:"客服",onClick:e[4]||(e[4]=function(t){return C.state.popup=!0})}),Object(i["k"])(L,{icon:"cash-on-deliver",text:"订单",onClick:e[5]||(e[5]=function(e){return t.$router.push("/digital/order")})}),Object(i["k"])(Q,{type:"danger",text:"立即购买",onClick:w.handleSubmit},null,8,["onClick"])]})),_:1}),Object(i["k"])(D,{show:C.state.popup,"onUpdate:show":e[6]||(e[6]=function(t){return C.state.popup=t}),position:"top",style:{height:"50%",padding:"20px"}},{default:n((function(){return[Object(i["k"])("div",{class:"contact",innerHTML:t.config.contact},null,8,["innerHTML"])]})),_:1},8,["show"]),Object(i["k"])(T,Object(i["r"])(C.state.payData,{show:C.state.payShow,"onUpdate:show":e[7]||(e[7]=function(t){return C.state.payShow=t}),onOnFinish:w.handlePay}),null,16,["show","onOnFinish"])]})),_:1},8,["title"])})),C=a("ec39"),w=(a("c71f"),a("d959")),I=a.n(w);const A=I()(C["a"],[["render",m],["__scopeId","data-v-1746a7ba"]]);e["default"]=A},bb93:function(t,e,a){},c71f:function(t,e,a){"use strict";a("bb93")},ec39:function(t,e,a){"use strict";(function(t){var i=a("5530"),n=(a("a9e3"),a("b0c0"),a("4de4"),a("ac1f"),a("b64b"),a("7a23")),c=a("5502"),s=a("2824"),o=a("a6e6");e["a"]={components:{BaseLayout:s["a"],Pay:o["default"]},name:"DigitalDetail",props:{action:{type:String,default:"member"},cid:{type:[String,Number],default:0},id:{type:[String,Number],default:0}},data:function(){var t=Object(n["E"])({topCat:{},subCat:{},active:0,list:{},spu:{},sku:{},item:{},type:0,title:"",intro:"",id:0,api:0,account:"",quantity:1,payData:{},payShow:!1,popup:!1});return{state:t}},created:function(){var e=this;this.$http.get("/digital/category?type="+this.action+"&deep=0").then((function(t){e.state.title=t[0].name})),this.$http.post("/digital/category?id="+parseInt(this.cid)+"&deep=2").then((function(a){e.state.topCat=a[0],e.state.subCat=t.filter(a[0]["children"],{status:"1"}),e.init()}))},computed:Object(i["a"])(Object(i["a"])({},Object(c["d"])(["config","profile"])),Object(c["b"])(["uid"])),watch:{$route:function(t,e){t.path==e.path&&t.query!=e.query&&setTimeout(this.init,100)}},methods:{init:function(){var t=this,e=/(\d+)[^\d](\d+)/.exec(this.cid);this.$http.post("/digital/list?cid="+(e?e[1]:this.cid)).then((function(a){t.state.list=a,t.state.active=e?e[2]:Object.keys(a).shift(),t.handleChange()}))},handleChange:function(){this.state.spu=this.state.list[this.state.active]||{},this.state.id=this.id||Object.keys(this.state.spu).shift(),this.handleChoose(this.state.spu[this.state.id]||null)},handleChoose:function(t){t&&"undefined"!=typeof t.id&&(this.state.item=t,this.state.id=t.id,this.state.type=t.type,this.state.intro=t.intro,this.state.api="",this.state.sku=JSON.parse(t.spec))},handleSubmit:function(){var t=this;return this.state.id<=0||this.state.api.length<=0?this.$toast("请选择项目及价格"):0==this.state.type&&this.state.account.length<5?this.$toast("请填写充值账号"):(0==this.state.type&&(this.state.quantity=1),1==this.state.type&&(this.state.account=""),void this.$http.post("/digital/checkout?id="+this.state.id+"&api="+this.state.api+"&account="+this.state.account+"&quantity="+this.state.quantity).then((function(e){t.state.payData=Object(i["a"])(Object(i["a"])({},e),{},{json:JSON.stringify(e)}),t.state.payShow=!0})))},handlePay:function(t){this.state.payShow=!1,t&&this.$dialog.alert({title:"订单已生成",message:"请点击下方“订单记录”查看到账情况",theme:"round-button"})}}}}).call(this,a("81b0"))}}]);