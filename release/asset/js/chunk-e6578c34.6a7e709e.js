(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6578c34"],{"0a9c":function(t,e,n){"use strict";(function(t){var c=n("53ca"),i=n("5530"),a=(n("7db0"),n("a15b"),n("d81d"),n("7a23")),o=n("5502"),r=n("2824"),d=n("6c74");e["a"]={components:{BaseLayout:r["a"],VanCode:d["a"]},props:{code:{type:String,default:""}},data:function(){var t=Object(a["E"])(0),e=Object(a["E"])(new Date),n=Object(a["D"])({calendar:!1,type:!0,device:{},order:{},show:!1,popup:!1,uid:"",discount:100});return{id:t,date:e,state:n}},created:function(){this.init()},watch:{id:function(){this.query()},date:function(){this.state.calendar=!1,this.query()}},computed:Object(i["a"])({item:function(){return t.find(this.state.device,{id:this.id})},info:function(){return 0==this.id?"全部设备":"收款码："+this.item["code"]},param:function(){return"code="+this.code+"&pwd="+window.localStorage.getItem("pwd")}},Object(o["d"])(["profile"])),methods:Object(i["a"])({init:function(){var e=this;this.$http.post("/o2o/deviceList?"+this.param).then((function(n){e.state.device=n,e.id=t.find(n,{code:e.code})["id"]})).catch((function(t){969==t.rtn&&(e.state.popup=!0)}))},query:function(){var t=this;this.$http.post("/o2o/deviceOrder?"+this.param+"&id="+this.id+"&dt="+this.format(this.date)).then((function(e){t.state.order=e}))},bind:function(){var t=this;this.$http.post("/o2o/deviceBind?"+this.param+"&uid="+this.state.uid+"&discount="+this.state.discount).then((function(e){t.state.popup=!1,t.init()}))},format:function(e){if(t.isArray(e))return t.map(e,this.format).join(" ~ ");var n="object"==Object(c["a"])(e)?new Date(e):new Date,i=n.getFullYear(),a=""+(n.getMonth()+1),o=""+n.getDate();return a.length<2&&(a="0"+a),o.length<2&&(o="0"+o),[i,a,o].join("-")},getName:function(t){var e="被动收款";return""!=t.device&&("mobile"==t.device?e="扫码收款（手机）":"pos"==t.device?e="扫码收款（POS机）":""!=t.code&&(e="被动收款 + 音箱")),e},getCode:function(){var t="undefined"!=typeof this.item.code?this.item.code:this.code;return window.location.protocol+"//"+window.location.host+"/#/o2o/pay?code="+t}},Object(o["c"])(["auth"]))}}).call(this,n("81b0"))},"7db0":function(t,e,n){"use strict";var c=n("23e7"),i=n("b727").find,a=n("44d2"),o="find",r=!0;o in[]&&Array(1)[o]((function(){r=!1})),c({target:"Array",proto:!0,forced:r},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},b3b8:function(t,e,n){"use strict";n("c92f")},c92f:function(t,e,n){},eb09:function(t,e,n){"use strict";n.r(e);var c=n("7a23"),i=Object(c["V"])("data-v-35d0d1ae");Object(c["C"])("data-v-35d0d1ae");var a={class:"box"},o={class:"filter"},r=Object(c["j"])("div",{class:"dt"},"按设备筛选",-1),d=Object(c["j"])("div",null,"全部",-1),u=Object(c["j"])("br",null,null,-1),s=Object(c["i"])("设置 "),l={class:"filter"},b=Object(c["j"])("div",{class:"dt"},"按日期筛选",-1),j={class:"type"},f={class:"list"},O={class:"fee"},p=Object(c["j"])("span",{class:"symbol"},"￥",-1),h=Object(c["i"])("暂无记录"),v={class:"popup"},m=Object(c["i"])("绑定");Object(c["A"])();var w=i((function(t,e,n,w,y,g){var k=Object(c["H"])("van-icon"),C=Object(c["H"])("van-cell"),V=Object(c["H"])("van-switch"),_=Object(c["H"])("van-empty"),H=Object(c["H"])("van-calendar"),L=Object(c["H"])("van-code"),z=Object(c["H"])("van-field"),U=Object(c["H"])("van-button"),x=Object(c["H"])("van-popup"),D=Object(c["H"])("BaseLayout");return Object(c["z"])(),Object(c["g"])(D,{title:"商家账单",height:"0"},{default:i((function(){return[Object(c["j"])("div",a,[Object(c["j"])("div",o,[Object(c["j"])(C,{icon:"filter-o",onClick:e[2]||(e[2]=function(t){return y.state.show=!y.state.show})},{title:i((function(){return[r]})),value:i((function(){return[Object(c["j"])(k,{name:0==y.id?"checked":"circle",size:"18",color:"#F66",onClick:e[1]||(e[1]=Object(c["U"])((function(t){return y.id=0}),["stop"]))},null,8,["name"]),d]})),label:i((function(){return[Object(c["i"])(Object(c["L"])(g.info),1)]})),_:1})]),(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(y.state.device,(function(t,n){return Object(c["S"])((Object(c["z"])(),Object(c["g"])(C,{key:n,class:{device:!0,active:y.id==t.id},title:g.getName(t),border:!1,onClick:function(e){y.id=t.id,y.state.show=!1}},{label:i((function(){return[Object(c["i"])(" 收款码："+Object(c["L"])(t.code),1),u,Object(c["i"])(Object(c["L"])(t.imei&&"设备码："+t.imei),1)]})),value:i((function(){return[Object(c["j"])(k,{class:"icon",name:y.id==t.id?"checked":"circle",size:"18"},null,8,["name"])]})),extra:i((function(){return[Object(c["j"])("div",{class:"extra",onClick:e[3]||(e[3]=Object(c["U"])((function(t){return y.state.popup=!0}),["stop"]))},[s,Object(c["j"])(k,{name:"arrow-down",size:"16"})])]})),_:2},1032,["class","title","onClick"])),[[c["O"],y.state.show]])})),128)),Object(c["j"])("div",l,[Object(c["j"])(C,{icon:"calendar-o",label:g.format(y.date),onClick:e[5]||(e[5]=Object(c["U"])((function(t){return y.state.calendar=!0}),["stop"]))},{title:i((function(){return[b]})),value:i((function(){return[Object(c["j"])(V,{modelValue:y.state.type,"onUpdate:modelValue":e[4]||(e[4]=function(t){return y.state.type=t}),size:"14"},null,8,["modelValue"]),Object(c["j"])("div",j,Object(c["L"])(y.state.type?"单":"多")+"日",1)]})),_:1},8,["label"]),Object(c["j"])(C,{icon:"chart-trending-o"},{title:i((function(){return[Object(c["i"])("共收款 "+Object(c["L"])(y.state.order.total||0)+" 笔，合计 "+Object(c["L"])(y.state.order.amount||0)+" 元",1)]})),_:1})]),Object(c["j"])("div",f,[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(y.state.order.list,(function(e,n){return Object(c["z"])(),Object(c["g"])(C,{key:n,title:e.dt,label:e.remark,onClick:function(n){return t.$copy(e.remark)}},{value:i((function(){return[Object(c["j"])("div",O,[p,Object(c["i"])(Object(c["L"])(e.fee),1)])]})),_:2},1032,["title","label","onClick"])})),128)),Object(c["S"])(Object(c["j"])(_,null,{default:i((function(){return[h]})),_:1},512),[[c["O"],!y.state.order||0==y.state.order.total]])])]),Object(c["j"])(H,{show:y.state.calendar,"onUpdate:show":e[6]||(e[6]=function(t){return y.state.calendar=t}),type:y.state.type?"single":"range","max-range":31,"min-date":new Date("2022-01-01"),"max-date":new Date,"default-date":y.date,"show-confirm":!1,onConfirm:e[7]||(e[7]=function(t){return y.date=t})},null,8,["show","type","min-date","max-date","default-date"]),Object(c["j"])(x,{show:y.state.popup,"onUpdate:show":e[10]||(e[10]=function(t){return y.state.popup=t}),position:"bottom",style:{height:"60%"},"close-on-popstate":!0,round:""},{default:i((function(){return[Object(c["j"])("div",v,[Object(c["j"])(L,{class:"qrcode",type:"qrimage",value:g.getCode,width:"100",margin:"0"},null,8,["value"]),Object(c["j"])(z,{modelValue:y.state.uid,"onUpdate:modelValue":e[8]||(e[8]=function(t){return y.state.uid=t}),type:"text",label:"绑定用户"},null,8,["modelValue"]),Object(c["j"])(z,{modelValue:y.state.discount,"onUpdate:modelValue":e[9]||(e[9]=function(t){return y.state.discount=t}),type:"number",label:"会员折扣"},null,8,["modelValue"]),Object(c["j"])(U,{type:"primary",class:"bind",block:"",round:"",onClick:g.bind},{default:i((function(){return[m]})),_:1},8,["onClick"])])]})),_:1},8,["show"])]})),_:1})})),y=n("0a9c"),g=(n("b3b8"),n("6b0d")),k=n.n(g);const C=k()(y["a"],[["render",w],["__scopeId","data-v-35d0d1ae"]]);e["default"]=C}}]);