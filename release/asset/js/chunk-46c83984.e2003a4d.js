(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46c83984","chunk-3f3b53e5"],{"07ac":function(t,e,a){var n=a("23e7"),i=a("6f53").values;n({target:"Object",stat:!0},{values:function(t){return i(t)}})},"1c7b":function(t,e,a){"use strict";a.r(e);var n=a("7a23"),i=Object(n["S"])("data-v-d6e6e61e");Object(n["B"])("data-v-d6e6e61e");var c={class:"panel"},s=Object(n["j"])("div",{class:"title"},"全国手机话费充值",-1),o={class:"list"},u={class:"value"},r=Object(n["i"])(" 元"),l={class:"price"},p=Object(n["j"])("ul",{class:"notice"},[Object(n["j"])("dt",null,"充值说明"),Object(n["j"])("dd",null,"1、本页面提供话费充值专享优惠服务；快充业务在支付成功后预计30分钟内话费到账；慢充业务在支付成功后一般2-4小时话费到账，最晚72小时内到账，请留意【充值成功通知】短信。"),Object(n["j"])("dd",null,"2、如遇高峰或其他问题未能充值到账，系统将自动原路退款，敬请谅解。"),Object(n["j"])("dd",null,"3、携号转网、副卡不支持充值，下单30分钟内请联系客服申请退款，如超时恕不退款。"),Object(n["j"])("dd",null,"4、因本业务为第三方代充值服务，故无法提供充值发票，有开票需求的请勿充值。"),Object(n["j"])("dd",null,"5、本业务由“福鲤社”提供技术支持，如有疑问请点击页面左下角联系客服。"),Object(n["j"])("dd",{class:"recommend"},"** 企业团充可享更高折扣，详询客服 **")],-1);Object(n["z"])();var d=i((function(t,e,a,d,h,b){var f=Object(n["G"])("van-cell"),j=Object(n["G"])("van-tab"),O=Object(n["G"])("van-tabs"),v=Object(n["G"])("van-action-bar-icon"),y=Object(n["G"])("van-action-bar-button"),g=Object(n["G"])("van-action-bar"),m=Object(n["G"])("van-popup"),w=Object(n["G"])("pay"),k=Object(n["G"])("BaseLayout");return Object(n["y"])(),Object(n["g"])(k,{title:"话费充值",navbar:"hide",bg:"linear-gradient(180deg, var(--van-tabs-default-color), #F66 30%, #F6F6F6 50%, #F6F6F6)"},{default:i((function(){return[Object(n["j"])("div",c,[s,Object(n["Q"])(Object(n["j"])("input",{class:"mobile",type:"mobile","onUpdate:modelValue":e[1]||(e[1]=function(t){return h.state.mobile=t}),placeholder:"请输入手机号码"},null,512),[[n["M"],h.state.mobile]]),Object(n["j"])(O,{class:"tabs",type:"card",active:h.state.index,"onUpdate:active":e[2]||(e[2]=function(t){return h.state.index=t}),onChange:b.handleTab},{default:i((function(){return[(Object(n["y"])(!0),Object(n["g"])(n["a"],null,Object(n["E"])(h.state.spu,(function(t,e){return Object(n["y"])(),Object(n["g"])(j,{key:e,title:t.title},{default:i((function(){return[Object(n["j"])("div",o,[(Object(n["y"])(!0),Object(n["g"])(n["a"],null,Object(n["E"])(h.state.sku,(function(t,e){return Object(n["y"])(),Object(n["g"])(f,{class:["goods",{active:h.state.api==e}],key:e,onClick:function(t){return h.state.api=e}},{title:i((function(){return[Object(n["j"])("span",u,Object(n["K"])(parseInt(t.face_price)),1),r]})),label:i((function(){return[Object(n["j"])("span",l,"折扣价 ￥"+Object(n["K"])(t.sale_price),1)]})),_:2},1032,["class","onClick"])})),128))])]})),_:2},1032,["title"])})),128))]})),_:1},8,["active","onChange"]),p]),Object(n["j"])(g,{class:"bar"},{default:i((function(){return[Object(n["j"])(v,{icon:"chat-o",text:"客服",onClick:e[3]||(e[3]=function(t){return h.state.popup=!0})}),Object(n["j"])(v,{icon:"cash-on-deliver",text:"订单",onClick:e[4]||(e[4]=function(e){return t.$router.push("/digital/record?cid="+h.cid)})}),Object(n["j"])(y,{type:"danger",text:"立即充值",onClick:b.handleSubmit},null,8,["onClick"])]})),_:1}),Object(n["j"])(m,{show:h.state.popup,"onUpdate:show":e[5]||(e[5]=function(t){return h.state.popup=t}),position:"top",style:{height:"50%",padding:"20px"}},{default:i((function(){return[Object(n["j"])("div",{class:"contact",innerHTML:t.config.contact},null,8,["innerHTML"])]})),_:1},8,["show"]),Object(n["j"])(w,Object(n["p"])(h.state.payData,{show:h.state.payShow,"onUpdate:show":e[6]||(e[6]=function(t){return h.state.payShow=t}),onOnPayOK:e[7]||(e[7]=function(t){return b.handlePay(!0)}),onOnPayFail:e[8]||(e[8]=function(t){return b.handlePay(!1)})}),null,16,["show"])]})),_:1})})),h=a("5530"),b=(a("ac1f"),a("5319"),a("07ac"),a("5502")),f=a("2824"),j=a("76a1"),O={components:{BaseLayout:f["a"],Pay:j["default"]},data:function(){var t=3577,e=Object(n["C"])({mobile:"",id:0,api:"",index:0,spu:[],sku:[],payData:{},payShow:!1,popup:!1});return{cid:t,state:e}},created:function(){var t=this;if(!this.authorized)return this.auth(null),window.location.replace("http://api.fuchijihua.com/wechat/?host="+(/(192|test)/.test(window.location.host)?window.location.host:"")+"&page="+escape(this.$route.fullPath));this.$http.get("/digital/list?cid="+this.cid).then((function(e){var a=Object.values(e)[0];for(var n in a)a[n]["spec"]=JSON.parse(a[n]["spec"]);t.state.spu=a,t.handleTab()}))},computed:Object(h["a"])(Object(h["a"])({},Object(b["d"])(["config","profile"])),Object(b["b"])(["authorized"])),methods:Object(h["a"])({handleTab:function(){this.state.id=this.state.spu[this.state.index]["id"],this.state.sku=this.state.spu[this.state.index]["spec"]},handleSubmit:function(){var t=this;return this.state.id<=0||this.state.api.length<=5?this.$toast("请选择充值项目"):/^1[\d]{10}$/.test(this.state.mobile)?void this.$http.post("/digital/checkout?id="+this.state.id+"&api="+this.state.api+"&account="+this.state.mobile).then((function(e){t.state.payData=Object(h["a"])(Object(h["a"])({},e),{},{json:JSON.stringify(e)}),t.state.payShow=!0})):this.$toast("请填写正确的手机号")},handlePay:function(t){this.state.payShow=!1,t&&this.$dialog.alert({title:"订单已生成",message:"请点击下方“订单记录”查看到账情况",theme:"round-button"})}},Object(b["c"])(["auth"]))},v=(a("f619"),a("6b0d")),y=a.n(v);const g=y()(O,[["render",d],["__scopeId","data-v-d6e6e61e"]]);e["default"]=g},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),i=a("5899"),c="["+i+"]",s=RegExp("^"+c+c+"*"),o=RegExp(c+c+"*$"),u=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:u(1),end:u(2),trim:u(3)}},"6f53":function(t,e,a){var n=a("83ab"),i=a("df75"),c=a("fc6a"),s=a("d1e7").f,o=function(t){return function(e){var a,o=c(e),u=i(o),r=u.length,l=0,p=[];while(r>l)a=u[l++],n&&!s.call(o,a)||p.push(t?[a,o[a]]:o[a]);return p}};t.exports={entries:o(!0),values:o(!1)}},7156:function(t,e,a){var n=a("861d"),i=a("d2bb");t.exports=function(t,e,a){var c,s;return i&&"function"==typeof(c=e.constructor)&&c!==a&&n(s=c.prototype)&&s!==a.prototype&&i(t,s),t}},"76a1":function(t,e,a){"use strict";a.r(e);var n=a("7a23"),i=Object(n["S"])("data-v-7af5de77");Object(n["B"])("data-v-7af5de77");var c={class:"box"},s={id:"pay",class:"fee"},o={class:"subject"},u=Object(n["i"])(" "),r=Object(n["i"])(" "),l=Object(n["i"])("立即付款"),p=Object(n["i"])("使用微信支付");Object(n["z"])();var d=i((function(t,e,a,d,h,b){var f=Object(n["G"])("van-icon"),j=Object(n["G"])("van-cell"),O=Object(n["G"])("van-switch"),v=Object(n["G"])("van-button"),y=Object(n["G"])("van-action-sheet"),g=Object(n["G"])("BaseLayout");return Object(n["y"])(),Object(n["g"])(g,{title:"收银台",navbar:"hide"},{default:i((function(){return[Object(n["j"])(y,{show:b.popup,"onUpdate:show":e[3]||(e[3]=function(t){return b.popup=t}),title:"收银台","close-on-click-overlay":!1},{default:i((function(){return[Object(n["j"])("div",c,[Object(n["j"])("div",s,[Object(n["j"])(f,{name:"points",size:"20"}),Object(n["i"])(" "+Object(n["K"])(a.fee),1)]),Object(n["j"])("div",o,Object(n["K"])(a.subject),1),Object(n["j"])(j,{title:"订单编号",value:a.oid},null,8,["value"]),Object(n["Q"])(Object(n["j"])(j,{title:"优惠券",value:"无","is-link":""},null,512),[[n["N"],a.tag]]),Object(n["j"])(j,{title:"余额支付",value:"（"+t.profile.cash+" 可用）"},{"right-icon":i((function(){return[u,Object(n["j"])(O,{modelValue:h.state.useCash,"onUpdate:modelValue":e[1]||(e[1]=function(t){return h.state.useCash=t}),size:"24"},null,8,["modelValue"])]})),_:1},8,["value"]),Object(n["j"])(j,{title:"积分支付",value:"（"+t.profile.point+" 可用）"},{"right-icon":i((function(){return[r,Object(n["j"])(O,{modelValue:h.state.usePoint,"onUpdate:modelValue":e[2]||(e[2]=function(t){return h.state.usePoint=t}),size:"24"},null,8,["modelValue"])]})),_:1},8,["value"]),Object(n["j"])(j,{title:"下单时间",value:a.dt},null,8,["value"]),Object(n["j"])(v,{class:"submit",type:"primary",round:"",block:"",onClick:b.handlePay},{default:i((function(){return[l]})),_:1},8,["onClick"]),Object(n["j"])(v,{type:"success",icon:"wechat-pay",round:"",block:"",plain:"",onClick:b.handleWxPay},{default:i((function(){return[p]})),_:1},8,["onClick"])])]})),_:1},8,["show"])]})),_:1})})),h=a("a891"),b=(a("7eed"),a("6b0d")),f=a.n(b);const j=f()(h["a"],[["render",d],["__scopeId","data-v-7af5de77"]]);e["default"]=j},"7eed":function(t,e,a){"use strict";a("b35b")},8559:function(t,e,a){},a891:function(t,e,a){"use strict";(function(t){var n=a("53ca"),i=a("5530"),c=(a("a9e3"),a("7a23")),s=a("5502"),o=a("2824");e["a"]={components:{BaseLayout:o["a"]},name:"Pay",props:{show:{type:Boolean,default:!1},json:{type:String,default:""},oid:{type:[String,Number],default:""},fee:{type:[String,Number],default:0},subject:{type:[String,Number],default:""},tag:{type:[String,Number],default:""},attach:{type:String,default:""},notify:{type:String,default:""},exprie:{type:[String,Number],default:0},dt:{type:String,default:""}},emits:["update:show"],data:function(){var t=Object(c["C"])({useCash:!0,usePoint:!0,type:"",tid:"",pid:""});return{state:t}},created:function(){},computed:Object(i["a"])({popup:{get:function(){return this.show},set:function(t){this.$emit("update:show",t)}}},Object(s["d"])(["profile"])),methods:Object(i["a"])({handlePay:function(){return this.state.useCash||this.state.usePoint?this.state.useCash&&!this.state.usePoint&&(this.state.type="cash",this.fee>this.profile.cash)?this.$toast("余额不足支付"):!this.state.useCash&&this.state.usePoint&&(this.state.type="point",this.fee>this.profile.point)?this.$toast("积分不足支付"):this.state.useCash&&this.state.usePoint&&(this.state.type="",this.fee>parseFloat(this.profile.point)+parseFloat(this.profile.cash))?this.$toast("账户资产不足，请使用微信支付"):void this.pay():this.$toast("至少选择一种支付方式")},handleWxPay:function(){var t=this;this.$http.post("/wechat/pay?fee="+this.fee+"&name="+this.subject+"&attach="+this.attach).then((function(e){t.state.popup=!1,t.state.pid=e.pid,e.code&&t.$dialog.confirm({title:"请用微信扫码付款",message:"<img src='http://api.qrserver.com/v1/create-qr-code/?size=250x250&ecc=H&margin=10&data="+e.code+"'>",theme:"round-button",confirmButtonText:"我已完成付款",allowHtml:!0}).then(t.wxpayCheck)||WeixinJSBridge&&WeixinJSBridge.invoke("getBrandWCPayRequest",e,(function(e){return"get_brand_wcpay_request:ok"!=e.err_msg?t.$dialog.alert({message:"微信支付失败，请重试！"}):t.wxpayCheck()}))}))},wxpayCheck:function(){var e=this;this.popup&&(this.$toast.loading({message:"订单处理中...",forbidClick:!0}),setTimeout((function(){0==document.querySelector("#pay").getBoundingClientRect()["height"]&&(e.popup=!1),e.$http.post("/wechat/payCheck?id="+e.state.pid).then((function(a){return t.isEmpty(a)||Object(n["a"])(a.attach)!=e.attach?e.wxpayCheck():(e.popup=!1,e.state.type="wxpay",e.pay())}))}),5e3))},pay:function(){var t=this;this.$http.post("/pay?order="+this.json+"&type="+this.state.type+"&tid="+this.state.tid+"&pid="+this.state.pid).then((function(){t.$init(),t.$emit("onPayOK")})).catch((function(){t.$emit("onPayFail")}))}},Object(s["c"])(["auth"]))}}).call(this,a("81b0"))},a9e3:function(t,e,a){"use strict";var n=a("83ab"),i=a("da84"),c=a("94ca"),s=a("6eeb"),o=a("5135"),u=a("c6b6"),r=a("7156"),l=a("c04e"),p=a("d039"),d=a("7c73"),h=a("241c").f,b=a("06cf").f,f=a("9bf2").f,j=a("58a8").trim,O="Number",v=i[O],y=v.prototype,g=u(d(y))==O,m=function(t){var e,a,n,i,c,s,o,u,r=l(t,!1);if("string"==typeof r&&r.length>2)if(r=j(r),e=r.charCodeAt(0),43===e||45===e){if(a=r.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(r.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+r}for(c=r.slice(2),s=c.length,o=0;o<s;o++)if(u=c.charCodeAt(o),u<48||u>i)return NaN;return parseInt(c,n)}return+r};if(c(O,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var w,k=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof k&&(g?p((function(){y.valueOf.call(a)})):u(a)!=O)?r(new v(m(e)),a,k):m(e)},C=n?h(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),S=0;C.length>S;S++)o(v,w=C[S])&&!o(k,w)&&f(k,w,b(v,w));k.prototype=y,y.constructor=k,s(i,O,k)}},b35b:function(t,e,a){},f619:function(t,e,a){"use strict";a("8559")}}]);