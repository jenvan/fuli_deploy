{"version":3,"sources":["webpack:///./src/views/Passport.vue?9564","webpack:///./src/views/Passport.vue","webpack:///./src/views/Passport.vue?9045","webpack:///./src/assets/invite_intro.jpg","webpack:///./src/assets/invite_title.jpg"],"names":["class","title","subtitle","bg","height","invite","onBack","back","name","size","src","onSubmit","onFailed","state","account","label","placeholder","clearable","rules","action","button","type","onSend","vcode","password","ucode","block","native-type","to","target","components","BaseLayout","props","String","default","code","redirect","setup","created","this","length","$http","post","then","data","auth","$router","push","mounted","computed","act","arr","methods","values","test","url","err","$toast","console","error","render","__scopeId","module","exports"],"mappings":"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","file":"asset/js/chunk-8220bc16.f32a3fe8.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Passport.vue?vue&type=style&index=0&id=5c7d6a85&scoped=true&lang=css\"","<template>\n  <BaseLayout :title=\"title\" :subtitle=\"subtitle\" bg=\"linear-gradient(180deg, #EFF, #F9F9F9 10%, #F9F9F9)\" :height=\"!invite? '60px': 0\" @click-back=\"onBack\">\n    <template #back><van-icon :name=\"invite?'wap-home-o':'arrow-left'\" size=\"large\"></van-icon></template>\n\n    <van-image :src=\"require('@/assets/invite_title.jpg')\" v-show=\"invite\"></van-image>\n    <van-steps class=\"step\" v-show=\"invite\">\n      <van-step>注册账号</van-step>\n      <van-step>下载 app</van-step>\n      <van-step>登录使用</van-step>\n    </van-steps>\n\n    <van-form class=\"form\" @submit=\"onSubmit\" @failed=\"onFailed\">\n      <van-field\n        v-show=\"action != 'login'\"\n        v-model=\"state.account\"\n        name=\"mobile\"\n        label=\"手机号\"\n        placeholder=\"请填写手机号\"\n        clearable\n        :rules=\"[{ required: action != 'login', message: '支持大陆及港澳台手机号码' }]\"\n      >\n        <template #button>\n          <van-button size=\"small\" type=\"primary\" @click=\"onSend\">发送验证码</van-button>\n        </template>\n      </van-field>\n      <van-field \n        v-show=\"action != 'login'\"\n        v-model=\"state.vcode\" \n        name=\"vcode\"\n        label=\"验证码\" \n        :rules=\"[{ required: action != 'login', message: '请填写短信验证码' }]\"\n      />\n\n      <van-field\n        v-show=\"action == 'login'\"\n        v-model=\"state.account\"\n        name=\"username\"\n        label=\"账号\"\n        clearable\n        :placeholder=\"action == 'login' ? '手机号或用户名' : '请填写用户名'\"\n        :rules=\"[{ required: action == 'login', message: '用户名以字母开头且长度不小于4' }]\"\n      />\n      <van-field\n        v-show=\"action != 'bind'\"\n        v-model=\"state.password\"\n        type=\"password\"\n        name=\"password\"\n        label=\"密码\"\n        clearable\n        :placeholder=\"action == 'changepassword' ? '请填写新的密码' : '请填写密码'\"\n        :rules=\"[{ required: action != 'bind', message: '包含字母和数字且长度不小于6' }]\"\n      />\n\n      <van-field\n        v-show=\"invite\"\n        v-model=\"state.ucode\"\n        name=\"ucode\"\n        label=\"邀请码\"\n        placeholder=\"没有可以不用填写\"\n      />\n\n      <br/>\n      <van-button block type=\"primary\" native-type=\"submit\">{{title}}</van-button>\n\n      <div class=\"extra\" v-show=\"!invite && action=='login'\"   >没有账号？<router-link class=\"register\" :to=\"'/register?subtitle=' + subtitle + '&target=' + target\">注册</router-link><router-link class=\"right\" :to=\"'/changepassword?subtitle=' + subtitle + '&target=' + target\">忘记密码？</router-link></div>\n      <div class=\"extra\" v-show=\"!invite && action=='register'\">已有账号？<router-link class=\"login\" :to=\"'/login?subtitle=' + subtitle + '&target=' + target\">登录</router-link></div>\n\n    </van-form>\n\n    <div class=\"intro\">\n      <van-image v-show=\"invite\" :src=\"require('@/assets/invite_intro.jpg')\" height=\"1000px\"></van-image>\n    </div>\n\n  </BaseLayout>\n</template>\n\n<style scoped>\n.step {\n  margin: 10px;\n}\n.form {\n  margin: 10px auto;\n  padding: 10px;\n  border-radius: 10px;\n  overflow: hidden;\n}\n.extra {\n  margin-top: 20px;\n  padding: 0 10px;\n  color: #999;\n  font-size: 14px;\n}\n.right {\n  float: right;\n}\n.intro {\n  margin-top: 20px;\n}\n</style>\n\n<script>\nimport {reactive} from 'vue'\nimport {mapState, mapGetters, mapMutations} from 'vuex'\nimport BaseLayout from '@/components/BaseLayout.vue'\n\nexport default {\n  components: {BaseLayout},\n\n  props: {\n    action: {\n      type: String,\n      default: \"login\",\n    },\n    ucode: {\n      type: String,\n      default: \"\",\n    },\n    code: {\n      type: String,\n      default: \"\",\n    },\n    subtitle: {\n      type: String,\n      default: \"\",\n    },\n    redirect: {\n      type: String,\n      default: \"/my\",\n    }\n  },\n\n  setup(){\n    const state = reactive({\n      account: \"\",\n      password: \"\",\n      vcode: \"\",\n      ucode: \"\",\n    });\n\n    return {\n      state,\n    };\n  },\n\n  created(){\n    this.state.ucode = this.ucode;\n    this.code.length > 0 && this.$http.post(\"/wechat/login?code=\" + this.code).then((data) => {\n      this.auth(data);\n      this.$router.push(\"/\");\n    });\n  },\n\n  mounted(){\n    if (this.action == \"logout\"){\n      this.$http.post(\"/user/\" + this.action).then((data) => {\n        this.auth(data);\n        this.$router.push(this.redirect);\n      });\n    }\n  },\n\n  computed: {\n    invite(){\n      return this.action == \"invite\" ? true : false;\n    },\n    title() {\n      let act = this.action;\n      let arr = {\n        \"login\" : \"登录\",\n        \"register\" : \"注册\",\n        \"changepassword\" : \"找回密码\",\n        \"bind\" : \"绑定账号\",\n      }\n      if (this.invite)\n        return \"注册\";\n      if (typeof arr[act] == \"undefined\")\n        return \"登录\";\n      return arr[act];\n    },\n    ...mapState([\"profile\"]),\n    ...mapGetters([\"authorized\"]),\n  },\n\n  methods: {\n    onBack: function(){\n      if (this.invite)\n        return this.$router.push(\"/\");\n      return this.$router.push(\"/my\");\n    },\n    onSend: function(){\n      this.$http.post(\"/user/verify?mobile=\" + this.state.account);\n    },\n    onSubmit: function(values) {\n      /^\\d+$/.test(this.state.account) && delete values[\"username\"] || delete values[\"mobile\"];\n      let url = this.action == \"bind\" ? \"/wechat/bindmobile\" : \"/user/\" + (this.action != \"invite\" ? this.action : \"register\");\n      this.$http.post(url, values).then((data) => {\n        this.auth(data);\n        this.$router.push(this.redirect);\n      });\n    },\n    onFailed(err){\n      this.$toast(\"请按要求填写表单\");\n      console.error(\"表单提交失败\", err);\n    },\n    ...mapMutations([\"auth\"]),\n  }\n\n}\n\n</script>\n","import { render } from \"./Passport.vue?vue&type=template&id=5c7d6a85&scoped=true\"\nimport script from \"./Passport.vue?vue&type=script&lang=js\"\nexport * from \"./Passport.vue?vue&type=script&lang=js\"\n\nimport \"./Passport.vue?vue&type=style&index=0&id=5c7d6a85&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-5c7d6a85\"\n\nexport default script","module.exports = __webpack_public_path__ + \"asset/img/invite_intro.3b623efd.jpg\";","module.exports = __webpack_public_path__ + \"asset/img/invite_title.984e4a7a.jpg\";"],"sourceRoot":""}