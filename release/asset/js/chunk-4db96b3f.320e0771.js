(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4db96b3f"],{"38d7":function(t,e,n){"use strict";(function(t){var a=n("5530"),c=n("7a23"),i=n("2824");e["a"]={components:{BaseLayout:i["a"]},setup:function(){var t=Object(c["B"])({refreshing:!1,loading:!1,finished:!1,list:[],offset:0,limit:20,show1:!1,item:{},contact:{},cards:[],show2:!1,giftcard:""}),e=Object(c["C"])("4");Object(c["C"])(0);return{state:t,choose:e}},mounted:function(){this.onRefresh()},computed:{},methods:{onRefresh:function(){this.state.loading=!0,this.state.finished=!1,this.state.offset=0,this.state.list=[],this.onLoad()},onLoad:function(){var t=this;this.$http.get("/mall/orderlist?offset="+this.state.offset+"&limit="+this.state.limit).then((function(e){for(var n in t.state.refreshing=!1,(0==e.length||e.length<t.state.limit)&&(t.state.finished=!0),t.state.loading=!1,t.state.offset+=e.length,e){var c=e[n];t.state.list.push(Object(a["a"])(Object(a["a"])({},c),{status:["未付款","已付款","已发货","交易成功","交易关闭"][c.status],color:["#CCC","#666","#00C","#0C0","#C00"][c.status]}))}}))},popup:function(e){var n=this;this.state.contact={},this.state.cards=[],this.$http.post("/mall/orderDetail?id="+e.id).then((function(a){if(n.state.show1=!0,n.state.item=a,n.state.item.result=["未付款","已付款","已发货","交易成功","交易关闭"][a.status],e.card<=0)n.state.contact=a.contact;else{for(var c in a.cards)a.cards[c].bg="rgb("+t.random(150,250)+","+t.random(150,250)+","+t.random(150,250)+")";n.state.cards=a.cards}}))},copy:function(t){var e="亲，送你一张提货卡略表心意！请关注微信公众号“福鲤社”，点击下方菜单提货，提货卡号："+t;this.$copy(e)},save:function(t){this.state.show2=!0,this.state.giftcard=this.$host+"/mall/card?type=pick&token="+t}}}}).call(this,n("81b0"))},"957a":function(t,e,n){"use strict";n.r(e);n("b0c0");var a=n("7a23"),c=Object(a["R"])("data-v-4039ffe8");Object(a["A"])("data-v-4039ffe8");var i={class:"van-ellipsis"},s={class:"card"},l={class:"tool"},o=Object(a["h"])(" 复制卡号"),u=Object(a["h"])("   "),r=Object(a["h"])(" 显示卡片"),b={class:"indicator"},f={class:"action"},d=Object(a["i"])("br",null,null,-1),j=Object(a["h"])("长按图片保存到手机或分享给好友");Object(a["y"])();var O=c((function(t,e,n,O,h,m){var v=Object(a["F"])("van-tag"),p=Object(a["F"])("van-col"),g=Object(a["F"])("van-image"),k=Object(a["F"])("van-row"),_=Object(a["F"])("van-list"),C=Object(a["F"])("van-pull-refresh"),w=Object(a["F"])("van-icon"),y=Object(a["F"])("van-cell"),x=Object(a["F"])("van-collapse-item"),F=Object(a["F"])("van-swipe-item"),J=Object(a["F"])("van-swipe"),L=Object(a["F"])("van-collapse"),B=Object(a["F"])("van-button"),R=Object(a["F"])("van-action-sheet"),V=Object(a["F"])("van-popup"),D=Object(a["F"])("BaseLayout");return Object(a["x"])(),Object(a["f"])(D,{title:"我的订单"},{default:c((function(){return[Object(a["i"])(C,{modelValue:O.state.refreshing,"onUpdate:modelValue":e[2]||(e[2]=function(t){return O.state.refreshing=t}),onRefresh:m.onRefresh},{default:c((function(){return[Object(a["i"])(_,{class:"list",loading:O.state.loading,"onUpdate:loading":e[1]||(e[1]=function(t){return O.state.loading=t}),finished:O.state.finished,"loading-text":"正在请求数据 ...","finished-text":"没有更多了","immediate-check":!1,onLoad:m.onLoad},{default:c((function(){return[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(O.state.list,(function(t,e){return Object(a["x"])(),Object(a["f"])(k,{class:"block",align:"center",key:e,onClick:function(e){return m.popup(t)}},{default:c((function(){return[Object(a["i"])(p,{span:"24",class:"dt"},{default:c((function(){return[Object(a["i"])(v,{color:"#CCC"},{default:c((function(){return[Object(a["h"])(Object(a["J"])(t.dt_create),1)]})),_:2},1024)]})),_:2},1024),Object(a["i"])(p,{span:"12",class:"id"},{default:c((function(){return[Object(a["h"])("# "+Object(a["J"])(t.id),1)]})),_:2},1024),Object(a["i"])(p,{span:"12",class:"status",style:{color:t.color}},{default:c((function(){return[Object(a["h"])(Object(a["J"])(t.status),1)]})),_:2},1032,["style"]),Object(a["i"])(p,{span:"19",class:"detail"},{default:c((function(){return[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(t.detail,(function(t,e){return Object(a["x"])(),Object(a["f"])(g,{class:"img",key:e,src:t.image,fit:"contain"},null,8,["src"])})),128))]})),_:2},1024),Object(a["i"])(p,{span:"5",class:"amount"},{default:c((function(){return[Object(a["i"])("div",null,"共 "+Object(a["J"])(t.total)+" 件",1),Object(a["i"])("div",null,"￥ "+Object(a["J"])(t.amount),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1},8,["loading","finished","onLoad"])]})),_:1},8,["modelValue","onRefresh"]),Object(a["i"])(R,{show:O.state.show1,"onUpdate:show":e[4]||(e[4]=function(t){return O.state.show1=t}),title:"订单详情"},{default:c((function(){return[Object(a["i"])(L,{class:"bill",modelValue:O.choose,"onUpdate:modelValue":e[3]||(e[3]=function(t){return O.choose=t}),accordion:""},{default:c((function(){return[Object(a["i"])(x,{name:"1",title:"商品数量",value:(O.state.item.card<=0?O.state.item.total:O.state.item.card+" x "+O.state.item.total/O.state.item.card)+" 件"},{default:c((function(){return[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(O.state.item.detail,(function(t,e){return Object(a["x"])(),Object(a["f"])(y,{key:e,label:t.spec,style:{alignItems:"center"}},{icon:c((function(){return[Object(a["i"])(w,{class:"img",name:t.image,size:"32"},null,8,["name"])]})),title:c((function(){return[Object(a["i"])("div",i,Object(a["J"])(t.title),1)]})),extra:c((function(){return[Object(a["h"])("x "+Object(a["J"])(t.num),1)]})),_:2},1032,["label"])})),128))]})),_:1},8,["value"]),Object(a["i"])(x,{name:"2",title:"订单总额",value:O.state.item.amount+" 元"},{default:c((function(){return[Object(a["i"])(y,{title:"实付积分",value:O.state.item.point+" 分"},null,8,["value"]),Object(a["i"])(y,{title:"实付现金",value:O.state.item.cash+" 元"},null,8,["value"])]})),_:1},8,["value"]),Object(a["i"])(x,{name:"3",title:"交易状态",value:O.state.item.result},{default:c((function(){return[Object(a["i"])(y,{title:"创建时间",value:O.state.item.dt_create},null,8,["value"]),Object(a["i"])(y,{title:"付款时间",value:O.state.item.dt_pay},null,8,["value"]),Object(a["i"])(y,{title:"发货时间",value:O.state.item.dt_send},null,8,["value"]),Object(a["i"])(y,{title:"完成时间",value:O.state.item.dt_finish},null,8,["value"])]})),_:1},8,["value"]),Object(a["i"])(x,{name:"4",title:"收货方式",value:0==O.state.item.card?"物流":"提货卡"},{default:c((function(){return[0==O.state.item.card?(Object(a["x"])(),Object(a["f"])(y,{key:0,title:O.state.contact.name+"（"+O.state.contact.mobile+"）"},{label:c((function(){return[Object(a["h"])(Object(a["J"])(O.state.contact.province)+" "+Object(a["J"])(O.state.contact.city)+" "+Object(a["J"])(O.state.contact.district)+" "+Object(a["J"])(O.state.contact.address),1)]})),_:1},8,["title"])):(Object(a["x"])(),Object(a["f"])(J,{key:1,class:"swipe"},{indicator:c((function(t){var e=t.active;return[Object(a["i"])("div",b,Object(a["J"])(e+1)+" / "+Object(a["J"])(O.state.cards.length),1)]})),default:c((function(){return[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(O.state.cards,(function(t,e){return Object(a["x"])(),Object(a["f"])(F,{class:"sitem",key:e,style:{background:t.bg}},{default:c((function(){return[Object(a["i"])("div",s,"提货卡号：****"+Object(a["J"])(t.token.substr(4)),1),Object(a["i"])("div",l,[Object(a["i"])(w,{name:"more-o",onClick:function(e){return m.copy(t.token)}},{default:c((function(){return[o]})),_:2},1032,["onClick"]),u,Object(a["i"])(w,{name:"photo-o",onClick:function(e){return m.save(t.token)}},{default:c((function(){return[r]})),_:2},1032,["onClick"])])]})),_:2},1032,["style"])})),128))]})),_:1}))]})),_:1},8,["value"])]})),_:1},8,["modelValue"]),Object(a["i"])("div",f,[Object(a["P"])(Object(a["i"])(B,{type:"primary",text:"立即付款",onClick:t.onClickButton,block:"",round:""},null,8,["onClick"]),[[a["M"],0==O.state.item.status]]),Object(a["P"])(Object(a["i"])(B,{type:"success",text:"确认收货",onClick:t.onClickButton,block:"",round:""},null,8,["onClick"]),[[a["M"],2==O.state.item.status]]),Object(a["P"])(Object(a["i"])(B,{type:"danger",text:"申请售后",onClick:t.onClickButton,block:"",round:""},null,8,["onClick"]),[[a["M"],3==O.state.item.status]])])]})),_:1},8,["show"]),Object(a["i"])(V,{show:O.state.show2,"onUpdate:show":e[5]||(e[5]=function(t){return O.state.show2=t})},{default:c((function(){return[Object(a["i"])(g,{class:"giftcard",src:O.state.giftcard,width:"300"},{default:c((function(){return[d,j]})),_:1},8,["src"])]})),_:1},8,["show"])]})),_:1})})),h=n("38d7");n("c18c");h["a"].render=O,h["a"].__scopeId="data-v-4039ffe8";e["default"]=h["a"]},c18c:function(t,e,n){"use strict";n("ca26")},ca26:function(t,e,n){}}]);
//# sourceMappingURL=chunk-4db96b3f.320e0771.js.map