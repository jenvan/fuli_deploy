(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f83eb86","chunk-fa4ecc8e"],{"0ac3":function(t,e,n){"use strict";n.r(e);var i=n("7a23"),a=Object(i["S"])("data-v-5265a579");Object(i["B"])("data-v-5265a579");var c=Object(i["i"])("团队管理"),o={class:"list"};Object(i["z"])();var r=a((function(t,e,n,r,s,u){var l=Object(i["G"])("van-button"),d=Object(i["G"])("van-dropdown-item"),b=Object(i["G"])("van-dropdown-menu"),f=Object(i["G"])("van-col"),h=Object(i["G"])("van-search"),j=Object(i["G"])("van-row"),p=Object(i["G"])("van-sticky"),m=Object(i["G"])("van-icon"),g=Object(i["G"])("van-tag"),O=Object(i["G"])("van-cell"),v=Object(i["G"])("van-empty"),y=Object(i["G"])("van-action-bar-button"),C=Object(i["G"])("van-action-bar"),k=Object(i["G"])("van-contact-edit"),w=Object(i["G"])("van-action-sheet"),x=Object(i["G"])("BaseLayout");return Object(i["y"])(),Object(i["g"])(x,{title:"员工",navbar:u.callee?"hide":"show"},{extra:a((function(){return[Object(i["j"])(l,{icon:"friends",type:"primary",size:"small",onClick:e[1]||(e[1]=function(e){return t.$router.push("group")})},{default:a((function(){return[c]})),_:1})]})),default:a((function(){return[Object(i["j"])(p,{"offset-top":40},{default:a((function(){return[Object(i["j"])(j,{class:"toolbar",align:"center",gutter:"5"},{default:a((function(){return[Object(i["j"])(f,{span:"6"},{default:a((function(){return[Object(i["j"])(b,null,{default:a((function(){return[Object(i["j"])(d,{modelValue:r.state.gid,"onUpdate:modelValue":e[2]||(e[2]=function(t){return r.state.gid=t}),options:r.state.options,onChange:u.onChange},null,8,["modelValue","options","onChange"])]})),_:1})]})),_:1}),Object(i["j"])(f,{span:"18"},{default:a((function(){return[Object(i["j"])(h,{modelValue:r.state.keyword,"onUpdate:modelValue":e[3]||(e[3]=function(t){return r.state.keyword=t}),placeholder:"输入UID、手机号、员工姓名搜索",clearable:"",onSearch:u.onSearch,onClear:u.onSearch},null,8,["modelValue","onSearch","onClear"])]})),_:1})]})),_:1})]})),_:1}),Object(i["j"])("div",o,[(Object(i["y"])(!0),Object(i["g"])(i["a"],null,Object(i["E"])(r.state.list,(function(t,e){return Object(i["y"])(),Object(i["g"])(O,{class:"item",key:e,title:t.uid+" / "+t.truename,label:t.mobile,border:!1,"is-link":!u.callee,onClick:function(e){return u.onChoose(t)}},{icon:a((function(){return[Object(i["j"])(m,{class:"icon",name:u.contains(t.uid)?"manager":"manager-o",color:u.contains(t.uid)?"#F66":"#CCC",size:"24"},null,8,["name","color"])]})),value:a((function(){return[(Object(i["y"])(!0),Object(i["g"])(i["a"],null,Object(i["E"])(t.group,(function(t,e){return Object(i["y"])(),Object(i["g"])(g,{key:e,color:r.colors[u.getIndex(t)],plain:"",round:""},{default:a((function(){return[Object(i["i"])(Object(i["K"])(r.state.group[t]||"失效组"),1)]})),_:2},1032,["color"])})),128))]})),_:2},1032,["title","label","is-link","onClick"])})),128))]),Object(i["Q"])(Object(i["j"])(v,{style:{width:"100%"}},null,512),[[i["N"],0==r.state.list.length]]),Object(i["j"])(C,null,{default:a((function(){return[u.callee?(Object(i["y"])(),Object(i["g"])(y,{key:0,type:"warning",text:"取消选择",onClick:u.onCancel},null,8,["onClick"])):Object(i["h"])("",!0),u.callee?(Object(i["y"])(),Object(i["g"])(y,{key:1,type:"primary",text:"选择完成",onClick:u.onSubmit},null,8,["onClick"])):Object(i["h"])("",!0),u.callee?Object(i["h"])("",!0):(Object(i["y"])(),Object(i["g"])(y,{key:2,type:"warning",text:"批量新增员工",onClick:e[4]||(e[4]=function(e){return t.$toast("Wait")})})),u.callee?Object(i["h"])("",!0):(Object(i["y"])(),Object(i["g"])(y,{key:3,type:"primary",text:"新增单个员工",onClick:e[5]||(e[5]=function(t){return u.onChoose(null)})}))]})),_:1}),Object(i["j"])(w,{show:r.state.edit,"onUpdate:show":e[6]||(e[6]=function(t){return r.state.edit=t}),title:r.state.title},{default:a((function(){return[Object(i["j"])(k,{"is-edit":r.state.del,"contact-info":r.state.info,onSave:u.onSave,onDelete:u.onDelete},null,8,["is-edit","contact-info","onSave","onDelete"])]})),_:1},8,["show","title"])]})),_:1},8,["navbar"])})),s=n("5833"),u=(n("2516"),n("6b0d")),l=n.n(u);const d=l()(s["a"],[["render",r],["__scopeId","data-v-5265a579"]]);e["default"]=d},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"13d5":function(t,e,n){"use strict";var i=n("23e7"),a=n("d58f").left,c=n("a640"),o=n("2d00"),r=n("605d"),s=c("reduce"),u=!r&&o>79&&o<83;i({target:"Array",proto:!0,forced:!s||u},{reduce:function(t){return a(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1e59":function(t,e,n){},2516:function(t,e,n){"use strict";n("1e59")},2532:function(t,e,n){"use strict";var i=n("23e7"),a=n("5a34"),c=n("1d80"),o=n("ab13");i({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(c(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,n){"use strict";var i=n("6eeb"),a=n("825a"),c=n("d039"),o=n("ad6d"),r="toString",s=RegExp.prototype,u=s[r],l=c((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=r;(l||d)&&i(RegExp.prototype,r,(function(){var t=a(this),e=String(t.source),n=t.flags,i=String(void 0===n&&t instanceof RegExp&&!("flags"in s)?o.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},"578e":function(t,e,n){"use strict";n.r(e);n("b0c0");var i=n("7a23"),a=Object(i["S"])("data-v-e56f584e");Object(i["B"])("data-v-e56f584e");var c={class:"list"},o=Object(i["i"])("标记员工");Object(i["z"])();var r=a((function(t,e,n,r,s,u){var l=Object(i["G"])("van-icon"),d=Object(i["G"])("van-button"),b=Object(i["G"])("van-cell"),f=Object(i["G"])("van-empty"),h=Object(i["G"])("van-field"),j=Object(i["G"])("van-action-bar-button"),p=Object(i["G"])("van-action-bar"),m=Object(i["G"])("member"),g=Object(i["G"])("van-action-sheet"),O=Object(i["G"])("BaseLayout");return Object(i["y"])(),Object(i["g"])(O,{title:"团队"},{default:a((function(){return[Object(i["j"])("div",c,[(Object(i["y"])(!0),Object(i["g"])(i["a"],null,Object(i["E"])(s.state.list,(function(t,e){return Object(i["y"])(),Object(i["g"])(b,{class:"item",key:e,title:t.name,label:"共 "+t.total+" 人",border:!1,onClick:function(e){return u.onClick(t)}},{icon:a((function(){return[Object(i["j"])(l,{class:"icon",name:s.state.gid==t.id?"friends":"friends-o",color:s.state.gid==t.id?"#F66":"#CCC",size:"24"},null,8,["name","color"])]})),value:a((function(){return[Object(i["j"])(d,{icon:"star-o",type:"primary",size:"small",plain:"",onClick:Object(i["R"])((function(e){return u.onSelect(t)}),["stop"])},{default:a((function(){return[o]})),_:2},1032,["onClick"])]})),_:2},1032,["title","label","onClick"])})),128))]),Object(i["Q"])(Object(i["j"])(f,{style:{width:"100%"}},null,512),[[i["N"],0==s.state.list.length]]),Object(i["j"])(p,{class:"toolbar"},{default:a((function(){return[Object(i["j"])(h,{type:"text",border:!1,modelValue:s.state.group,"onUpdate:modelValue":e[1]||(e[1]=function(t){return s.state.group=t}),clearable:"",placeholder:"团队名称"},null,8,["modelValue"]),Object(i["j"])(j,{type:"primary",text:0==s.state.gid?"新增团队":"修改团队",onClick:u.onSave},null,8,["text","onClick"])]})),_:1}),Object(i["j"])(g,{show:s.state.show,"onUpdate:show":e[3]||(e[3]=function(t){return s.state.show=t}),title:"请点击选择员工",style:{height:"100%",maxHeight:"100%",background:"#F6F6F6"},round:!1,closeable:!1},{default:a((function(){return[Object(i["j"])(m,{selected:s.state.member,"onUpdate:selected":e[2]||(e[2]=function(t){return s.state.member=t}),onClose:u.onChange},null,8,["selected","onClose"])]})),_:1},8,["show"])]})),_:1})})),s=n("6ed0"),u=(n("ee8d"),n("6b0d")),l=n.n(u);const d=l()(s["a"],[["render",r],["__scopeId","data-v-e56f584e"]]);e["default"]=d},5833:function(t,e,n){"use strict";(function(t){n("d3b7"),n("25f0"),n("ac1f"),n("1276"),n("13d5"),n("99af"),n("4de4"),n("841c"),n("a15b"),n("b0c0"),n("caad"),n("2532"),n("b64b");var i=n("7a23"),a=n("2824");e["a"]={components:{BaseLayout:a["a"]},name:"Member",props:{selected:{type:[String,Object],default:function(){return null}}},emits:["update:selected"],setup:function(){for(var t=Object(i["C"])({member:[],group:[],gid:0,options:[],keyword:"",list:[],selected:[],edit:!1,del:!1,title:"",info:{}}),e=[],n=0;n<20;n++)e.push("#"+Math.random().toString(16).substr(3,6));return{state:t,colors:e}},created:function(){var e=this;this.state.member=[],this.state.list=[],this.state.selected=t.isEmpty(this.selected)?[]:this.selected.split(","),this.$http.get("/team/groupList").then((function(n){e.state.group=n,e.state.options=t.reduce(n,(function(t,e,n){return t.concat({text:e,value:n})}),[{text:"选择团队",value:0}])})),this.onChange()},watch:{selected:function(e,n){e!=n&&(this.state.selected=t.isEmpty(this.selected)?[]:this.selected.split(","))}},computed:{callee:function(){return null!=this.selected}},methods:{onChange:function(){var t=this;this.state.edit=!1,this.$http.post("/team/memberList?gid="+this.state.gid).then((function(e){t.state.member=e,t.onSearch()}))},onSearch:function(){var e=this;this.state.list=0==this.state.keyword.length?this.state.member:t.filter(this.state.member,(function(t){return t.truename.search(e.state.keyword)>-1||t.mobile.search(e.state.keyword)>-1}))},onSubmit:function(){this.$emit("update:selected",this.state.selected.join(",")),this.$emit("close",this.state.selected)},onCancel:function(){this.state.selected=t.isEmpty(this.selected)?[]:this.selected.split(","),this.$emit("close",null)},onChoose:function(e){this.callee?this.contains(e.uid)?t.pull(this.state.selected,e.uid):this.state.selected.push(e.uid):(this.state.del=!1,this.state.title="新增员工",this.state.info={},null!=e&&(this.state.del=!0,this.state.title="员工管理",this.state.info={id:e.id,name:e.truename,tel:e.mobile}),this.state.edit=!0)},onSave:function(t){this.$http.post("/team/memberSave?"+(t.id?"id="+t.id:"")+"&truename="+t.name+"&mobile="+t.tel).then(this.onChange)},onDelete:function(t){this.$http.post("/team/memberSave?id="+t.id+"&remove=1").then(this.onChange)},contains:function(e){return t.includes(this.state.selected,e)},getIndex:function(e){return t.indexOf(Object.keys(this.state.group),e)}}}}).call(this,n("81b0"))},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"6ed0":function(t,e,n){"use strict";(function(t){n("b0c0"),n("a15b"),n("13d5"),n("99af");var i=n("7a23"),a=n("2824"),c=n("0ac3");e["a"]={components:{BaseLayout:a["a"],Member:c["default"]},data:function(){var t=Object(i["C"])({list:[],gid:0,group:"",show:!1,member:[]});return{state:t}},created:function(){this.init()},methods:{init:function(){var t=this;this.$http.get("/team/groupList?stat=1").then((function(e){t.state.list=e}))},onClick:function(t){this.state.gid=this.state.gid==t.id?0:t.id,this.state.group=0==this.state.gid?"":t.name},onSelect:function(e){var n=this;this.state.gid=e.id,this.state.group=e.name,this.$http.post("/team/memberList?gid="+e.id).then((function(e){n.state.member=t.reduce(e,(function(t,e,n){return t.concat(e["uid"])}),[]).join(","),n.state.show=!0}))},onChange:function(t){null!=t&&this.$http.post("/team/groupSave?id="+this.state.gid,{member:t.join(",")}).then(this.init),this.state.show=!1},onSave:function(){this.$http.post("/team/groupSave?id="+this.state.gid+"&name="+this.state.group).then(this.init)}}}}).call(this,n("81b0"))},"841c":function(t,e,n){"use strict";var i=n("d784"),a=n("825a"),c=n("1d80"),o=n("129f"),r=n("14c3");i("search",1,(function(t,e,n){return[function(e){var n=c(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](String(n))},function(t){var i=n(e,t,this);if(i.done)return i.value;var c=a(t),s=String(this),u=c.lastIndex;o(u,0)||(c.lastIndex=0);var l=r(c,s);return o(c.lastIndex,u)||(c.lastIndex=u),null===l?-1:l.index}]}))},"99af":function(t,e,n){"use strict";var i=n("23e7"),a=n("d039"),c=n("e8b5"),o=n("861d"),r=n("7b0b"),s=n("50c4"),u=n("8418"),l=n("65f0"),d=n("1dde"),b=n("b622"),f=n("2d00"),h=b("isConcatSpreadable"),j=9007199254740991,p="Maximum allowed index exceeded",m=f>=51||!a((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=d("concat"),O=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:c(t)},v=!m||!g;i({target:"Array",proto:!0,forced:v},{concat:function(t){var e,n,i,a,c,o=r(this),d=l(o,0),b=0;for(e=-1,i=arguments.length;e<i;e++)if(c=-1===e?o:arguments[e],O(c)){if(a=s(c.length),b+a>j)throw TypeError(p);for(n=0;n<a;n++,b++)n in c&&u(d,b,c[n])}else{if(b>=j)throw TypeError(p);u(d,b++,c)}return d.length=b,d}})},a15b:function(t,e,n){"use strict";var i=n("23e7"),a=n("44ad"),c=n("fc6a"),o=n("a640"),r=[].join,s=a!=Object,u=o("join",",");i({target:"Array",proto:!0,forced:s||!u},{join:function(t){return r.call(c(this),void 0===t?",":t)}})},ab13:function(t,e,n){var i=n("b622"),a=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,"/./"[t](e)}catch(i){}}return!1}},b678:function(t,e,n){},caad:function(t,e,n){"use strict";var i=n("23e7"),a=n("4d64").includes,c=n("44d2");i({target:"Array",proto:!0},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),c("includes")},d58f:function(t,e,n){var i=n("1c0b"),a=n("7b0b"),c=n("44ad"),o=n("50c4"),r=function(t){return function(e,n,r,s){i(n);var u=a(e),l=c(u),d=o(u.length),b=t?d-1:0,f=t?-1:1;if(r<2)while(1){if(b in l){s=l[b],b+=f;break}if(b+=f,t?b<0:d<=b)throw TypeError("Reduce of empty array with no initial value")}for(;t?b>=0:d>b;b+=f)b in l&&(s=n(s,l[b],b,u));return s}};t.exports={left:r(!1),right:r(!0)}},ee8d:function(t,e,n){"use strict";n("b678")}}]);