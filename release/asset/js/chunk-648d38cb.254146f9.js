(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-648d38cb","chunk-fa4ecc8e"],{"0ac3":function(t,e,n){"use strict";n.r(e);var a=n("7a23"),o=Object(a["S"])("data-v-5265a579");Object(a["B"])("data-v-5265a579");var i=Object(a["i"])("团队管理"),r={class:"list"};Object(a["z"])();var c=o((function(t,e,n,c,s,l){var u=Object(a["G"])("van-button"),d=Object(a["G"])("van-dropdown-item"),f=Object(a["G"])("van-dropdown-menu"),h=Object(a["G"])("van-col"),b=Object(a["G"])("van-search"),j=Object(a["G"])("van-row"),p=Object(a["G"])("van-sticky"),m=Object(a["G"])("van-icon"),O=Object(a["G"])("van-tag"),g=Object(a["G"])("van-cell"),v=Object(a["G"])("van-empty"),y=Object(a["G"])("van-action-bar-button"),w=Object(a["G"])("van-action-bar"),k=Object(a["G"])("van-contact-edit"),C=Object(a["G"])("van-action-sheet"),x=Object(a["G"])("BaseLayout");return Object(a["y"])(),Object(a["g"])(x,{title:"员工",navbar:l.callee?"hide":"show"},{extra:o((function(){return[Object(a["j"])(u,{icon:"friends",type:"primary",size:"small",onClick:e[1]||(e[1]=function(e){return t.$router.push("group")})},{default:o((function(){return[i]})),_:1})]})),default:o((function(){return[Object(a["j"])(p,{"offset-top":40},{default:o((function(){return[Object(a["j"])(j,{class:"toolbar",align:"center",gutter:"5"},{default:o((function(){return[Object(a["j"])(h,{span:"6"},{default:o((function(){return[Object(a["j"])(f,null,{default:o((function(){return[Object(a["j"])(d,{modelValue:c.state.gid,"onUpdate:modelValue":e[2]||(e[2]=function(t){return c.state.gid=t}),options:c.state.options,onChange:l.onChange},null,8,["modelValue","options","onChange"])]})),_:1})]})),_:1}),Object(a["j"])(h,{span:"18"},{default:o((function(){return[Object(a["j"])(b,{modelValue:c.state.keyword,"onUpdate:modelValue":e[3]||(e[3]=function(t){return c.state.keyword=t}),placeholder:"输入UID、手机号、员工姓名搜索",clearable:"",onSearch:l.onSearch,onClear:l.onSearch},null,8,["modelValue","onSearch","onClear"])]})),_:1})]})),_:1})]})),_:1}),Object(a["j"])("div",r,[(Object(a["y"])(!0),Object(a["g"])(a["a"],null,Object(a["E"])(c.state.list,(function(t,e){return Object(a["y"])(),Object(a["g"])(g,{class:"item",key:e,title:t.uid+" / "+t.truename,label:t.mobile,border:!1,"is-link":!l.callee,onClick:function(e){return l.onChoose(t)}},{icon:o((function(){return[Object(a["j"])(m,{class:"icon",name:l.contains(t.uid)?"manager":"manager-o",color:l.contains(t.uid)?"#F66":"#CCC",size:"24"},null,8,["name","color"])]})),value:o((function(){return[(Object(a["y"])(!0),Object(a["g"])(a["a"],null,Object(a["E"])(t.group,(function(t,e){return Object(a["y"])(),Object(a["g"])(O,{key:e,color:c.colors[l.getIndex(t)],plain:"",round:""},{default:o((function(){return[Object(a["i"])(Object(a["K"])(c.state.group[t]||"失效组"),1)]})),_:2},1032,["color"])})),128))]})),_:2},1032,["title","label","is-link","onClick"])})),128))]),Object(a["Q"])(Object(a["j"])(v,{style:{width:"100%"}},null,512),[[a["N"],0==c.state.list.length]]),Object(a["j"])(w,null,{default:o((function(){return[l.callee?(Object(a["y"])(),Object(a["g"])(y,{key:0,type:"warning",text:"取消选择",onClick:l.onCancel},null,8,["onClick"])):Object(a["h"])("",!0),l.callee?(Object(a["y"])(),Object(a["g"])(y,{key:1,type:"primary",text:"选择完成",onClick:l.onSubmit},null,8,["onClick"])):Object(a["h"])("",!0),l.callee?Object(a["h"])("",!0):(Object(a["y"])(),Object(a["g"])(y,{key:2,type:"warning",text:"批量新增员工",onClick:e[4]||(e[4]=function(e){return t.$toast("Wait")})})),l.callee?Object(a["h"])("",!0):(Object(a["y"])(),Object(a["g"])(y,{key:3,type:"primary",text:"新增单个员工",onClick:e[5]||(e[5]=function(t){return l.onChoose(null)})}))]})),_:1}),Object(a["j"])(C,{show:c.state.edit,"onUpdate:show":e[6]||(e[6]=function(t){return c.state.edit=t}),title:c.state.title},{default:o((function(){return[Object(a["j"])(k,{"is-edit":c.state.del,"contact-info":c.state.info,onSave:l.onSave,onDelete:l.onDelete},null,8,["is-edit","contact-info","onSave","onDelete"])]})),_:1},8,["show","title"])]})),_:1},8,["navbar"])})),s=n("5833"),l=(n("2516"),n("6b0d")),u=n.n(l);const d=u()(s["a"],[["render",c],["__scopeId","data-v-5265a579"]]);e["default"]=d},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"13d5":function(t,e,n){"use strict";var a=n("23e7"),o=n("d58f").left,i=n("a640"),r=n("2d00"),c=n("605d"),s=i("reduce"),l=!c&&r>79&&r<83;a({target:"Array",proto:!0,forced:!s||l},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1e59":function(t,e,n){},2516:function(t,e,n){"use strict";n("1e59")},2532:function(t,e,n){"use strict";var a=n("23e7"),o=n("5a34"),i=n("1d80"),r=n("ab13");a({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~String(i(this)).indexOf(o(t),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,n){"use strict";var a=n("6eeb"),o=n("825a"),i=n("d039"),r=n("ad6d"),c="toString",s=RegExp.prototype,l=s[c],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=c;(u||d)&&a(RegExp.prototype,c,(function(){var t=o(this),e=String(t.source),n=t.flags,a=String(void 0===n&&t instanceof RegExp&&!("flags"in s)?r.call(t):n);return"/"+e+"/"+a}),{unsafe:!0})},5685:function(t,e,n){"use strict";n("a313")},5833:function(t,e,n){"use strict";(function(t){n("d3b7"),n("25f0"),n("ac1f"),n("1276"),n("13d5"),n("99af"),n("4de4"),n("841c"),n("a15b"),n("b0c0"),n("caad"),n("2532"),n("b64b");var a=n("7a23"),o=n("2824");e["a"]={components:{BaseLayout:o["a"]},name:"Member",props:{selected:{type:[String,Object],default:function(){return null}}},emits:["update:selected"],setup:function(){for(var t=Object(a["C"])({member:[],group:[],gid:0,options:[],keyword:"",list:[],selected:[],edit:!1,del:!1,title:"",info:{}}),e=[],n=0;n<20;n++)e.push("#"+Math.random().toString(16).substr(3,6));return{state:t,colors:e}},created:function(){var e=this;this.state.member=[],this.state.list=[],this.state.selected=t.isEmpty(this.selected)?[]:this.selected.split(","),this.$http.get("/team/groupList").then((function(n){e.state.group=n,e.state.options=t.reduce(n,(function(t,e,n){return t.concat({text:e,value:n})}),[{text:"选择团队",value:0}])})),this.onChange()},watch:{selected:function(e,n){e!=n&&(this.state.selected=t.isEmpty(this.selected)?[]:this.selected.split(","))}},computed:{callee:function(){return null!=this.selected}},methods:{onChange:function(){var t=this;this.state.edit=!1,this.$http.post("/team/memberList?gid="+this.state.gid).then((function(e){t.state.member=e,t.onSearch()}))},onSearch:function(){var e=this;this.state.list=0==this.state.keyword.length?this.state.member:t.filter(this.state.member,(function(t){return t.truename.search(e.state.keyword)>-1||t.mobile.search(e.state.keyword)>-1}))},onSubmit:function(){this.$emit("update:selected",this.state.selected.join(",")),this.$emit("close",this.state.selected)},onCancel:function(){this.state.selected=t.isEmpty(this.selected)?[]:this.selected.split(","),this.$emit("close",null)},onChoose:function(e){this.callee?this.contains(e.uid)?t.pull(this.state.selected,e.uid):this.state.selected.push(e.uid):(this.state.del=!1,this.state.title="新增员工",this.state.info={},null!=e&&(this.state.del=!0,this.state.title="员工管理",this.state.info={id:e.id,name:e.truename,tel:e.mobile}),this.state.edit=!0)},onSave:function(t){this.$http.post("/team/memberSave?"+(t.id?"id="+t.id:"")+"&truename="+t.name+"&mobile="+t.tel).then(this.onChange)},onDelete:function(t){this.$http.post("/team/memberSave?id="+t.id+"&remove=1").then(this.onChange)},contains:function(e){return t.includes(this.state.selected,e)},getIndex:function(e){return t.indexOf(Object.keys(this.state.group),e)}}}}).call(this,n("81b0"))},"5a34":function(t,e,n){var a=n("44e7");t.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},"841c":function(t,e,n){"use strict";var a=n("d784"),o=n("825a"),i=n("1d80"),r=n("129f"),c=n("14c3");a("search",1,(function(t,e,n){return[function(e){var n=i(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,n):new RegExp(e)[t](String(n))},function(t){var a=n(e,t,this);if(a.done)return a.value;var i=o(t),s=String(this),l=i.lastIndex;r(l,0)||(i.lastIndex=0);var u=c(i,s);return r(i.lastIndex,l)||(i.lastIndex=l),null===u?-1:u.index}]}))},"99af":function(t,e,n){"use strict";var a=n("23e7"),o=n("d039"),i=n("e8b5"),r=n("861d"),c=n("7b0b"),s=n("50c4"),l=n("8418"),u=n("65f0"),d=n("1dde"),f=n("b622"),h=n("2d00"),b=f("isConcatSpreadable"),j=9007199254740991,p="Maximum allowed index exceeded",m=h>=51||!o((function(){var t=[];return t[b]=!1,t.concat()[0]!==t})),O=d("concat"),g=function(t){if(!r(t))return!1;var e=t[b];return void 0!==e?!!e:i(t)},v=!m||!O;a({target:"Array",proto:!0,forced:v},{concat:function(t){var e,n,a,o,i,r=c(this),d=u(r,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(i=-1===e?r:arguments[e],g(i)){if(o=s(i.length),f+o>j)throw TypeError(p);for(n=0;n<o;n++,f++)n in i&&l(d,f,i[n])}else{if(f>=j)throw TypeError(p);l(d,f++,i)}return d.length=f,d}})},a15b:function(t,e,n){"use strict";var a=n("23e7"),o=n("44ad"),i=n("fc6a"),r=n("a640"),c=[].join,s=o!=Object,l=r("join",",");a({target:"Array",proto:!0,forced:s||!l},{join:function(t){return c.call(i(this),void 0===t?",":t)}})},a313:function(t,e,n){},a4dc:function(t,e,n){"use strict";n.r(e);var a=n("7a23"),o=Object(a["S"])("data-v-a39d16ae");Object(a["B"])("data-v-a39d16ae");var i=Object(a["i"])("划拨积分"),r={class:"transfer"},c=Object(a["i"])("立即划拨");Object(a["z"])();var s=o((function(t,e,n,s,l,u){var d=Object(a["G"])("van-button"),f=Object(a["G"])("van-dropdown-item"),h=Object(a["G"])("van-datetime-picker"),b=Object(a["G"])("van-dropdown-menu"),j=Object(a["G"])("van-icon"),p=Object(a["G"])("van-cell"),m=Object(a["G"])("van-cell-group"),O=Object(a["G"])("van-empty"),g=Object(a["G"])("van-list"),v=Object(a["G"])("van-pull-refresh"),y=Object(a["G"])("van-field"),w=Object(a["G"])("van-action-sheet"),k=Object(a["G"])("member"),C=Object(a["G"])("BaseLayout");return Object(a["y"])(),Object(a["g"])(C,{title:"资金"},{extra:o((function(){return[Object(a["j"])(d,{icon:"cash-back-record",style:{width:"110px",borderRadius:"10px 0 0 10px",color:"#000"},color:"#F6F6F6",onClick:e[1]||(e[1]=function(t){s.state.popup=!0,s.state.account=""})},{default:o((function(){return[i]})),_:1})]})),default:o((function(){return[Object(a["j"])(b,null,{default:o((function(){return[Object(a["j"])(f,{modelValue:s.state.type,"onUpdate:modelValue":e[2]||(e[2]=function(t){return s.state.type=t}),options:s.state.option,onChange:u.onRefresh},null,8,["modelValue","options","onChange"]),Object(a["j"])(f,{ref:"choose",title:s.state.title,onClosed:u.onRefresh},{default:o((function(){return[Object(a["j"])(h,{modelValue:s.currentDate,"onUpdate:modelValue":e[3]||(e[3]=function(t){return s.currentDate=t}),type:"year-month",title:"选择年月","min-date":s.minDate,"max-date":s.maxDate,onCancel:s.onCancel,onConfirm:s.onConfirm},null,8,["modelValue","min-date","max-date","onCancel","onConfirm"])]})),_:1},8,["title","onClosed"])]})),_:1}),Object(a["j"])(v,{modelValue:s.state.refreshing,"onUpdate:modelValue":e[5]||(e[5]=function(t){return s.state.refreshing=t}),onRefresh:u.onRefresh},{default:o((function(){return[Object(a["j"])(g,{class:"list",loading:s.state.loading,"onUpdate:loading":e[4]||(e[4]=function(t){return s.state.loading=t}),finished:s.state.finished,"loading-text":"正在请求数据 ...","finished-text":"没有更多了","immediate-check":!1,onLoad:u.onLoad},{default:o((function(){return[(Object(a["y"])(!0),Object(a["g"])(a["a"],null,Object(a["E"])(s.state.list,(function(e,n){return Object(a["y"])(),Object(a["g"])(m,{class:"item",key:n,border:!1},{default:o((function(){return[Object(a["j"])(j,{class:"icon",name:e.icon,color:e.color},null,8,["name","color"]),Object(a["j"])(p,{class:"line1",border:!1},{title:o((function(){return[Object(a["j"])("div",{class:"van-multi-ellipsis--l2",onClick:function(n){return t.$copy(e.remark)}},Object(a["K"])(e.remark),9,["onClick"])]})),value:o((function(){return[Object(a["j"])("span",{style:{color:e.color}},Object(a["K"])(e.amount),5)]})),_:2},1024),Object(a["j"])(p,{class:"line2",title:e.dt,value:"余额 "+e.subtotal,border:!1},null,8,["title","value"])]})),_:2},1024)})),128)),Object(a["Q"])(Object(a["j"])(O,{style:{width:"100%"}},null,512),[[a["N"],0==s.state.list.length]])]})),_:1},8,["loading","finished","onLoad"])]})),_:1},8,["modelValue","onRefresh"]),Object(a["j"])(w,{show:s.state.popup,"onUpdate:show":e[10]||(e[10]=function(t){return s.state.popup=t}),title:"划拨积分"},{default:o((function(){return[Object(a["j"])("div",r,[Object(a["j"])(y,{type:"number",border:!0,modelValue:s.state.amount,"onUpdate:modelValue":e[6]||(e[6]=function(t){return s.state.amount=t}),"input-align":"right",clearable:"",label:"数量",placeholder:"要划拨的积分数量"},null,8,["modelValue"]),Object(a["j"])(y,{type:"textarea",border:!0,modelValue:s.state.account,"onUpdate:modelValue":e[7]||(e[7]=function(t){return s.state.account=t}),"input-align":"right",clearable:"",label:"账号",placeholder:"请点击选择员工",readonly:"",onClick:e[8]||(e[8]=function(t){return s.state.showMember=!0})},null,8,["modelValue"]),Object(a["j"])(y,{type:"textarea",border:!1,modelValue:s.state.remark,"onUpdate:modelValue":e[9]||(e[9]=function(t){return s.state.remark=t}),"input-align":"right",clearable:"",label:"备注",placeholder:"可以不填"},null,8,["modelValue"]),Object(a["j"])(d,{round:"",block:"",type:"primary",style:{margin:"10px 0"},onClick:u.onTransfer},{default:o((function(){return[c]})),_:1},8,["onClick"])])]})),_:1},8,["show"]),Object(a["j"])(w,{show:s.state.showMember,"onUpdate:show":e[13]||(e[13]=function(t){return s.state.showMember=t}),title:"请点击选择员工",style:{height:"100%",maxHeight:"100%",background:"#F6F6F6"},round:!1,closeable:!1},{default:o((function(){return[Object(a["j"])(k,{selected:s.state.account,"onUpdate:selected":e[11]||(e[11]=function(t){return s.state.account=t}),onClose:e[12]||(e[12]=function(t){return s.state.showMember=!1})},null,8,["selected"])]})),_:1},8,["show"])]})),_:1})})),l=n("5530"),u=n("2824"),d=n("0ac3"),f={components:{BaseLayout:u["a"],Member:d["default"]},setup:function(){var t=Object(a["D"])(null),e=Object(a["D"])(new Date),n=Object(a["C"])({refreshing:!1,loading:!1,finished:!1,option:[{text:"全部类型",value:0},{text:"充值",value:1},{text:"积分变动",value:2}],type:0,title:"选择年月",ts:0,list:[],offset:0,limit:20,popup:!1,group:0,account:"",amount:0,remark:"福利",showMember:!1}),o=function(){n.title="选择年月",n.ts=0,t.value.toggle()},i=function(e){n.title=new Date(e).getFullYear()+"年 "+(new Date(e).getMonth()+1)+" 月",n.ts=new Date(e).getTime()/1e3,t.value.toggle()};return{choose:t,currentDate:e,minDate:new Date(2020,0,1),maxDate:new Date(2030,11,31),state:n,onCancel:o,onConfirm:i}},created:function(){this.onRefresh()},methods:{onRefresh:function(){this.state.popup=!1,this.state.loading=!0,this.state.finished=!1,this.state.offset=0,this.state.list=[],this.onLoad()},onLoad:function(){var t=this;this.$http.get("/team/propertyDetail?type="+this.state.type+"&ts="+this.state.ts+"&offset="+this.state.offset+"&limit="+this.state.limit).then((function(e){for(var n in t.state.refreshing=!1,(0==e.length||e.length<t.state.limit)&&(t.state.finished=!0),t.state.loading=!1,t.state.offset+=e.length,e){var a=e[n];t.state.list.push(Object(l["a"])(Object(l["a"])({},a),{amount:a.cash>0?a.cash:a.point,icon:a.cash>0?"cash-on-deliver":"cash-back-record",color:a.cash>0||a.point>0?"#090":"#C00"}))}}))},onTransfer:function(){this.state.amount>0&&this.$http.post("/team/propertyGrant?u="+this.state.account+"&amount="+this.state.amount+"&remark="+this.state.remark).then(this.onRefresh)}}},h=(n("5685"),n("6b0d")),b=n.n(h);const j=b()(f,[["render",s],["__scopeId","data-v-a39d16ae"]]);e["default"]=j},ab13:function(t,e,n){var a=n("b622"),o=a("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[o]=!1,"/./"[t](e)}catch(a){}}return!1}},caad:function(t,e,n){"use strict";var a=n("23e7"),o=n("4d64").includes,i=n("44d2");a({target:"Array",proto:!0},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},d58f:function(t,e,n){var a=n("1c0b"),o=n("7b0b"),i=n("44ad"),r=n("50c4"),c=function(t){return function(e,n,c,s){a(n);var l=o(e),u=i(l),d=r(l.length),f=t?d-1:0,h=t?-1:1;if(c<2)while(1){if(f in u){s=u[f],f+=h;break}if(f+=h,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=h)f in u&&(s=n(s,u[f],f,l));return s}};t.exports={left:c(!1),right:c(!0)}}}]);