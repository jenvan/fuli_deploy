{"version":3,"sources":["webpack:///./src/views/My/Profile.vue?64d9","webpack:///./src/views/My/Profile.vue","webpack:///./src/views/My/Profile.vue?537f"],"names":["class","title","state","item","key","label","name","value","clickable","input-align","right-icon","icon","change","profile","login_dt","border","login_ip","block","type","to","components","BaseLayout","data","mobile","username","password","nickname","created","this","$init","reset","computed","methods","field","api","params","what","test","$http","post","then","catch","render","__scopeId"],"mappings":"uIAAA,W,gJCGSA,MAAM,Q,iBAIoD,Q,qMANjE,eASa,GATDC,MAAM,QAAM,C,WAEtB,iBAKM,CALN,eAKM,MALN,EAKM,E,mBAJJ,eAAkO,2BAAlM,EAAAC,OAAK,SAAlBC,EAAKC,G,wBAAxB,eAAkO,GAA1LA,IAAKA,EAAMC,MAAOF,EAAKG,K,WAAe,EAAAJ,MAAME,GAAKG,M,yCAAX,EAAAL,MAAME,GAAKG,MAAK,GAAEC,UAAA,GAAUC,cAAY,QAASC,aAAY,EAAAR,MAAME,GAAKO,KAAO,aAAW,mBAAE,EAAAT,MAAME,GAAKO,KAAI,QAAU,OAAI,mBAAE,EAAAC,OAAOR,K,mGAChN,eAAoD,GAA1CH,MAAM,SAAUM,MAAO,EAAAM,QAAQC,U,kBACzC,eAAoE,GAA1Db,MAAM,SAAUc,QAAQ,EAAQR,MAAO,EAAAM,QAAQG,U,kBACzD,eAA8E,GAAlEC,MAAA,GAAMjB,MAAM,SAASkB,KAAK,UAAUC,GAAG,W,YAAU,iBAAI,C,+DAuBxD,GACbC,WAAY,CAACC,aAAA,MAEbC,KAHa,WAIX,IAAMpB,EAAQ,eAAS,CACrBqB,OAAQ,CACNjB,KAAM,MACNK,KAAM,QACNJ,MAAO,IAETiB,SAAU,CACRlB,KAAM,MACNK,KAAM,QACNJ,MAAO,IAETkB,SAAU,CACRnB,KAAM,KACNK,KAAM,QACNJ,MAAO,IAETmB,SAAU,CACRpB,KAAM,KACNK,KAAM,QACNJ,MAAO,MAGX,MAAO,CAACL,UAGVyB,QA7Ba,WA8BXC,KAAKC,MAAMD,KAAKE,QAGlBC,SAAU,iCACL,eAAS,CAAC,aACV,eAAW,CAAC,aAAc,MAAO,SAAU,cAGhDC,QAAS,CACPF,MADO,WAELF,KAAK1B,MAAMqB,OAAOhB,MAAQqB,KAAKL,OAC/BK,KAAK1B,MAAMsB,SAASjB,MAAQqB,KAAKf,QAAQW,SACzCI,KAAK1B,MAAMwB,SAASnB,MAAQqB,KAAKF,SACjCE,KAAK1B,MAAMuB,SAASlB,MAAQ,UAE9BK,OAPO,SAOAqB,GAAO,WAEZ,GADAL,KAAK1B,MAAM+B,GAAOtB,KAAO,SACZ,UAATsB,GAAuBL,KAAK1B,MAAMqB,OAAOhB,OAASqB,KAAKL,UAC9C,YAATU,GAAuBL,KAAK1B,MAAMsB,SAASjB,OAASqB,KAAKf,QAAQW,YACxD,YAATS,GAAuBL,KAAK1B,MAAMwB,SAASnB,OAASqB,KAAKF,YAChD,YAATO,GAAoD,UAA7BL,KAAK1B,MAAMuB,SAASlB,OAA/C,CAEA,IAAI2B,EAAM,eACNC,EAAS,CAACC,KAAMH,EAAO1B,MAAOqB,KAAK1B,MAAM+B,GAAO1B,OAC/C,6BAA6B8B,KAAKJ,KACrCC,EAAM,eACNC,EAAOF,GAASL,KAAK1B,MAAM+B,GAAO1B,OAEpCqB,KAAKU,MAAMC,KAAKL,EAAKC,GAAQK,MAAK,WAChC,EAAKX,MAAM,EAAKC,UACfW,OAAM,WACP,EAAKX,QACL,EAAK5B,MAAM+B,GAAOtB,KAAO,c,UCvFjC,EAAO+B,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"asset/js/chunk-0b901c3e.24975d7a.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Profile.vue?vue&type=style&index=0&id=49b8e950&scoped=true&lang=css\"","<template>\n  <BaseLayout title=\"我的资料\">\n    \n    <div class=\"info\">\n      <van-field v-for=\"(item,key) in state\" :key=\"key\" :label=\"item.name\" v-model=\"state[key].value\" clickable input-align=\"right\" :right-icon=\"state[key].icon\" @click-input=\"state[key].icon='edit'\" @blur=\"change(key)\"></van-field>\n      <van-cell title=\"最近登录时间\" :value=\"profile.login_dt\"/>\n      <van-cell title=\"最近登录地址\" :border=\"false\" :value=\"profile.login_ip\"/>\n      <van-button block class=\"logout\" type=\"primary\" to=\"/logout\">退出登录</van-button>\n    </div>\n\n  </BaseLayout>\n</template>\n\n<style scoped>\n.info {\n  margin: 10px;\n  height: 100px;\n  background: #F3F3F3;\n  border-radius: 5px;\n}\n.logout {\n  margin:20px 0;\n}\n</style>\n\n<script>\nimport {reactive} from 'vue'\nimport {mapState, mapGetters, mapMutations} from 'vuex'\nimport BaseLayout from '@/components/BaseLayout.vue'\n\nexport default {\n  components: {BaseLayout},\n\n  data() {\n    const state = reactive({\n      mobile: {\n        name: \"手机号\",\n        icon: \"arrow\",\n        value: \"\",\n      },\n      username: {\n        name: \"用户名\",\n        icon: \"arrow\",\n        value: \"\",\n      },\n      password: {\n        name: \"密码\",\n        icon: \"arrow\",\n        value: \"\",\n      },\n      nickname: {\n        name: \"昵称\",\n        icon: \"arrow\",\n        value: \"\",\n      },\n    });\n    return {state};\n  },\n\n  created() {\n    this.$init(this.reset);\n  },\n\n  computed: {\n    ...mapState([\"profile\"]),\n    ...mapGetters([\"authorized\", \"uid\", \"mobile\", \"nickname\"]),\n  },\n\n  methods: {\n    reset() {\n      this.state.mobile.value = this.mobile;\n      this.state.username.value = this.profile.username;\n      this.state.nickname.value = this.nickname;\n      this.state.password.value = \"******\";\n    },\n    change(field) {\n      this.state[field].icon = \"arrow\";\n      if (field == \"mobile\"   && this.state.mobile.value == this.mobile) return;\n      if (field == \"username\" && this.state.username.value == this.profile.username) return;\n      if (field == \"nickname\" && this.state.nickname.value == this.nickname) return;\n      if (field == \"password\" && this.state.password.value == \"******\") return;\n\n      let api = \"/user/change\";\n      let params = {what: field, value: this.state[field].value};\n      if (!/(mobile|username|password)/.test(field)){\n        api = \"/user/modify\";\n        params[field] = this.state[field].value;\n      }\n      this.$http.post(api, params).then(() => {\n        this.$init(this.reset);\n      }).catch(() => {\n        this.reset();\n        this.state[field].icon = \"edit\";\n      });\n    },\n  }\n}\n</script>\n","import { render } from \"./Profile.vue?vue&type=template&id=49b8e950&scoped=true\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\n\nimport \"./Profile.vue?vue&type=style&index=0&id=49b8e950&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-49b8e950\"\n\nexport default script"],"sourceRoot":""}