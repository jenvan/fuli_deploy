(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4de25a44"],{"0b05":function(t,e,a){"use strict";a.r(e);a("b0c0"),a("b64b"),a("ac1f"),a("5319");var i=a("7a23"),n=Object(i["X"])("data-v-dbfac090");Object(i["D"])("data-v-dbfac090");var c={class:"box"},s={class:"nav"},o={key:0,class:"head"},u={class:"name1"},l={key:1},b={class:"name2"},d={class:"tab"},h={key:0,class:"panel"},r=Object(i["k"])("div",{class:"title"},"项目",-1),p={class:"chooser"},O=Object(i["k"])("div",{class:"title"},"价格",-1),j={class:"chooser"},f={class:"item"},k={class:"sale"},v={class:"face"},y={class:"title"};Object(i["B"])();var g=n((function(t,e,a,g,m,C){var w=Object(i["I"])("van-icon"),I=Object(i["I"])("van-image"),A=Object(i["I"])("van-tab"),M=Object(i["I"])("van-tabs"),S=Object(i["I"])("van-empty"),U=Object(i["I"])("van-field"),$=Object(i["I"])("van-stepper"),_=Object(i["I"])("van-cell"),x=Object(i["I"])("van-action-bar-icon"),L=Object(i["I"])("van-action-bar-button"),q=Object(i["I"])("van-action-bar"),D=Object(i["I"])("van-popup"),Q=Object(i["I"])("pay"),T=Object(i["I"])("BaseLayout");return Object(i["A"])(),Object(i["g"])(T,{title:m.state.title,height:"0"},{default:n((function(){return[Object(i["k"])("div",c,[Object(i["k"])("div",s,["coupon"!=a.action?(Object(i["A"])(),Object(i["g"])("div",o,[Object(i["k"])(w,{class:"icon",name:m.state.topCat.icon||"vip-card",size:"36"},null,8,["name"]),Object(i["k"])("div",u,Object(i["M"])(m.state.topCat.name),1)])):Object(i["U"])((Object(i["A"])(),Object(i["g"])("div",l,[Object(i["k"])(I,{src:m.state.topCat.icon},null,8,["src"]),Object(i["k"])("div",b,Object(i["M"])(m.state.topCat.name),1)],512)),[[i["Q"],!m.state.subCat||0==Object.keys(m.state.subCat).length]]),m.state.subCat&&Object.keys(m.state.subCat).length>0?(Object(i["A"])(),Object(i["g"])(M,{key:2,class:["tabs",a.action],active:m.state.active,"onUpdate:active":e[1]||(e[1]=function(t){return m.state.active=t}),"swipe-threshold":3,animated:"",swipeable:"",onChange:C.handleChange},{default:n((function(){return[(Object(i["A"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(m.state.subCat,(function(t,e){return Object(i["A"])(),Object(i["g"])(A,{key:e,name:t.id},{title:n((function(){return[Object(i["k"])("div",d,[Object(i["k"])(w,{name:t.icon,size:"36"},null,8,["name"]),Object(i["j"])(Object(i["M"])(t.name),1)])]})),_:2},1032,["name"])})),128))]})),_:1},8,["class","active","onChange"])):Object(i["h"])("",!0)]),Object.keys(m.state.spu).length>0?(Object(i["A"])(),Object(i["g"])("div",h,[r,Object(i["k"])("div",p,[(Object(i["A"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(m.state.spu,(function(t,e){return Object(i["A"])(),Object(i["g"])("div",{class:["spu",{active:m.state.id==t.id}],key:e,onClick:function(e){return C.handleChoose(t)}},Object(i["M"])(t.title),11,["onClick"])})),128))]),O,Object(i["k"])("div",j,[(Object(i["A"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(m.state.sku,(function(t,e){return Object(i["U"])((Object(i["A"])(),Object(i["g"])("div",{class:["sku",{more:Object.keys(m.state.sku).length>3,active:m.state.api==e}],key:e,onClick:function(t){return m.state.api=e}},[Object(i["k"])("div",f,Object(i["M"])(t.name),1),Object(i["k"])("div",k,"￥"+Object(i["M"])(t.sale_price),1),Object(i["k"])("div",v,"官方价：￥"+Object(i["M"])(t.face_price.replace(".00","")),1)],10,["onClick"])),[[i["Q"],t.stock>0]])})),128))]),Object(i["U"])(Object(i["k"])("div",y,"描述",512),[[i["Q"],m.state.intro]]),Object(i["U"])(Object(i["k"])("div",{class:"intro",innerHTML:t.$safeHTML(m.state.intro)},null,8,["innerHTML"]),[[i["Q"],m.state.intro]])])):(Object(i["A"])(),Object(i["g"])(S,{key:1,description:"暂无项目"}))]),Object(i["k"])(q,{class:"bar"},{default:n((function(){return[Object(i["U"])(Object(i["k"])(U,{class:"param",modelValue:m.state.account,"onUpdate:modelValue":e[2]||(e[2]=function(t){return m.state.account=t}),type:"text",placeholder:"充值账号"},null,8,["modelValue"]),[[i["Q"],0==m.state.type&&m.state.api.length>0]]),Object(i["U"])(Object(i["k"])(_,{class:"param",title:"购买数量"},{value:n((function(){return[Object(i["k"])($,{modelValue:m.state.entity,"onUpdate:modelValue":e[3]||(e[3]=function(t){return m.state.entity=t}),theme:"round","input-width":"42","button-size":"24","disable-input":!1,min:"1",max:"100",integer:""},null,8,["modelValue"])]})),_:1},512),[[i["Q"],1==m.state.type&&m.state.api.length>0]]),Object(i["k"])(x,{icon:"chat-o",text:"客服",onClick:e[4]||(e[4]=function(t){return m.state.popup=!0})}),Object(i["k"])(x,{icon:"cash-on-deliver",text:"订单",onClick:e[5]||(e[5]=function(e){return t.$router.push("/digital/order")})}),Object(i["k"])(L,{type:"danger",text:"立即购买",onClick:C.handleSubmit},null,8,["onClick"])]})),_:1}),Object(i["k"])(D,{show:m.state.popup,"onUpdate:show":e[6]||(e[6]=function(t){return m.state.popup=t}),position:"top",style:{height:"50%",padding:"20px"}},{default:n((function(){return[Object(i["k"])("div",{class:"contact",innerHTML:t.config.contact},null,8,["innerHTML"])]})),_:1},8,["show"]),Object(i["k"])(Q,Object(i["r"])(m.state.payData,{show:m.state.payShow,"onUpdate:show":e[7]||(e[7]=function(t){return m.state.payShow=t}),onOnFinish:C.handlePay}),null,16,["show","onOnFinish"])]})),_:1},8,["title"])})),m=a("5530"),C=(a("a9e3"),a("5502")),w=a("2824"),I=a("a6e6"),A={components:{BaseLayout:w["a"],Pay:I["default"]},name:"DigitalDetail",props:{action:{type:String,default:"member"},cid:{type:[String,Number],default:0},id:{type:[String,Number],default:0}},data:function(){var t=Object(i["E"])({topCat:{},subCat:{},active:0,list:{},spu:{},sku:{},item:{},type:0,title:"",intro:"",id:0,api:0,account:"",quantity:1,payData:{},payShow:!1,popup:!1});return{state:t}},created:function(){var t=this;this.$http.get("/digital/category?type="+this.action+"&deep=0").then((function(e){t.state.title=e[0].name})),this.$http.post("/digital/category?id="+parseInt(this.cid)+"&deep=2").then((function(e){t.state.topCat=e[0],t.state.subCat=e[0]["children"],t.init()}))},computed:Object(m["a"])(Object(m["a"])({},Object(C["d"])(["config","profile"])),Object(C["b"])(["uid"])),watch:{$route:function(t,e){t.path==e.path&&t.query==e.query||setTimeout(this.init,100)}},methods:{init:function(){var t=this,e=/(\d+)[^\d](\d+)/.exec(this.cid);this.$http.post("/digital/list?cid="+(e?e[1]:this.cid)).then((function(a){t.state.list=a,t.state.active=e?e[2]:Object.keys(a).shift(),t.handleChange()}))},handleChange:function(){this.state.spu=this.state.list[this.state.active]||{},this.state.id=this.id||Object.keys(this.state.spu).shift(),this.handleChoose(this.state.spu[this.state.id]||null)},handleChoose:function(t){t&&"undefined"!=typeof t.id&&(this.state.item=t,this.state.id=t.id,this.state.type=t.type,this.state.intro=t.intro,this.state.api="",this.state.sku=JSON.parse(t.spec))},handleSubmit:function(){var t=this;return this.state.id<=0||this.state.api.length<=0?this.$toast("请选择项目及价格"):0==this.state.type&&this.state.account.length<5?this.$toast("请填写充值账号"):(0==this.state.type&&(this.state.quantity=1),1==this.state.type&&(this.state.account=""),void this.$http.post("/digital/checkout?id="+this.state.id+"&api="+this.state.api+"&account="+this.state.account+"&quantity="+this.state.quantity).then((function(e){t.state.payData=Object(m["a"])(Object(m["a"])({},e),{},{json:JSON.stringify(e)}),t.state.payShow=!0})))},handlePay:function(t){this.state.payShow=!1,t&&this.$dialog.alert({title:"订单已生成",message:"请点击下方“订单记录”查看到账情况",theme:"round-button"})}}},M=(a("9ec7"),a("6b0d")),S=a.n(M);const U=S()(A,[["render",g],["__scopeId","data-v-dbfac090"]]);e["default"]=U},"7d27":function(t,e,a){},"9ec7":function(t,e,a){"use strict";a("7d27")}}]);