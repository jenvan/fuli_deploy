(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7747efa2"],{"374e":function(t,e,n){"use strict";(function(t){var o=n("5530"),c=n("53ca"),a=(n("a9e3"),n("4de4"),n("b0c0"),n("ac1f"),n("5319"),n("a15b"),n("7a23")),i=n("5502"),r=n("2824"),s=n("a6e6");e["a"]={components:{BaseLayout:r["a"],Pay:s["default"]},props:{filter:{type:[String,Number],default:""}},data:function(){var t=Object(a["E"])({refreshing:!1,loading:!1,finished:!1,keyword:"",list:[],offset:0,limit:20,popup:!1,detail:{},cards:{},picker:!1,payData:{},payShow:!1}),e=[{name:"新订单",icon:"warning",color:"#F00"},{name:"等待付款",icon:"warning",color:"#C60"},{name:"等待使用",icon:"qr",color:"#00C"},{name:"订单关闭",icon:"clear",color:"#CCC"},{name:"订单完成",icon:"checked",color:"#0C0"}],n={linkMan:"联系人",linkPhone:"手机号码",linkEmail:"邮箱地址",linkCreditNo:"身份证号",linkAddress:"邮寄地址"};return{state:t,status:e,fields:n}},created:function(){this.onRefresh()},computed:{btn:function(){return"object"==Object(c["a"])(this.status[this.filter])?this.status[this.filter]["name"]:"所有订单"}},methods:Object(o["a"])({onRefresh:function(){this.state.loading=!0,this.state.finished=!1,this.state.offset=0,this.state.list=[],this.onLoad()},onLoad:function(){var t=this;this.$http.get("/jcmall/orderList?filter="+this.filter+"&keyword="+this.state.keyword+"&offset="+this.state.offset+"&limit="+this.state.limit).then((function(e){for(var n in t.state.refreshing=!1,(0==e.length||e.length<t.state.limit)&&(t.state.finished=!0),t.state.loading=!1,t.state.offset+=e.length,e){var o=e[n];t.state.list.push(o)}}))},onChange:function(t,e){this.state.picker=!1,"undefined"==typeof e&&(e=""),this.$router.replace("order?filter="+e),setTimeout(this.onRefresh,100)},onPay:function(t){var e=this;this.state.payData={},this.state.payShow=!1,this.$http.post("/jcmall/checkout?id="+t.productNo,{oid:t.orderId}).then((function(t){e.state.payData=Object(o["a"])(Object(o["a"])({},t),{},{json:JSON.stringify(t)}),e.state.payShow=!0}))},onCancel:function(t){this.$http.post("/jcmall/orderOpt?type=cancelOrder&orderId="+t.orderId).then(this.onRefresh)},onView:function(e){var n=this;this.$http.post("/jcmall/orderOpt?type=orderDetail&orderId="+e.orderId).then((function(e){if("object"!=Object(c["a"])(e)||"object"!=Object(c["a"])(e["codeUrls"]))return n.$toast("订单详情失败，请联系客服处理！");for(var o in t.isPlainObject(e["codeUrls"]["codeUrl"])&&(e["codeUrls"]["codeUrl"]=[e["codeUrls"]["codeUrl"]]),e["codeUrls"]["codeUrl"])e["codeUrls"]["codeUrl"][o]["color"]="rgb("+t.random(220,250)+","+t.random(220,250)+","+t.random(220,250)+")";e["sendContent"]=t.filter([e["sendContent1"],e["sendContent2"],e["sendContent3"]],(function(e){return!t.isEmpty(e)})).join("<br>"),n.state.detail=e,n.state.cards=e["codeUrls"]["codeUrl"],n.state.popup=!0}))},getStatus:function(t){return this.status[t.orderState]}},Object(i["c"])(["auth"]))}}).call(this,n("81b0"))},7636:function(t,e,n){"use strict";n("a562")},a15b:function(t,e,n){"use strict";var o=n("23e7"),c=n("44ad"),a=n("fc6a"),i=n("a640"),r=[].join,s=c!=Object,l=i("join",",");o({target:"Array",proto:!0,forced:s||!l},{join:function(t){return r.call(a(this),void 0===t?",":t)}})},a562:function(t,e,n){},e2c9:function(t,e,n){"use strict";n.r(e);n("b0c0"),n("d3b7"),n("25f0"),n("b64b");var o=n("7a23"),c=Object(o["X"])("data-v-192196f4");Object(o["D"])("data-v-192196f4");var a={class:"item"},i=Object(o["j"])("  "),r={class:"detail"},s={class:"amount"},l={class:"action"},u=Object(o["j"])("立即付款"),d=Object(o["j"])("关闭订单"),f=Object(o["j"])(" 查看详情"),b={class:"popup"},j={key:1,class:"text"},O=Object(o["j"])(" 点我复制"),h={class:"indicator"};Object(o["B"])();var p=c((function(t,e,n,p,k,m){var y=Object(o["I"])("van-icon"),g=Object(o["I"])("van-search"),v=Object(o["I"])("van-sticky"),C=Object(o["I"])("van-tag"),w=Object(o["I"])("van-cell"),U=Object(o["I"])("van-button"),I=Object(o["I"])("van-empty"),_=Object(o["I"])("van-list"),S=Object(o["I"])("van-pull-refresh"),M=Object(o["I"])("van-swipe-item"),A=Object(o["I"])("van-swipe"),L=Object(o["I"])("van-action-sheet"),R=Object(o["I"])("van-picker"),$=Object(o["I"])("van-popup"),x=Object(o["I"])("pay"),V=Object(o["I"])("BaseLayout");return Object(o["A"])(),Object(o["g"])(V,{title:"荟玩订单",navbar:"show",height:"0"},{default:c((function(){return[Object(o["k"])(v,{"offset-top":45},{default:c((function(){return[Object(o["k"])(g,{modelValue:k.state.keyword,"onUpdate:modelValue":e[2]||(e[2]=function(t){return k.state.keyword=t}),placeholder:"搜索订单",background:"#EEE",clearable:"",onSearch:m.onRefresh,onClear:m.onRefresh},{left:c((function(){return[Object(o["k"])(y,{class:"select",name:"arrow-down",onClick:e[1]||(e[1]=function(t){return k.state.picker=!0})},{default:c((function(){return[Object(o["j"])("  "+Object(o["M"])(m.btn),1)]})),_:1})]})),_:1},8,["modelValue","onSearch","onClear"])]})),_:1}),Object(o["k"])(S,{modelValue:k.state.refreshing,"onUpdate:modelValue":e[4]||(e[4]=function(t){return k.state.refreshing=t}),onRefresh:m.onRefresh},{default:c((function(){return[Object(o["k"])(_,{class:"list",loading:k.state.loading,"onUpdate:loading":e[3]||(e[3]=function(t){return k.state.loading=t}),finished:k.state.finished,"loading-text":"正在请求数据 ...","finished-text":"-- 没有了 --","immediate-check":!1,onLoad:m.onLoad},{default:c((function(){return[(Object(o["A"])(!0),Object(o["g"])(o["a"],null,Object(o["G"])(k.state.list,(function(e,n){return Object(o["A"])(),Object(o["g"])("div",{key:n},[Object(o["k"])(C,{class:"dt"},{default:c((function(){return[Object(o["j"])(Object(o["M"])(e.orderDate),1)]})),_:2},1024),Object(o["k"])("div",a,[Object(o["k"])(w,{title:"#"+e.orderId,onClick:function(n){return t.$copy(e.orderId)}},{extra:c((function(){return[Object(o["k"])(y,{class:"status",name:m.getStatus(e).icon,color:m.getStatus(e).color},{default:c((function(){return[Object(o["j"])(" "+Object(o["M"])(m.getStatus(e).name),1)]})),_:2},1032,["name","color"])]})),_:2},1032,["title","onClick"]),Object(o["k"])(w,{title:e.productName,onClick:function(n){return t.$router.push("item?id="+e.productNo)}},{extra:c((function(){return[i,Object(o["k"])("b",null,"x "+Object(o["M"])(e.num),1)]})),_:2},1032,["title","onClick"]),Object(o["k"])("div",r,[Object(o["k"])("span",s,"￥ "+Object(o["M"])(e.orderMoney),1),Object(o["U"])(Object(o["k"])("span",l,[Object(o["k"])(U,{type:"success",size:"mini",plain:"",onClick:function(t){return m.onPay(e)}},{default:c((function(){return[u]})),_:2},1032,["onClick"]),Object(o["k"])(U,{type:"danger",size:"mini",plain:"",onClick:function(t){return m.onCancel(e)}},{default:c((function(){return[d]})),_:2},1032,["onClick"])],512),[[o["Q"],1==e.orderState]]),Object(o["U"])(Object(o["k"])("span",{class:"view",onClick:function(t){return m.onView(e)}},[Object(o["k"])(y,{name:k.state.popup?"eye-o":"closed-eye"},{default:c((function(){return[f]})),_:1},8,["name"])],8,["onClick"]),[[o["Q"],/(2|4)/.test(e.orderState)]])])])])})),128)),Object(o["U"])(Object(o["k"])(I,{style:{width:"100%"}},null,512),[[o["Q"],0==k.state.list.length]])]})),_:1},8,["loading","finished","onLoad"])]})),_:1},8,["modelValue","onRefresh"]),Object(o["k"])(L,{show:k.state.popup,"onUpdate:show":e[6]||(e[6]=function(t){return k.state.popup=t}),title:"订单详情"},{default:c((function(){return[Object(o["k"])("div",b,[(Object(o["A"])(!0),Object(o["g"])(o["a"],null,Object(o["G"])(k.fields,(function(t,e){return Object(o["U"])((Object(o["A"])(),Object(o["g"])(w,{key:e,title:t,value:k.state.detail[e].toString()},null,8,["title","value"])),[[o["Q"],k.state.detail[e]&&k.state.detail[e].length>0]])})),128)),Object(o["k"])(w,{title:"订购 / 验证数量",value:k.state.detail.num+" / "+k.state.detail.finishNum},null,8,["value"]),Object(o["k"])(A,{class:"swipe"},{indicator:c((function(t){var e=t.active;return[Object(o["k"])("div",h,Object(o["M"])(e+1)+" / "+Object(o["M"])(Object.keys(k.state.cards).length),1)]})),default:c((function(){return[(Object(o["A"])(!0),Object(o["g"])(o["a"],null,Object(o["G"])(k.state.cards,(function(e,n){return Object(o["A"])(),Object(o["g"])(M,{class:"card",key:n,style:{borderColor:e.color}},{default:c((function(){return[1==e.codeType?(Object(o["A"])(),Object(o["g"])(y,{key:0,class:"icon",name:e.codeUrl},null,8,["name"])):(Object(o["A"])(),Object(o["g"])("div",j,[Object(o["k"])("div",{class:0==e.codeType?"code":"link"},Object(o["M"])(e.codeUrl),3),Object(o["k"])(y,{class:"tool",name:"more-o",onClick:function(n){return t.$copy(e.codeUrl)}},{default:c((function(){return[O]})),_:2},1032,["onClick"])]))]})),_:2},1032,["style"])})),128))]})),_:1}),Object(o["k"])("div",{class:"notice",innerHTML:k.state.detail.sendContent,onClick:e[5]||(e[5]=function(e){return t.$copy(k.state.detail.sendContent)})},null,8,["innerHTML"])])]})),_:1},8,["show"]),Object(o["k"])($,{show:k.state.picker,"onUpdate:show":e[8]||(e[8]=function(t){return k.state.picker=t}),round:"",position:"bottom"},{default:c((function(){return[Object(o["k"])(R,{columns:k.status,"columns-field-names":{text:"name"},"cancel-button-text":"查看所有订单",onCancel:e[7]||(e[7]=function(t){return m.onChange(null)}),onConfirm:m.onChange},null,8,["columns","onConfirm"])]})),_:1},8,["show"]),Object(o["k"])(x,Object(o["r"])(k.state.payData,{show:k.state.payShow,"onUpdate:show":e[9]||(e[9]=function(t){return k.state.payShow=t}),onOnFinish:m.onRefresh}),null,16,["show","onOnFinish"])]})),_:1})})),k=n("374e"),m=(n("7636"),n("d959")),y=n.n(m);const g=y()(k["a"],[["render",p],["__scopeId","data-v-192196f4"]]);e["default"]=g}}]);