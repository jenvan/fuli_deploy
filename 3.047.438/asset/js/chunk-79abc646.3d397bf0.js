(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79abc646"],{"0866":function(t,e,a){},"13d5":function(t,e,a){"use strict";var n=a("23e7"),r=a("d58f").left,i=a("a640"),c=a("2d00"),s=a("605d"),u=i("reduce"),o=!s&&c>79&&c<83;n({target:"Array",proto:!0,forced:!u||o},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},a36a:function(t,e,a){"use strict";a.r(e);a("b0c0");var n=a("7a23"),r=Object(n["X"])("data-v-7344e01e");Object(n["D"])("data-v-7344e01e");var i={class:"main"};Object(n["B"])();var c=r((function(t,e,a,c,s,u){var o=Object(n["I"])("van-cell"),d=Object(n["I"])("van-card"),l=Object(n["I"])("van-cell-group"),h=Object(n["I"])("van-submit-bar"),b=Object(n["I"])("pay"),f=Object(n["I"])("BaseLayout");return Object(n["A"])(),Object(n["g"])(f,{title:"确认订单"},{default:r((function(){return[Object(n["k"])("div",i,[s.state.addr&&s.state.addr.name?(Object(n["A"])(),Object(n["g"])(o,{key:0,class:"card",size:"large",icon:"location",title:s.state.addr.name+" "+s.state.addr.mobile,label:s.state.addr.province+s.state.addr.city+s.state.addr.county+s.state.addr.address,to:"/my/address/change?target="+u.target,"is-link":"",center:""},null,8,["title","label","to"])):(Object(n["A"])(),Object(n["g"])(o,{key:1,class:"card",size:"large",title:"新增收货地址",to:"/my/address/add?target="+u.target,"is-link":""},null,8,["to"])),(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["G"])(s.state.list,(function(t,e){return Object(n["A"])(),Object(n["g"])(d,{class:"item",key:e,title:t.title,desc:t.spec,thumb:t.image,price:t.price,num:t.num},null,8,["title","desc","thumb","price","num"])})),128)),Object(n["k"])(l,{class:"fee"},{default:r((function(){return[Object(n["k"])(o,{title:"商品总金额",value:s.state.amount+" 元"},null,8,["value"]),Object(n["k"])(o,{title:"商品总运费",value:s.state.freight+" 元"},null,8,["value"])]})),_:1}),Object(n["k"])(h,{label:"待支付总金额：","button-text":"结算",style:{bottom:"0px"},price:100*u.total,onSubmit:u.buy},null,8,["price","onSubmit"]),Object(n["k"])(b,Object(n["r"])(s.state.payData,{show:s.state.payShow,"onUpdate:show":e[1]||(e[1]=function(t){return s.state.payShow=t}),onOnFinish:u.handlePay}),null,16,["show","onOnFinish"])])]})),_:1})})),s=a("c359"),u=(a("e5a5"),a("d959")),o=a.n(u);const d=o()(s["a"],[["render",c],["__scopeId","data-v-7344e01e"]]);e["default"]=d},c359:function(t,e,a){"use strict";(function(t){var n=a("5530"),r=(a("13d5"),a("ac1f"),a("1276"),a("7a23")),i=a("5502"),c=a("2824"),s=a("a6e6");e["a"]={components:{BaseLayout:c["a"],Pay:s["default"]},data:function(){var t=Object(r["E"])({addr:{},list:[],amount:0,freight:0,payData:{},payShow:!1});return{state:t}},created:function(){var e=this;this.state.addr=this.profile.cartAddress,this.$http.get("/mall/cartlist?channel=1&status=1").then((function(a){e.state.list=a,e.state.amount=t.reduce(e.state.list,(function(e,a,n){return e=t.round(e+a.price*a.num,2),e}),0);var n=t.reduce(e.state.list,(function(t,e,a){return t.push({skuId:e.sku,num:e.num}),t}),[]),r=e.addressCode.split("_");e.$http.get("/jdmall/query?method=order/getFreight&paymentType=4&sku="+JSON.stringify(n)+"&province="+r[0]+"&city="+r[1]+"&county="+r[2]+"&town="+r[3]).then((function(t){e.state.freight=t.freight}))}))},computed:Object(n["a"])(Object(n["a"])({target:function(){return"/jdmall/cart"},total:function(){return this.state.amount+this.state.freight}},Object(i["d"])(["profile"])),Object(i["b"])(["addressCode"])),methods:{buy:function(){var e=this;if(t.isEmpty(this.state.addr))return this.$toast("请先选择收货地址");this.$http.post("/jdmall/checkout?aid="+this.state.addr.id).then((function(t){e.state.payData=Object(n["a"])(Object(n["a"])({},t),{},{json:JSON.stringify(t)}),e.state.payShow=!0}))},handlePay:function(t){var e=this;this.state.payShow=!1,this.$dialog.alert({title:"订单支付"+(t?"成功":"失败"),message:"请在“我的订单”中查看详细情况",theme:"round-button"}).then((function(){e.$router.push("/my/order")}))}}}}).call(this,a("81b0"))},d58f:function(t,e,a){var n=a("1c0b"),r=a("7b0b"),i=a("44ad"),c=a("50c4"),s=function(t){return function(e,a,s,u){n(a);var o=r(e),d=i(o),l=c(o.length),h=t?l-1:0,b=t?-1:1;if(s<2)while(1){if(h in d){u=d[h],h+=b;break}if(h+=b,t?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;t?h>=0:l>h;h+=b)h in d&&(u=a(u,d[h],h,o));return u}};t.exports={left:s(!1),right:s(!0)}},e5a5:function(t,e,a){"use strict";a("0866")}}]);