(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fbbdcfa"],{"18fa":function(t,e,n){"use strict";(function(t){var a=n("53ca"),i=n("5530"),c=(n("a9e3"),n("ac1f"),n("1276"),n("498a"),n("5319"),n("7a23")),r=n("5502"),s=n("2824"),u=n("a6e6");e["a"]={components:{BaseLayout:s["a"],Pay:u["default"]},props:{id:{type:[String,Number],default:1}},data:function(){var e=Object(c["F"])({}),n=Object(c["E"])({status:-1,spec:[],list:[],popup:!1,payData:{},payShow:!1}),a={link_man:{name:"联系人",type:"text",rules:[{message:"请填写正确的联系人",pattern:/[\S]{2,}/}]},link_phone:{name:"手机号码",type:"number",rules:[{message:"请填写正确的手机号码",pattern:/^1\d{10}$/}]},link_email:{name:"邮箱地址",type:"email",rules:[{message:"请填写正确的邮箱",pattern:/[\w|-|_]{2,}@[\w|\\.]{2,}/}]},link_credit_no:{name:"身份证号",type:"number",rules:[{message:"请填写正确的证件号",pattern:/\d{15,}[x]?/i}]},link_address:{name:"邮寄地址",type:"text",rules:[{message:"请填写正确的邮寄地址",pattern:/[\S]{10,}/}]}},r=Object(c["E"])(Object(i["a"])(Object(i["a"])({},{num:1}),t.mapValues(a,(function(){return""}))));return{detail:e,state:n,fields:a,form:r}},created:function(){this.init(this.id)},mounted:function(){this.toggleTabbar(!1)},unmounted:function(){this.toggleTabbar(!1)},computed:{info:function(){return 0==this.state.status?"立即抢购":1==this.state.status?"商品已下架":2==this.state.status?"商品不存在":"正在查询 ..."},cust:function(){var e={},n=t.trim(this.detail.custField," ,").split(",");for(var i in n)"object"==Object(a["a"])(this.fields[n[i]])&&(e[n[i]]=this.fields[n[i]]);return e}},methods:Object(i["a"])({init:function(e){var n=this;this.state.status=-1,this.$http.post("/jcmall/itemdetail?id="+e).then((function(a){if(1!=a.status&&2!=a.status){if(n.state.status=1,3==a.status)return setTimeout(n.$router.back,1e3)}else n.$http.get("/jcmall/itemCheck?id="+e).then((function(t){return n.state.status=t.productState}));var i={productNo:"商品编号",viewName:"商家名称",cityName:"所在市区",viewAddress:"详细地址",businessHours:"营业时间",orderPolicy:"预定规则",orderDesc:"预定说明",startDate:"最早游玩日期",priceStartDate:"价格开始时间",priceEndDate:"价格结束时间",refund_note:"退款说明",user_note:"使用说明",important_not:"重要提示"};for(var c in i)"undefined"==typeof a[c]||t.isEmpty(a[c])||("orderDesc"==c&&(a[c]="<div class='rule'>"+a[c]+"</div>"),n.state.spec.push({name:i[c],value:a[c]}));n.detail=a,!t.isEmpty(a)&&n.$share(a.title,a.cover)})).catch((function(){n.$router.back()}))},strip:function(t){return t=t.replace(/(max-)?width:[^;|\s]+/gi,"").replace(/section/gi,"div"),t},change:function(t){this.id!=t&&(this.$router.replace("?id="+t),this.init(t))},checkout:function(t){var e=this;this.state.payData={},this.state.payShow=!1,this.$http.post("/jcmall/checkout?id="+this.id,t).then((function(t){e.state.payData=Object(i["a"])(Object(i["a"])({},t),{},{json:JSON.stringify(t)}),e.state.payShow=!0}))},handlePay:function(t){var e=this;this.state.payShow=!1,this.$dialog.alert({title:"订单支付"+(t?"成功":"失败"),message:"请在“我的订单”中查看详细情况",theme:"round-button"}).then((function(){e.$router.push("order")}))}},Object(r["c"])(["toggleTabbar"]))}}).call(this,n("81b0"))},"1a56":function(t,e,n){"use strict";n("bbd9")},"498a":function(t,e,n){"use strict";var a=n("23e7"),i=n("58a8").trim,c=n("c8d2");a({target:"String",proto:!0,forced:c("trim")},{trim:function(){return i(this)}})},bbd9:function(t,e,n){},c8d2:function(t,e,n){var a=n("d039"),i=n("5899"),c="​᠎";t.exports=function(t){return a((function(){return!!i[t]()||c[t]()!=c||i[t].name!==t}))}},dc41:function(t,e,n){"use strict";n.r(e);n("b0c0");var a=n("7a23"),i=Object(a["X"])("data-v-b9673ccc");Object(a["D"])("data-v-b9673ccc");var c={key:0},r={class:"head"},s=Object(a["j"])("推荐"),u={class:"price"},o={class:"symbol"},l=Object(a["j"])("￥"),b={class:"number"},d=Object(a["j"])(" 起"),p={class:"slash"},j={class:"spec"},f=Object(a["k"])("div",{class:"group"},null,-1),O={style:{"text-align":"right"}},m=Object(a["j"])("  份 "),h=Object(a["k"])("p",null," ",-1),k=Object(a["j"])("确认购买");Object(a["B"])();var v=i((function(t,e,n,v,g,y){var _=Object(a["I"])("van-image"),w=Object(a["I"])("van-tag"),I=Object(a["I"])("van-cell"),S=Object(a["I"])("van-stepper"),x=Object(a["I"])("van-field"),$=Object(a["I"])("van-button"),E=Object(a["I"])("van-form"),D=Object(a["I"])("van-action-sheet"),M=Object(a["I"])("van-action-bar-icon"),T=Object(a["I"])("van-action-bar-button"),A=Object(a["I"])("van-action-bar"),V=Object(a["I"])("van-empty"),H=Object(a["I"])("pay"),L=Object(a["I"])("BaseLayout");return Object(a["A"])(),Object(a["g"])(L,{title:"商品详情",bg:"#EEE",navbar:"auto"},{default:i((function(){return[g.detail.intro?(Object(a["A"])(),Object(a["g"])("div",c,[Object(a["k"])(_,{src:g.detail.cover,width:"100%",fit:"contain"},null,8,["src"]),Object(a["k"])("div",r,[Object(a["k"])(I,{class:"title",border:!1},{title:i((function(){return[Object(a["j"])(Object(a["M"])(g.detail.title),1)]})),label:i((function(){return[Object(a["U"])(Object(a["k"])(w,{type:"danger"},{default:i((function(){return[s]})),_:1},512),[[a["Q"],g.detail.isTop]]),Object(a["j"])("   "+Object(a["M"])(g.detail.feature),1)]})),_:1}),Object(a["k"])(I,{center:"",border:!1},Object(a["i"])({title:i((function(){return[Object(a["k"])("div",u,[Object(a["k"])("span",o,[l,Object(a["k"])("span",b,Object(a["M"])(g.detail.price),1),d]),Object(a["k"])("span",p,"￥"+Object(a["M"])(g.detail.price_market),1)])]})),_:2},[g.detail.sales_supplier>0?{name:"extra",fn:i((function(){return[Object(a["j"])("已售出："+Object(a["M"])(g.detail.sales_supplier),1)]}))}:void 0]),1024)]),Object(a["k"])("div",j,[(Object(a["A"])(!0),Object(a["g"])(a["a"],null,Object(a["G"])(g.state.spec,(function(t,e){return Object(a["A"])(),Object(a["g"])(I,{key:e,title:t.name,border:!1},{default:i((function(){return[Object(a["k"])("span",{innerHTML:t.value},null,8,["innerHTML"])]})),_:2},1032,["title"])})),128))]),f,Object(a["k"])("div",{class:"intro",innerHTML:y.strip(g.detail.intro)},null,8,["innerHTML"]),Object(a["k"])(D,{show:g.state.popup,"onUpdate:show":e[2]||(e[2]=function(t){return g.state.popup=t}),style:{minHeight:"90vh",backgroundColor:"#EEE"},title:"填写订单信息"},{default:i((function(){return[Object(a["k"])(E,{class:"form",onSubmit:y.checkout},{default:i((function(){return[Object(a["k"])(I,{title:g.detail.title,border:!1},{label:i((function(){return[Object(a["k"])("div",O,Object(a["M"])(g.detail.appointment),1)]})),_:1},8,["title"]),Object(a["k"])(I,{title:"数量选择",border:!1},{label:i((function(){return[Object(a["k"])(x,{name:"num",label:"￥ "+g.detail.price+" / 份","input-align":"right"},{input:i((function(){return[Object(a["k"])(S,{name:"num",modelValue:g.form.num,"onUpdate:modelValue":e[1]||(e[1]=function(t){return g.form.num=t}),min:1,max:10},null,8,["modelValue"]),m]})),_:1},8,["label"])]})),_:1}),Object(a["k"])(I,{title:"联系信息",border:!1},{label:i((function(){return[(Object(a["A"])(!0),Object(a["g"])(a["a"],null,Object(a["G"])(y.cust,(function(t,e){return Object(a["A"])(),Object(a["g"])(x,{key:e,name:e,modelValue:g.form[e],"onUpdate:modelValue":function(t){return g.form[e]=t},type:t.type,label:t.name+"：",rules:t.rules,"label-align":"right",border:!1,"show-error":!0},null,8,["name","modelValue","onUpdate:modelValue","type","label","rules"])})),128))]})),_:1}),h,Object(a["k"])($,{class:"btn",type:"danger",block:"",round:"","native-type":"submit"},{default:i((function(){return[k]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1},8,["show"]),Object(a["k"])(A,{class:"bar"},{default:i((function(){return[Object(a["k"])(M,{icon:"wap-home-o",text:"首页",onClick:e[3]||(e[3]=function(e){return t.$router.push("/")})}),Object(a["k"])(M,{icon:"balance-list-o",text:"订单",onClick:e[4]||(e[4]=function(e){return t.$router.push("order")})}),Object(a["k"])(T,{type:"danger",disabled:0!=g.state.status,text:y.info,onClick:e[5]||(e[5]=function(t){return g.state.popup=!0})},null,8,["disabled","text"])]})),_:1})])):(Object(a["A"])(),Object(a["g"])(V,{key:1,description:y.info},null,8,["description"])),Object(a["k"])(H,Object(a["r"])(g.state.payData,{show:g.state.payShow,"onUpdate:show":e[6]||(e[6]=function(t){return g.state.payShow=t}),onOnFinish:y.handlePay}),null,16,["show","onOnFinish"])]})),_:1})})),g=n("18fa"),y=(n("1a56"),n("d959")),_=n.n(y);const w=_()(g["a"],[["render",v],["__scopeId","data-v-b9673ccc"]]);e["default"]=w}}]);