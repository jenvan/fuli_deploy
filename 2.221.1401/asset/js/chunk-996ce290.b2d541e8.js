(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-996ce290"],{2824:function(t,e,n){"use strict";var i=n("7a23"),a=Object(i["X"])("data-v-27edcc4f");Object(i["D"])("data-v-27edcc4f");var c={class:"container"},o={class:"back"},s={class:"head"},r={class:"more"},l={class:"subtitle"},u={class:"extra"};Object(i["B"])();var d=a((function(t,e,n,d,b,h){var f=Object(i["I"])("van-icon"),p=Object(i["I"])("van-nav-bar"),j=Object(i["I"])("van-sticky"),O=Object(i["I"])("van-col"),v=Object(i["I"])("van-row");return Object(i["A"])(),Object(i["g"])("div",c,[Object(i["U"])(Object(i["k"])(j,{onChange:e[1]||(e[1]=function(t){return d.state.isTop=!d.state.isTop})},{default:a((function(){return[Object(i["k"])(p,{class:["navbar",{notTop:!d.state.isTop,autoNav:"auto"==n.navbar}],border:!1,onClickLeft:h.onClickLeft,onClickRight:h.onClickRight},{left:a((function(){return[Object(i["U"])(Object(i["k"])("div",o,[Object(i["H"])(t.$slots,"back",{},(function(){return[Object(i["k"])(f,{name:"arrow-left"})]}),{},!0)],512),[[i["Q"],!n.noback]])]})),title:a((function(){return[Object(i["k"])("div",s,[Object(i["H"])(t.$slots,"head",{},(function(){return[Object(i["k"])("div",{style:{width:"100%",color:d.state.isTop?n.fg:"inherit"}},Object(i["M"])(d.state.isTop&&"0"!=n.height?"":n.title),5)]}),{},!0)])]})),right:a((function(){return[Object(i["k"])("div",r,[Object(i["H"])(t.$slots,"more",{},void 0,!0)])]})),_:1},8,["class","onClickLeft","onClickRight"])]})),_:1},512),[[i["Q"],"hide"!=n.navbar]]),Object(i["k"])("div",{class:["page",{notTop:!d.state.isTop,hideNav:"hide"==n.navbar,autoNav:"auto"==n.navbar,hasBar:t.$store.state.showTabbar}],style:{background:n.bg}},[Object(i["k"])(i["d"],{name:"van-slide-down"},{default:a((function(){return[Object(i["U"])(Object(i["k"])(v,{justify:"space-between",align:"center",class:"outline",style:{height:n.height+"px",color:n.fg}},{default:a((function(){return[Object(i["k"])(O,{span:"16"},{default:a((function(){return[Object(i["k"])("div",{class:"title",style:{color:n.fg},onClick:e[2]||(e[2]=function(e){return t.$emit("click-title")})},[Object(i["H"])(t.$slots,"title",{},(function(){return[Object(i["j"])(Object(i["M"])(n.title),1)]}),{},!0),Object(i["k"])("div",l,Object(i["M"])(n.subtitle),1)],4)]})),_:3}),Object(i["k"])(O,{span:"8"},{default:a((function(){return[Object(i["k"])("div",u,[Object(i["H"])(t.$slots,"extra",{},void 0,!0)])]})),_:3})]})),_:1},8,["style"]),[[i["Q"],d.state.isTop&&"show"==n.navbar]])]})),_:1}),Object(i["H"])(t.$slots,"default",{},void 0,!0)],6)])})),b={props:{navbar:{type:String,default:"show"},noback:{type:Boolean,default:!1},title:String,subtitle:String,height:String,bg:String,fg:String},setup:function(){var t=Object(i["E"])({isTop:!0});return{state:t}},methods:{onClickLeft:function(){var t=this;this.noback||(this.$emit("click-back"),setTimeout((function(e){if(e==t.$route)return window&&window.history.length>1?t.$router.back():t.$router.push("/")}),200,this.$route))},onClickRight:function(){return this.$emit("click-more")}}},h=(n("9c79"),n("6b0d")),f=n.n(h);const p=f()(b,[["render",d],["__scopeId","data-v-27edcc4f"]]);e["a"]=p},"30ae":function(t,e,n){},"3c3c":function(t,e,n){"use strict";n("ca04")},"9c79":function(t,e,n){"use strict";n("30ae")},ab12:function(t,e,n){"use strict";n.r(e);n("b0c0");var i=n("7a23"),a=Object(i["X"])("data-v-142ac6e6");Object(i["D"])("data-v-142ac6e6");var c=Object(i["j"])("切换账号"),o={class:"info"},s=Object(i["j"])("解绑账号"),r=Object(i["j"])("退出登录"),l={style:{padding:"10px"}},u=Object(i["j"])("立即切换"),d=Object(i["k"])("br",null,null,-1),b=Object(i["j"])("当前微信绑定如下账号，点击进行切换");Object(i["B"])();var h=a((function(t,e,n,h,f,p){var j=Object(i["I"])("van-button"),O=Object(i["I"])("van-uploader"),v=Object(i["I"])("van-field"),k=Object(i["I"])("van-cell"),m=Object(i["I"])("van-action-sheet"),g=Object(i["I"])("BaseLayout");return Object(i["A"])(),Object(i["g"])(g,{title:"我的账号",onClickTitle:p.onTitle,onClickBack:e[7]||(e[7]=function(e){return t.$router.push("/my")})},{extra:a((function(){return[p.inWechat?Object(i["U"])((Object(i["A"])(),Object(i["g"])(j,{key:0,icon:"sort",style:{width:"100%",borderRadius:"10px 0 0 10px",color:"#F60"},color:"#F6F6F6",onClick:e[1]||(e[1]=function(t){return f.state.popup2=!0})},{default:a((function(){return[c]})),_:1},512)),[[i["Q"],t.authorized]]):Object(i["h"])("",!0)]})),default:a((function(){return[Object(i["k"])(O,{class:"avatar",modelValue:f.avatar,"onUpdate:modelValue":e[2]||(e[2]=function(t){return f.avatar=t}),"max-size":524288,"max-count":1,"preview-size":120,multiple:!1,"after-read":p.onUpload},null,8,["modelValue","after-read"]),Object(i["k"])("div",o,[(Object(i["A"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(f.fields,(function(t,e){return Object(i["A"])(),Object(i["g"])(v,{key:e,label:t.name,modelValue:f.fields[e].value,"onUpdate:modelValue":function(t){return f.fields[e].value=t},clickable:"","right-icon":f.fields[e].icon,"input-align":"edit"==f.fields[e].icon?"center":"right",onClickInput:function(t){return f.fields[e].icon="edit"},onBlur:function(t){return p.onChange(e)}},null,8,["label","modelValue","onUpdate:modelValue","right-icon","input-align","onClickInput","onBlur"])})),128)),Object(i["k"])(k,{title:"最近登录时间",value:t.profile.login_dt},null,8,["value"]),Object(i["k"])(k,{title:"最近登录地址",border:!1,value:t.profile.login_ip},null,8,["value"]),Object(i["U"])(Object(i["k"])(j,{block:"",class:"btn",type:"primary",plain:"",onClick:p.onUnbind},{default:a((function(){return[s]})),_:1},8,["onClick"]),[[i["Q"],p.inWechat]]),Object(i["k"])(j,{block:"",class:"btn",type:"primary",to:"/logout"},{default:a((function(){return[r]})),_:1})]),Object(i["k"])(m,{show:f.state.popup1,"onUpdate:show":e[5]||(e[5]=function(t){return f.state.popup1=t}),title:"切换账号",round:"",closeable:""},{default:a((function(){return[Object(i["k"])("form",l,[Object(i["k"])(v,{type:"text",border:!0,modelValue:f.state.uid,"onUpdate:modelValue":e[3]||(e[3]=function(t){return f.state.uid=t}),"input-align":"center",placeholder:"请输入 UID",style:{margin:"10px 0"}},null,8,["modelValue"]),Object(i["k"])(j,{type:"primary",round:"",block:"",onClick:e[4]||(e[4]=function(t){return p.onSwitch(f.state.uid)})},{default:a((function(){return[u]})),_:1})])]})),_:1},8,["show"]),Object(i["k"])(m,{show:f.state.popup2,"onUpdate:show":e[6]||(e[6]=function(t){return f.state.popup2=t}),actions:f.state.list,"cancel-text":"绑定新账号","close-on-click-action":"",onSelect:p.onSwitch,onCancel:p.onBind},{description:a((function(){return[Object(i["j"])(Object(i["M"])(t.profile.openid),1),d,b]})),_:1},8,["show","actions","onSelect","onCancel"])]})),_:1},8,["onClickTitle"])})),f=n("53ca"),p=n("5530"),j=n("5502"),O=n("2824"),v={components:{BaseLayout:O["a"]},data:function(){var t=Object(i["F"])([]),e=Object(i["E"])({nickname:{name:"昵称",icon:"arrow",value:""},mobile:{name:"手机号",icon:"arrow",value:""},username:{name:"用户名",icon:"arrow",value:""},password:{name:"密码",icon:"arrow",value:""}}),n=Object(i["E"])({uid:"",popup1:!1,popup2:!1,list:[]});return{avatar:t,fields:e,state:n}},created:function(){this.$init(this.reset,!0)},computed:Object(p["a"])(Object(p["a"])({inWechat:function(){return this.profile.wechat&&this.profile.wechat.openid&&this.profile.wechat.openid.length>10}},Object(j["d"])(["profile"])),Object(j["b"])(["authorized","uid","mobile","nickname"])),methods:Object(p["a"])({reset:function(){if(this.avatar=[{url:this.profile.avatar,isImage:!0}],this.fields.mobile.value=this.mobile,this.fields.username.value=this.profile.username,this.fields.nickname.value=this.nickname,this.fields.password.value="******",this.state.list=[],this.inWechat)for(var t in this.profile.wechat.bind){var e=this.profile.wechat.bind[t];this.state.list.push(Object(p["a"])(Object(p["a"])({},e),{name:e.mobile,subname:e.nickname+" (UID:"+e.id+") "}))}},onTitle:function(){return!this.authorized||1!=this.uid&&1e4!=this.uid?this.$init(this.reset):this.state.popup1=!0},onSwitch:function(t){var e=this,n="object"==Object(f["a"])(t)?"/wechat/switch?u="+t.id:"/user/switch?id="+t;this.$http.post(n).then((function(t){e.state.popup1=!1,e.state.popup2=!1,e.auth(t),e.$init(e.reset)}))},onUpload:function(t){var e=this;t.status="uploading",t.message="上传中...";var n=new FormData;n.append("file",t.file),this.$http.post("/mall/upload",n).then((function(n){t.status="done",t.message="上传成功",t.url=n.filepath,e.$http.get("/user/modify?avatar="+n.filepath)}))},onChange:function(t){var e=this;if(this.fields[t].icon="arrow",("mobile"!=t||this.fields.mobile.value!=this.mobile)&&("username"!=t||this.fields.username.value!=this.profile.username)&&("nickname"!=t||this.fields.nickname.value!=this.nickname)&&("password"!=t||"******"!=this.fields.password.value)){var n="/user/change",i={what:t,value:this.fields[t].value};/(mobile|username|password)/.test(t)||(n="/user/modify",i[t]=this.fields[t].value),this.$http.post(n,i).then((function(){e.$init(e.reset)})).catch((function(){e.reset(),e.fields[t].icon="edit"}))}},onBind:function(){this.$router.push("/bind")},onUnbind:function(){var t=this;this.$dialog.confirm({title:"",message:"确认解除账号 "+this.mobile+" 和微信（ID:"+this.profile.openid+"）的绑定关系？",theme:"round-button"}).then((function(){t.$http.post("/wechat/unbind").then((function(e){t.auth(e),t.$init(t.reset,!0)}))}))}},Object(j["c"])(["auth"]))},k=(n("3c3c"),n("6b0d")),m=n.n(k);const g=m()(v,[["render",h],["__scopeId","data-v-142ac6e6"]]);e["default"]=g},ca04:function(t,e,n){}}]);