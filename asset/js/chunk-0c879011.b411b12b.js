(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c879011"],{"69fb":function(t,e,n){"use strict";n.r(e);n("b0c0"),n("b64b");var c=n("7a23"),a=Object(c["V"])("data-v-2c51b782");Object(c["C"])("data-v-2c51b782");var o=Object(c["i"])("已下单"),r=Object(c["i"])("已付款"),i=Object(c["i"])("已发货"),s=Object(c["i"])("已签收"),l={key:0},u={key:0},d={class:"card"},j={class:"tool"},b=Object(c["i"])(" 复制卡号"),O=Object(c["i"])("   "),p=Object(c["i"])(" 显示卡片"),h={key:1},f={class:"card"},v={class:"tool"},y=Object(c["i"])(" 复制卡密"),g={class:"indicator"},m={class:"van-multi-ellipsis--l2"},k=Object(c["j"])("br",null,null,-1),w=Object(c["i"])("长按图片保存到手机或分享给好友");Object(c["A"])();var C=a((function(t,e,n,C,_,L){var H=Object(c["H"])("van-step"),z=Object(c["H"])("van-steps"),$=Object(c["H"])("van-cell"),S=Object(c["H"])("van-icon"),x=Object(c["H"])("van-swipe-item"),F=Object(c["H"])("van-swipe"),E=Object(c["H"])("van-collapse-item"),V=Object(c["H"])("van-collapse"),D=Object(c["H"])("van-divider"),P=Object(c["H"])("van-action-bar-icon"),U=Object(c["H"])("van-action-bar-button"),J=Object(c["H"])("van-action-bar"),B=Object(c["H"])("van-image"),I=Object(c["H"])("van-popup"),M=Object(c["H"])("pay"),N=Object(c["H"])("BaseLayout");return Object(c["z"])(),Object(c["g"])(N,{title:"订单详情"},{default:a((function(){return[Object(c["S"])(Object(c["j"])(z,{class:"step",active:C.status},{default:a((function(){return[Object(c["j"])(H,null,{default:a((function(){return[o]})),_:1}),Object(c["j"])(H,null,{default:a((function(){return[r]})),_:1}),Object(c["j"])(H,null,{default:a((function(){return[i]})),_:1}),Object(c["j"])(H,null,{default:a((function(){return[s]})),_:1})]})),_:1},8,["active"]),[[c["O"],C.status<4]]),Object(c["j"])(V,{class:"bill",modelValue:C.unfold,"onUpdate:modelValue":e[1]||(e[1]=function(t){return C.unfold=t})},{default:a((function(){return[Object(c["j"])(E,{name:"0",title:"收货信息",value:0==C.state.order.card?"物流派送":C.state.order.card<0?"电子卡密":"提货卡"},{default:a((function(){return[0==C.state.order.card?(Object(c["z"])(),Object(c["g"])("div",l,[Object(c["j"])($,null,{title:a((function(){return[Object(c["i"])(Object(c["L"])(C.state.order.consignee.name)+"（"+Object(c["L"])(C.state.order.consignee.mobile)+"）",1)]})),label:a((function(){return[Object(c["i"])(Object(c["L"])(C.state.order.consignee.province)+" "+Object(c["L"])(C.state.order.consignee.city)+" "+Object(c["L"])(C.state.order.consignee.county)+" "+Object(c["L"])(C.state.order.consignee.address),1)]})),_:1}),(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(C.state.order.logistics,(function(e,a,o){return Object(c["z"])(),Object(c["g"])($,{key:a,title:e.dt+(Object.keys(C.state.order.logistics).length>1?"（包裹 "+(o+1)+"）":""),label:e.msg,border:"","is-link":"",onClick:function(e){return t.$router.push("/my/order/track?id="+n.id+"&lid="+a)}},null,8,["title","label","onClick"])})),128))])):(Object(c["z"])(),Object(c["g"])(F,{key:1,class:"swipe"},{indicator:a((function(t){var e=t.active;return[Object(c["j"])("div",g,Object(c["L"])(e+1)+" / "+Object(c["L"])(C.state.cards.length),1)]})),default:a((function(){return[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(C.state.cards,(function(e,n){return Object(c["z"])(),Object(c["g"])(x,{key:n,style:{background:e.bg}},{default:a((function(){return[C.state.order.card>0?(Object(c["z"])(),Object(c["g"])("div",u,[Object(c["j"])("div",d,"提货卡号：****"+Object(c["L"])(e.token.substr(4)),1),Object(c["j"])("div",j,[Object(c["j"])(S,{name:"more-o",onClick:function(t){return L.onFinish()&L.copy(e.token)}},{default:a((function(){return[b]})),_:2},1032,["onClick"]),O,Object(c["j"])(S,{name:"photo-o",onClick:function(t){return L.onFinish()&L.save(e.token)}},{default:a((function(){return[p]})),_:2},1032,["onClick"])])])):Object(c["h"])("",!0),C.state.order.card<0?(Object(c["z"])(),Object(c["g"])("div",h,[Object(c["j"])("div",f,Object(c["L"])(e.no),1),Object(c["j"])("div",v,[Object(c["S"])(Object(c["j"])(S,{name:"more-o",onClick:function(n){return L.onFinish()&t.$copy(e.no+"\n"+e.pwd)}},{default:a((function(){return[y]})),_:2},1032,["onClick"]),[[c["O"],e.pwd&&e.pwd.length>0]])]),Object(c["S"])(Object(c["j"])("div",{class:"deadline"}," 有效期至："+Object(c["L"])(e.deadline),513),[[c["O"],e.deadline&&e.deadline.length>0]])])):Object(c["h"])("",!0)]})),_:2},1032,["style"])})),128))]})),_:1}))]})),_:1},8,["value"]),Object(c["j"])(E,{name:"1",title:"商品信息",value:"共 "+(C.state.order.card<=0?C.state.order.total:C.state.order.card+" x "+C.state.order.total/C.state.order.card)+" 件"},{default:a((function(){return[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(C.state.order.detail,(function(t,e){return Object(c["z"])(),Object(c["g"])($,{key:e,label:t.spec,style:{alignItems:"center"},onClick:function(e){return L.onView(t)}},{icon:a((function(){return[Object(c["j"])(S,{class:"img",name:t.image,size:"32"},null,8,["name"])]})),title:a((function(){return[Object(c["j"])("div",m,Object(c["L"])(t.title),1)]})),extra:a((function(){return[Object(c["i"])(" x"+Object(c["L"])(t.num),1)]})),_:2},1032,["label","onClick"])})),128))]})),_:1},8,["value"]),Object(c["j"])(E,{name:"2",title:"订单总额",value:C.state.order.amount+" 元"},{default:a((function(){return[Object(c["j"])($,{title:"实付积分",value:C.state.order.point+" 分"},null,8,["value"]),Object(c["j"])($,{title:"实付现金",value:C.state.order.cash+" 元"},null,8,["value"])]})),_:1},8,["value"]),Object(c["j"])(E,{name:"3",title:"交易状态"},{value:a((function(){return[Object(c["j"])("div",{style:{color:C.state.order.color}},Object(c["L"])(C.state.order.result),5)]})),default:a((function(){return[Object(c["j"])($,{title:"创建时间",value:C.state.order.dt_create},null,8,["value"]),Object(c["j"])($,{title:"付款时间",value:C.state.order.dt_pay},null,8,["value"]),Object(c["j"])($,{title:"发货时间",value:C.state.order.dt_send},null,8,["value"]),Object(c["j"])($,{title:"完成时间",value:C.state.order.dt_finish},null,8,["value"])]})),_:1})]})),_:1},8,["modelValue"]),Object(c["j"])(D,{style:{color:"#EEE"},onClick:e[2]||(e[2]=function(e){return t.$copy(n.id+" "+C.state.order.extra)})},{default:a((function(){return[Object(c["i"])("# "+Object(c["L"])(n.id)+" # "+Object(c["L"])(C.state.order.extra),1)]})),_:1}),Object(c["j"])(J,null,{default:a((function(){return[Object(c["j"])(P,{icon:"chat-o",text:"客服",onClick:e[3]||(e[3]=function(t){return C.state.popup2=!0})}),0==C.state.order.status?(Object(c["z"])(),Object(c["g"])(U,{key:0,type:"warning",text:"关闭订单",onClick:L.onClose},null,8,["onClick"])):Object(c["h"])("",!0),0==C.state.order.status?(Object(c["z"])(),Object(c["g"])(U,{key:1,type:"primary",text:"立即付款",onClick:L.onPay},null,8,["onClick"])):Object(c["h"])("",!0),0==C.state.order.card&&2==C.state.order.status?(Object(c["z"])(),Object(c["g"])(U,{key:2,type:"success",text:"确认收货",onClick:L.onFinish},null,8,["onClick"])):Object(c["h"])("",!0),0==C.state.order.card&&C.state.order.status>0?(Object(c["z"])(),Object(c["g"])(U,{key:3,type:"danger",text:"申请售后",onClick:L.onService},null,8,["onClick"])):Object(c["h"])("",!0)]})),_:1}),Object(c["j"])(I,{show:C.state.popup1,"onUpdate:show":e[4]||(e[4]=function(t){return C.state.popup1=t})},{default:a((function(){return[Object(c["j"])(B,{class:"giftcard",src:C.state.giftcard,width:"300"},{default:a((function(){return[k,w]})),_:1},8,["src"])]})),_:1},8,["show"]),Object(c["j"])(I,{show:C.state.popup2,"onUpdate:show":e[5]||(e[5]=function(t){return C.state.popup2=t}),position:"top",style:{height:"50%",padding:"20px"}},{default:a((function(){return[Object(c["j"])("div",{class:"contact",innerHTML:t.config.contact},null,8,["innerHTML"])]})),_:1},8,["show"]),Object(c["j"])(M,Object(c["q"])(C.state.payData,{show:C.state.payShow,"onUpdate:show":e[6]||(e[6]=function(t){return C.state.payShow=t}),onOnFinish:L.handlePay}),null,16,["show","onOnFinish"])]})),_:1})})),_=n("b1c2"),L=(n("d933"),n("6b0d")),H=n.n(L);const z=H()(_["a"],[["render",C],["__scopeId","data-v-2c51b782"]]);e["default"]=z},b1c2:function(t,e,n){"use strict";(function(t){var c=n("5530"),a=(n("a9e3"),n("7a23")),o=n("5502"),r=n("2824"),i=n("a6e6");e["a"]={components:{BaseLayout:r["a"],Pay:i["default"]},props:{id:{type:[String,Number],default:0}},setup:function(){var t=Object(a["D"])({order:{},cards:[],popup1:!1,giftcard:"",popup2:!1,payData:{},payShow:!1}),e=Object(a["E"])(0),n=Object(a["E"])(["0","1"]),c=Object(a["E"])(0);return{state:t,status:e,unfold:n,active:c}},created:function(){this.onLoad()},computed:Object(c["a"])({},Object(o["d"])(["channel","config"])),methods:{onLoad:function(){var e=this;this.state.cards=[],this.$http.post("/mall/orderDetail?id="+this.id).then((function(n){if(e.state.order=n,e.state.order.color=["#CCC","#666","#00C","#0C0","#C00"][n.status],e.state.order.result=["未付款","已付款","已发货","交易成功","交易关闭"][n.status],e.status=n.status,0!=n.card){for(var c in n.cards)n.cards[c].bg="rgb("+t.random(150,250)+","+t.random(150,250)+","+t.random(150,250)+")";e.state.cards=n.cards}n.channel>0&&n.status>0&&e.$http.get("/"+e.channel[n.channel]["type"]+"/orderUpdate?id="+e.id)}))},onView:function(t){var e="/mall/item?id="+t.spu;this.state.order.channel>0&&(e="/"+this.channel[this.state.order.channel]["type"]+"/item?id="+t.sku),this.$router.push(e)},onPay:function(){var t=this,e="/mall/pay";this.state.order.channel>0&&(e="/"+this.channel[this.state.order.channel]["type"]+"/pay"),this.$http.post(e+"?oid="+this.id).then((function(e){t.state.payData=Object(c["a"])(Object(c["a"])({},e),{},{json:JSON.stringify(e)}),t.state.payShow=!0}))},onClose:function(){0==this.state.order.status&&this.$http.post("/mall/orderClose?id="+this.id).then(this.onLoad)},onFinish:function(){2==this.state.order.status&&this.$http.post("/mall/orderFinish?id="+this.id).then(this.onLoad)},onService:function(){this.$router.push("/my/service?id="+this.id)},handlePay:function(t){this.state.payShow=!1,this.$dialog.alert({message:"订单支付"+(t?"成功":"失败"),theme:"round-button"}).then(this.onLoad)},copy:function(t){var e="提货卡号："+t+"（请关注微信公众号“福鲤社”，点击下方菜单提货）";this.$copy(e)},save:function(t){this.state.popup1=!0,this.state.giftcard=this.$host+"/mall/card?type=pick&token="+t}}}}).call(this,n("81b0"))},d933:function(t,e,n){"use strict";n("f7ec")},f7ec:function(t,e,n){}}]);