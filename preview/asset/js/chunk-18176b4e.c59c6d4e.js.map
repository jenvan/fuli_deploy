{"version":3,"sources":["webpack:///./src/views/Mall/Order.vue?3420","webpack:///./src/views/Mall/Order.vue","webpack:///./src/views/Mall/Order.vue?5744"],"names":["components","BaseLayout","setup","state","refreshing","loading","finished","list","offset","limit","show1","item","contact","cards","show2","giftcard","choose","mounted","this","onRefresh","computed","methods","onLoad","$http","get","then","data","i","length","push","status","color","popup","post","id","result","card","bg","_","random","copy","token","str","$copy","save","$host","class","title","loading-text","finished-text","immediate-check","index","align","key","span","dt_create","style","detail","v","k","src","image","fit","total","amount","show","accordion","name","value","label","spec","icon","size","extra","num","point","cash","dt_pay","dt_send","dt_finish","mobile","province","city","district","address","indicator","active","substr","type","text","onClickButton","block","round","width","render","__scopeId"],"mappings":"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","file":"asset/js/chunk-18176b4e.c59c6d4e.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Order.vue?vue&type=style&index=0&id=1bfa6ad7&scoped=true&lang=css\"","<template>\n  <BaseLayout title=\"我的订单\">\n\n    <van-pull-refresh v-model=\"state.refreshing\" @refresh=\"onRefresh\">\n      <van-list class=\"list\" v-model:loading=\"state.loading\" :finished=\"state.finished\" loading-text=\"正在请求数据 ...\" finished-text=\"没有更多了\" :immediate-check=\"false\" @load=\"onLoad\">\n        <van-row class=\"block\" align=\"center\" v-for=\"(item,index) in state.list\" :key=\"index\" @click=\"popup(item)\">\n          <van-col span=\"24\" class=\"dt\"><van-tag color=\"#CCC\">{{item.dt_create}}</van-tag></van-col>\n          <van-col span=\"12\" class=\"id\"># {{item.id}}</van-col>\n          <van-col span=\"12\" class=\"status\" :style=\"{color:item.color}\">{{item.status}}</van-col>\n          <van-col span=\"19\" class=\"detail\">\n            <van-image class=\"img\" v-for=\"(v,k) in item.detail\" :key=\"k\" :src=\"v.image\" fit=\"contain\"></van-image>\n          </van-col>\n          <van-col span=\"5\" class=\"amount\">\n            <div>共 {{item.total}} 件</div>\n            <div>￥ {{item.amount}}</div>\n          </van-col>\n        </van-row>\n      </van-list>\n    </van-pull-refresh>\n\n    <van-action-sheet v-model:show=\"state.show1\" title=\"订单详情\">\n      <van-collapse class=\"bill\" v-model=\"choose\" accordion>\n        <van-collapse-item name=\"1\" title=\"商品数量\" :value=\"(state.item.card <= 0 ? state.item.total : state.item.card + ' x ' + state.item.total / state.item.card) + ' 件'\">\n          <van-cell v-for=\"(v,k) in state.item.detail\" :key=\"k\" :label=\"v.spec\" :style=\"{alignItems:'center'}\">\n            <template #icon><van-icon class=\"img\" :name=\"v.image\" size=\"32\"></van-icon></template>\n            <template #title><div class=\"van-ellipsis\">{{v.title}}</div></template>\n            <template #extra>x {{v.num}}</template>\n          </van-cell>\n        </van-collapse-item>\n        <van-collapse-item name=\"2\" title=\"订单总额\" :value=\"state.item.amount + ' 元'\">\n          <van-cell title=\"实付积分\" :value=\"state.item.point + ' 分'\"></van-cell>\n          <van-cell title=\"实付现金\" :value=\"state.item.cash + ' 元'\"></van-cell>\n        </van-collapse-item>\n        <van-collapse-item name=\"3\" title=\"交易状态\" :value=\"state.item.result\">\n          <van-cell title=\"创建时间\" :value=\"state.item.dt_create\"></van-cell>\n          <van-cell title=\"付款时间\" :value=\"state.item.dt_pay\"></van-cell>\n          <van-cell title=\"发货时间\" :value=\"state.item.dt_send\"></van-cell>\n          <van-cell title=\"完成时间\" :value=\"state.item.dt_finish\"></van-cell>\n        </van-collapse-item>\n        <van-collapse-item name=\"4\" title=\"收货方式\" :value=\"state.item.card == 0 ? '物流' : '提货卡'\">\n          <van-cell v-if=\"state.item.card == 0\" :title=\"state.contact.name + '（' + state.contact.mobile + '）'\">\n            <template #label>\n              {{state.contact.province}} {{state.contact.city}} {{state.contact.district}} {{state.contact.address}}\n            </template>\n          </van-cell>\n          <van-swipe class=\"swipe\" v-else>\n            <van-swipe-item class=\"sitem\" v-for=\"(v,k) in state.cards\" :key=\"k\" :style=\"{background:v.bg}\">\n              <div class=\"card\">提货卡号：****{{v.token.substr(4)}}</div>\n              <div class=\"tool\">\n                <van-icon name=\"more-o\"  @click=\"copy(v.token)\"> 复制卡号</van-icon>\n                &nbsp;\n                <van-icon name=\"photo-o\" @click=\"save(v.token)\"> 显示卡片</van-icon>\n              </div>\n            </van-swipe-item>\n            <template #indicator=\"{ active }\">\n              <div class=\"indicator\">{{ active + 1 }} / {{state.cards.length}}</div>\n            </template>\n          </van-swipe>\n        </van-collapse-item>\n      </van-collapse>\n      <div class=\"action\">\n        <van-button v-show=\"state.item.status==2\" type=\"danger\" text=\"确认收货\" @click=\"onClickButton\" block round />\n        <van-button v-show=\"state.item.status==3\" type=\"danger\" text=\"申请售后\" @click=\"onClickButton\" block round />\n      </div>\n    </van-action-sheet>\n\n    <van-popup v-model:show=\"state.show2\"><van-image class=\"giftcard\" :src=\"state.giftcard\" width=\"300\"><br/>长按图片保存到手机或分享给好友</van-image></van-popup>\n\n  </BaseLayout>\n</template>\n\n<style scoped>\n.list {\n  min-height: 500px;\n  padding: 5px;\n  background: #F9F9F9;\n  border-top: solid 1px #EEE;\n}\n.list .block {\n  margin-top: 45px;\n  padding: 0 10px 10px 10px;\n  background: #FFF;\n  border-radius: 10px;\n  border: solid 1px #F6F6F6;\n  font-size: 12px;\n}\n\n.list .dt {\n  position: relative;\n  top: -25px;\n  text-align: center;\n}\n.list .id {\n  font-size: 14px;\n  font-weight: 600;\n}\n.list .status {\n  text-align: right;\n}\n.list .detail {\n  float: left;\n  width: 100%;\n  height: auto;\n  overflow-x: scroll;\n}\n.list .img {\n  width: 80px;\n  height: 80px;\n  margin: 10px 3px 0 0;\n  border: solid 1px #F6F6F6;\n  border-radius: 5px;\n}\n.list .amount {\n  border-left: solid 1px #EEE;\n  font-size: 12px;\n  text-align: right;\n}\n\n\n.bill {\n  min-height: 200px;\n}\n.bill .img {\n  margin-right: 10px;\n  border-radius: 5px;\n}\n\n.swipe {\n  width: 100%;\n  height: 100px;\n  overflow: hidden;\n}\n.indicator {\n  position: absolute;\n  left: 5px;\n  top: 5px;\n  padding: 2px 5px;\n  color: #FFF;\n  background: rgba(0, 0, 0, 0.5);\n  font-size: 12px;\n}\n.card {\n  margin-top: 30px;\n  color: #666;\n  font-size: 18px;\n  font-weight: 800;\n  text-align:center;\n}\n.tool {\n  position: absolute;\n  color: #333;\n  font-size: 12px;\n  right: 10px;\n  bottom: 10px;\n}\n\n.action {\n  padding: 10px;\n}\n\n.giftcard {\n  margin: 10px;\n  font-size: 12px;\n  text-align: center;\n}\n</style>\n\n<script>\nimport {reactive,ref} from 'vue'\nimport BaseLayout from '@/components/BaseLayout.vue'\n\nexport default {\n  components: {BaseLayout},\n\n  setup() {\n    const state = reactive({\n      refreshing: false,\n      loading: false,\n      finished: false,\n      list: [],\n      offset: 0,\n      limit : 20,\n\n      show1: false,\n      item: {},\n      contact: {},\n      cards: [],\n\n      show2: false,\n      giftcard: \"\",\n    });\n    const choose = ref('4');\n    const active = ref(0);\n    return {state, choose};\n  },\n\n  mounted(){\n    this.onRefresh();\n  },\n\n  computed: {\n  },\n\n  methods: {\n    onRefresh() {\n      this.state.loading = true;\n      this.state.finished = false;\n      this.state.offset = 0;\n      this.state.list = [];\n      this.onLoad();\n    },\n    onLoad() {\n      this.$http.get(\"/mall/orderlist?offset=\" + this.state.offset + \"&limit=\" + this.state.limit).then((data) => {\n        this.state.refreshing = false;\n        if (data.length == 0 || data.length < this.state.limit)\n          this.state.finished = true;\n        this.state.loading = false;\n        this.state.offset += data.length;\n\n        for (let i in data){\n          let item = data[i];\n          this.state.list.push({...item, ...{\n            status: [\"未付款\", \"已付款\", \"已发货\", \"交易成功\", \"交易关闭\"][item.status],\n            color: [\"#CCC\", \"#666\", \"#00C\", \"#0C0\", \"#C00\"][item.status],\n          }});\n        }\n      });\n    },\n\n    popup(item) {\n      this.state.contact = {};\n      this.state.cards = [];\n      this.$http.post(\"/mall/orderDetail?id=\" + item.id).then((data) => {\n        this.state.show1 = true;\n        this.state.item = data;\n        this.state.item.result = [\"未付款\", \"已付款\", \"已发货\", \"交易成功\", \"交易关闭\"][data.status];\n        if (item.card <= 0)\n          this.state.contact = data.contact;\n        else{\n          for (var i in data.cards){\n            data.cards[i].bg = \"rgb(\" + _.random(150,250) + \",\" + _.random(150,250) + \",\" + _.random(150,250) + \")\";\n          }\n          this.state.cards = data.cards;\n        }\n      });\n    },\n\n    copy(token){\n      let str = \"亲，送你一张提货卡略表心意！请关注微信公众号“福鲤社”，点击下方菜单提货，提货卡号：\" + token;\n      this.$copy(str);\n    },\n\n    save(token) {\n      this.state.show2 = true;\n      this.state.giftcard = this.$host + '/mall/card?token=' + token;\n    },\n  }\n}\n</script>\n","import { render } from \"./Order.vue?vue&type=template&id=1bfa6ad7&scoped=true\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=1bfa6ad7&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-1bfa6ad7\"\n\nexport default script"],"sourceRoot":""}