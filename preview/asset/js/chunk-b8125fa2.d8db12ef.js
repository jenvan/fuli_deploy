(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b8125fa2"],{"04a0":function(t,e,n){},"38d7":function(t,e,n){"use strict";(function(t){var a=n("5530"),c=n("7a23"),i=n("2824");e["a"]={components:{BaseLayout:i["a"]},setup:function(){var t=Object(c["B"])({refreshing:!1,loading:!1,finished:!1,list:[],offset:0,limit:20,show1:!1,item:{},cards:[],show2:!1,giftcard:""}),e=Object(c["C"])("4");Object(c["C"])(0);return{state:t,choose:e}},mounted:function(){this.onRefresh()},computed:{},methods:{onRefresh:function(){this.state.loading=!0,this.state.finished=!1,this.state.offset=0,this.state.list=[],this.onLoad()},onLoad:function(){var t=this;this.$http.get("/mall/orderlist?offset="+this.state.offset+"&limit="+this.state.limit).then((function(e){for(var n in t.state.refreshing=!1,(0==e.length||e.length<t.state.limit)&&(t.state.finished=!0),t.state.loading=!1,t.state.offset+=e.length,e){var c=e[n];t.state.list.push(Object(a["a"])(Object(a["a"])({},c),{status:["未付款","已付款","已发货","交易成功","交易关闭"][c.status],color:["#CCC","#666","#00C","#0C0","#C00"][c.status]}))}}))},popup:function(e){var n=this;this.state.cards=[],this.$http.post("/mall/orderDetail?id="+e.id).then((function(a){if(n.state.show1=!0,n.state.item=a,n.state.item.result=["未付款","已付款","已发货","交易成功","交易关闭"][a.status],0!=e.card){for(var c in a.cards)a.cards[c].bg="rgb("+t.random(150,250)+","+t.random(150,250)+","+t.random(150,250)+")";n.state.cards=a.cards}}))},copy:function(t){var e="亲，送你一张提货卡略表心意！请关注微信公众号“福鲤社”，点击下方菜单提货，提货卡号："+t;this.$copy(e)},save:function(t){this.state.show2=!0,this.state.giftcard=this.$host+"/mall/card?type=pick&token="+t}}}}).call(this,n("81b0"))},"957a":function(t,e,n){"use strict";n.r(e);var a=n("7a23"),c=Object(a["R"])("data-v-905e525e");Object(a["A"])("data-v-905e525e");var i={class:"van-ellipsis"},s={key:0},l={class:"card"},o={class:"tool"},u=Object(a["h"])(" 复制卡号"),r=Object(a["h"])("   "),d=Object(a["h"])(" 显示卡片"),b={key:1},f={class:"card"},j={class:"tool"},O=Object(a["h"])(" 复制卡密"),h={class:"indicator"},m={class:"action"},v=Object(a["i"])("br",null,null,-1),p=Object(a["h"])("长按图片保存到手机或分享给好友");Object(a["y"])();var k=c((function(t,e,n,k,g,_){var C=Object(a["F"])("van-tag"),w=Object(a["F"])("van-col"),y=Object(a["F"])("van-image"),x=Object(a["F"])("van-row"),F=Object(a["F"])("van-list"),J=Object(a["F"])("van-pull-refresh"),L=Object(a["F"])("van-icon"),B=Object(a["F"])("van-cell"),R=Object(a["F"])("van-collapse-item"),V=Object(a["F"])("van-swipe-item"),D=Object(a["F"])("van-swipe"),M=Object(a["F"])("van-collapse"),U=Object(a["F"])("van-button"),$=Object(a["F"])("van-action-sheet"),P=Object(a["F"])("van-popup"),H=Object(a["F"])("BaseLayout");return Object(a["x"])(),Object(a["f"])(H,{title:"我的订单"},{default:c((function(){return[Object(a["i"])(J,{modelValue:k.state.refreshing,"onUpdate:modelValue":e[2]||(e[2]=function(t){return k.state.refreshing=t}),onRefresh:_.onRefresh},{default:c((function(){return[Object(a["i"])(F,{class:"list",loading:k.state.loading,"onUpdate:loading":e[1]||(e[1]=function(t){return k.state.loading=t}),finished:k.state.finished,"loading-text":"正在请求数据 ...","finished-text":"没有更多了","immediate-check":!1,onLoad:_.onLoad},{default:c((function(){return[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(k.state.list,(function(t,e){return Object(a["x"])(),Object(a["f"])(x,{class:"block",align:"center",key:e,onClick:function(e){return _.popup(t)}},{default:c((function(){return[Object(a["i"])(w,{span:"24",class:"dt"},{default:c((function(){return[Object(a["i"])(C,{color:"#CCC"},{default:c((function(){return[Object(a["h"])(Object(a["J"])(t.dt_create),1)]})),_:2},1024)]})),_:2},1024),Object(a["i"])(w,{span:"12",class:"id"},{default:c((function(){return[Object(a["h"])("# "+Object(a["J"])(t.id),1)]})),_:2},1024),Object(a["i"])(w,{span:"12",class:"status",style:{color:t.color}},{default:c((function(){return[Object(a["h"])(Object(a["J"])(t.status),1)]})),_:2},1032,["style"]),Object(a["i"])(w,{span:"19",class:"detail"},{default:c((function(){return[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(t.detail,(function(t,e){return Object(a["x"])(),Object(a["f"])(y,{class:"img",key:e,src:t.image,fit:"contain"},null,8,["src"])})),128))]})),_:2},1024),Object(a["i"])(w,{span:"5",class:"amount"},{default:c((function(){return[Object(a["i"])("div",null,"共 "+Object(a["J"])(t.total)+" 件",1),Object(a["i"])("div",null,"￥ "+Object(a["J"])(t.amount),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1},8,["loading","finished","onLoad"])]})),_:1},8,["modelValue","onRefresh"]),Object(a["i"])($,{show:k.state.show1,"onUpdate:show":e[4]||(e[4]=function(t){return k.state.show1=t}),title:"订单详情"},{default:c((function(){return[Object(a["i"])(M,{class:"bill",modelValue:k.choose,"onUpdate:modelValue":e[3]||(e[3]=function(t){return k.choose=t}),accordion:""},{default:c((function(){return[Object(a["i"])(R,{name:"1",title:"商品数量",value:(k.state.item.card<=0?k.state.item.total:k.state.item.card+" x "+k.state.item.total/k.state.item.card)+" 件"},{default:c((function(){return[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(k.state.item.detail,(function(t,e){return Object(a["x"])(),Object(a["f"])(B,{key:e,label:t.spec,style:{alignItems:"center"}},{icon:c((function(){return[Object(a["i"])(L,{class:"img",name:t.image,size:"32"},null,8,["name"])]})),title:c((function(){return[Object(a["i"])("div",i,Object(a["J"])(t.title),1)]})),extra:c((function(){return[Object(a["h"])("x "+Object(a["J"])(t.num),1)]})),_:2},1032,["label"])})),128))]})),_:1},8,["value"]),Object(a["i"])(R,{name:"2",title:"订单总额",value:k.state.item.amount+" 元"},{default:c((function(){return[Object(a["i"])(B,{title:"实付积分",value:k.state.item.point+" 分"},null,8,["value"]),Object(a["i"])(B,{title:"实付现金",value:k.state.item.cash+" 元"},null,8,["value"])]})),_:1},8,["value"]),Object(a["i"])(R,{name:"3",title:"交易状态",value:k.state.item.result},{default:c((function(){return[Object(a["i"])(B,{title:"创建时间",value:k.state.item.dt_create},null,8,["value"]),Object(a["i"])(B,{title:"付款时间",value:k.state.item.dt_pay},null,8,["value"]),Object(a["i"])(B,{title:"发货时间",value:k.state.item.dt_send},null,8,["value"]),Object(a["i"])(B,{title:"完成时间",value:k.state.item.dt_finish},null,8,["value"])]})),_:1},8,["value"]),Object(a["i"])(R,{name:"4",title:"收货方式",value:0==k.state.item.card?"物流":k.state.item.card<0?"卡密":"提货卡"},{default:c((function(){return[0==k.state.item.card?(Object(a["x"])(),Object(a["f"])("div",{key:0,innerHTML:k.state.item.logistics},null,8,["innerHTML"])):(Object(a["x"])(),Object(a["f"])(D,{key:1,class:"swipe"},{indicator:c((function(t){var e=t.active;return[Object(a["i"])("div",h,Object(a["J"])(e+1)+" / "+Object(a["J"])(k.state.cards.length),1)]})),default:c((function(){return[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(k.state.cards,(function(e,n){return Object(a["x"])(),Object(a["f"])(V,{class:"sitem",key:n,style:{background:e.bg}},{default:c((function(){return[k.state.item.card>0?(Object(a["x"])(),Object(a["f"])("div",s,[Object(a["i"])("div",l,"提货卡号：****"+Object(a["J"])(e.token.substr(4)),1),Object(a["i"])("div",o,[Object(a["i"])(L,{name:"more-o",onClick:function(t){return _.copy(e.token)}},{default:c((function(){return[u]})),_:2},1032,["onClick"]),r,Object(a["i"])(L,{name:"photo-o",onClick:function(t){return _.save(e.token)}},{default:c((function(){return[d]})),_:2},1032,["onClick"])])])):Object(a["g"])("",!0),k.state.item.card<0?(Object(a["x"])(),Object(a["f"])("div",b,[Object(a["i"])("div",f,Object(a["J"])(e.no),1),Object(a["i"])("div",j,[Object(a["i"])(L,{name:"more-o",onClick:function(n){return t.$copy(e.no+"\n"+e.pwd)}},{default:c((function(){return[O]})),_:2},1032,["onClick"])])])):Object(a["g"])("",!0)]})),_:2},1032,["style"])})),128))]})),_:1}))]})),_:1},8,["value"])]})),_:1},8,["modelValue"]),Object(a["i"])("div",m,[Object(a["P"])(Object(a["i"])(U,{type:"primary",text:"立即付款",onClick:t.onClickButton,block:"",round:""},null,8,["onClick"]),[[a["M"],0==k.state.item.status]]),Object(a["P"])(Object(a["i"])(U,{type:"success",text:"确认收货",onClick:t.onClickButton,block:"",round:""},null,8,["onClick"]),[[a["M"],0==k.state.item.card&&2==k.state.item.status]]),Object(a["P"])(Object(a["i"])(U,{type:"danger",text:"申请售后",onClick:t.onClickButton,block:"",round:""},null,8,["onClick"]),[[a["M"],0==k.state.item.card&&3==k.state.item.status]])])]})),_:1},8,["show"]),Object(a["i"])(P,{show:k.state.show2,"onUpdate:show":e[5]||(e[5]=function(t){return k.state.show2=t})},{default:c((function(){return[Object(a["i"])(y,{class:"giftcard",src:k.state.giftcard,width:"300"},{default:c((function(){return[v,p]})),_:1},8,["src"])]})),_:1},8,["show"])]})),_:1})})),g=n("38d7");n("a9df");g["a"].render=k,g["a"].__scopeId="data-v-905e525e";e["default"]=g["a"]},a9df:function(t,e,n){"use strict";n("04a0")}}]);
//# sourceMappingURL=chunk-b8125fa2.d8db12ef.js.map