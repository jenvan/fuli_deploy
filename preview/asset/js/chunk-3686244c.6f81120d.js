(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3686244c"],{"0a9c":function(e,t,n){"use strict";(function(e){var i=n("53ca"),c=n("5530"),a=(n("b0c0"),n("7db0"),n("a15b"),n("d81d"),n("7a23")),o=n("5502"),l=n("2824"),d=n("6c74");t["a"]={components:{BaseLayout:l["a"],VanCode:d["a"]},props:{code:{type:String,default:""}},data:function(){var e=Object(a["E"])(0),t=Object(a["E"])(new Date),n=Object(a["D"])({calendar:!1,type:!0,device:{},order:{},show:!1,popup:!1}),i=Object(a["D"])({id:0,uid:"",code:"",discount:100,pos:"",box:"",name:"",remark:""});return{id:e,date:t,state:n,field:i}},created:function(){this.init()},watch:{id:function(){this.query()},date:function(){this.state.calendar=!1,this.query()}},computed:Object(c["a"])({info:function(){return 0==this.id?"全部设备":this.field.name||"商户编码："+this.field.code},param:function(){return"code="+this.code+"&pwd="+window.localStorage.getItem("pwd")}},Object(o["d"])(["profile"])),methods:Object(c["a"])({init:function(){var t=this;this.$http.post("/o2o/deviceList?"+this.param).then((function(n){t.state.device=n,t.field=e.find(n,{code:t.code}),t.id=t.field.id})).catch((function(e){969==e.rtn&&(t.state.popup=!0)}))},query:function(){var e=this;this.$http.post("/o2o/deviceOrder?"+this.param+"&id="+this.id+"&dt="+this.format(this.date)).then((function(t){e.state.order=t}))},bind:function(){var e=this;this.$http.post("/o2o/deviceBind?"+this.param,this.field).then((function(t){e.state.popup=!1,e.state.show=!1,e.init()}))},choose:function(t){this.state.show=!1,this.id=t,this.field=e.find(this.state.device,{id:t})},format:function(t){if(e.isArray(t))return e.map(t,this.format).join(" ~ ");var n="object"==Object(i["a"])(t)?new Date(t):new Date,c=n.getFullYear(),a=""+(n.getMonth()+1),o=""+n.getDate();return a.length<2&&(a="0"+a),o.length<2&&(o="0"+o),[c,a,o].join("-")},getName:function(t){var n=["被动收款"];return e.isEmpty(t.mobile)||n.push("主动收款（手机）"),e.isEmpty(t.pos)||n.push("主动收款（POS机）"),e.isEmpty(t.box)||n.push("音箱"),n.join("，")},getCode:function(e){return window.location.protocol+"//"+window.location.host+"/#/o2o/"+e+"?code="+this.field.code}},Object(o["c"])(["auth"]))}}).call(this,n("81b0"))},"7db0":function(e,t,n){"use strict";var i=n("23e7"),c=n("b727").find,a=n("44d2"),o="find",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),i({target:"Array",proto:!0,forced:l},{find:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),a(o)},"8dd7":function(e,t,n){"use strict";n("925d")},"925d":function(e,t,n){},eb09:function(e,t,n){"use strict";n.r(t);n("b0c0");var i=n("7a23"),c=Object(i["V"])("data-v-7e00006e");Object(i["C"])("data-v-7e00006e");var a={class:"box"},o=Object(i["j"])("div",{class:"dt"},"按设备筛选",-1),l=Object(i["j"])("div",null,"全部",-1),d=Object(i["j"])("br",null,null,-1),r=Object(i["i"])("设置 "),u=Object(i["j"])("div",{class:"dt"},"按日期筛选",-1),s={class:"type"},b={class:"list"},j={class:"fee"},f=Object(i["j"])("span",{class:"symbol"},"￥",-1),p=Object(i["i"])("暂无记录"),O={class:"popup"},h={class:"title"},m={class:"qrcode"},v=Object(i["i"])("收款码"),g=Object(i["i"])("管理码"),w=Object(i["i"])("绑定 / 修改");Object(i["A"])();var y=c((function(e,t,n,y,V,k){var x=Object(i["H"])("van-icon"),C=Object(i["H"])("van-cell"),_=Object(i["H"])("van-switch"),U=Object(i["H"])("van-empty"),H=Object(i["H"])("van-calendar"),L=Object(i["H"])("van-code"),z=Object(i["H"])("van-field"),D=Object(i["H"])("van-stepper"),E=Object(i["H"])("van-button"),I=Object(i["H"])("van-popup"),q=Object(i["H"])("BaseLayout");return Object(i["z"])(),Object(i["g"])(q,{title:"商家账单",height:"0"},{default:c((function(){return[Object(i["j"])("div",a,[Object(i["j"])(C,{class:"filter",icon:"filter-o",onClick:t[2]||(t[2]=function(e){return V.state.show=!V.state.show})},{title:c((function(){return[o]})),value:c((function(){return[Object(i["j"])(x,{name:0==V.id?"checked":"circle",size:"18",color:"#F66",onClick:t[1]||(t[1]=Object(i["U"])((function(e){return V.id=0}),["stop"]))},null,8,["name"]),l]})),label:c((function(){return[Object(i["i"])(Object(i["L"])(k.info),1)]})),_:1}),(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["F"])(V.state.device,(function(e,n){return Object(i["S"])((Object(i["z"])(),Object(i["g"])(C,{key:n,class:{device:!0,active:V.id==e.id},title:e.name||e.code,border:!1,onClick:function(t){return k.choose(e.id)}},{label:c((function(){return[Object(i["i"])(" 商户编码："+Object(i["L"])(e.code),1),d,Object(i["i"])("收款方式："+Object(i["L"])(k.getName(e)),1)]})),value:c((function(){return[Object(i["j"])(x,{class:"icon",name:V.id==e.id?"checked":"circle",size:"18"},null,8,["name"])]})),extra:c((function(){return[Object(i["j"])("div",{class:"extra",onClick:t[3]||(t[3]=function(e){return V.state.popup=!0})},[r,Object(i["j"])(x,{name:"arrow-down",size:"16"})])]})),_:2},1032,["class","title","onClick"])),[[i["O"],V.state.show]])})),128)),Object(i["j"])(C,{class:"filter",icon:"calendar-o",label:k.format(V.date),onClick:t[5]||(t[5]=Object(i["U"])((function(e){return V.state.calendar=!0}),["stop"]))},{title:c((function(){return[u]})),value:c((function(){return[Object(i["j"])(_,{modelValue:V.state.type,"onUpdate:modelValue":t[4]||(t[4]=function(e){return V.state.type=e}),size:"14"},null,8,["modelValue"]),Object(i["j"])("div",s,Object(i["L"])(V.state.type?"单":"多")+"日",1)]})),_:1},8,["label"]),Object(i["j"])(C,{icon:"chart-trending-o"},{title:c((function(){return[Object(i["i"])("共收款 "+Object(i["L"])(V.state.order.total||0)+" 笔，合计 "+Object(i["L"])(V.state.order.amount||0)+" 元",1)]})),_:1}),Object(i["j"])("div",b,[(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["F"])(V.state.order.list,(function(t,n){return Object(i["z"])(),Object(i["g"])(C,{key:n,title:t.dt,label:t.remark,onClick:function(n){return e.$copy(t.remark)}},{value:c((function(){return[Object(i["j"])("div",j,[f,Object(i["i"])(Object(i["L"])(t.fee),1)])]})),_:2},1032,["title","label","onClick"])})),128)),Object(i["S"])(Object(i["j"])(U,null,{default:c((function(){return[p]})),_:1},512),[[i["O"],!V.state.order||0==V.state.order.total]])])]),Object(i["j"])(H,{show:V.state.calendar,"onUpdate:show":t[6]||(t[6]=function(e){return V.state.calendar=e}),type:V.state.type?"single":"range","max-range":31,"min-date":new Date("2022-01-01"),"max-date":new Date,"default-date":V.date,"show-confirm":!1,onConfirm:t[7]||(t[7]=function(e){return V.date=e})},null,8,["show","type","min-date","max-date","default-date"]),Object(i["j"])(I,{show:V.state.popup,"onUpdate:show":t[15]||(t[15]=function(e){return V.state.popup=e}),position:"top",style:{height:"100%"},"close-on-popstate":!0,closeable:""},{default:c((function(){return[Object(i["j"])("div",O,[Object(i["j"])("div",h,"商户编码："+Object(i["L"])(V.field.code),1),Object(i["j"])("div",m,[Object(i["j"])(L,{type:"qrimage",value:k.getCode("pay"),width:"100",margin:"0"},{default:c((function(){return[v]})),_:1},8,["value"]),Object(i["j"])(L,{type:"qrimage",value:k.getCode("biz"),width:"100",margin:"0"},{default:c((function(){return[g]})),_:1},8,["value"])]),Object(i["j"])(z,{modelValue:V.field.uid,"onUpdate:modelValue":t[8]||(t[8]=function(e){return V.field.uid=e}),type:"text",label:"绑定用户",placeholder:"用户 UID","input-align":"right"},null,8,["modelValue"]),Object(i["j"])(C,{center:"",title:"会员折扣"},{"right-icon":c((function(){return[Object(i["j"])(D,{modelValue:V.field.discount,"onUpdate:modelValue":t[9]||(t[9]=function(e){return V.field.discount=e}),min:20,max:120},null,8,["modelValue"])]})),_:1}),Object(i["j"])(z,{modelValue:V.field.mobile,"onUpdate:modelValue":t[10]||(t[10]=function(e){return V.field.mobile=e}),type:"text",label:"手机扫码收款",placeholder:"手机号","input-align":"right"},null,8,["modelValue"]),Object(i["j"])(z,{modelValue:V.field.pos,"onUpdate:modelValue":t[11]||(t[11]=function(e){return V.field.pos=e}),type:"text",label:"POS扫码收款",placeholder:"机器 IMEI","input-align":"right"},null,8,["modelValue"]),Object(i["j"])(z,{modelValue:V.field.box,"onUpdate:modelValue":t[12]||(t[12]=function(e){return V.field.box=e}),type:"text",label:"到账提示音箱",placeholder:"机器 IMEI","input-align":"right"},null,8,["modelValue"]),Object(i["j"])(z,{modelValue:V.field.name,"onUpdate:modelValue":t[13]||(t[13]=function(e){return V.field.name=e}),type:"text",label:"名称",placeholder:"便于区分对账，可填商户、收银台名称","input-align":"right"},null,8,["modelValue"]),Object(i["j"])(z,{modelValue:V.field.remark,"onUpdate:modelValue":t[14]||(t[14]=function(e){return V.field.remark=e}),type:"textarea",label:"备注","input-align":"right",placeholder:"便于区分对账，可以不填"},null,8,["modelValue"]),Object(i["j"])(E,{type:"primary",class:"bind",block:"",round:"",onClick:k.bind},{default:c((function(){return[w]})),_:1},8,["onClick"])])]})),_:1},8,["show"])]})),_:1})})),V=n("0a9c"),k=(n("8dd7"),n("6b0d")),x=n.n(k);const C=x()(V["a"],[["render",y],["__scopeId","data-v-7e00006e"]]);t["default"]=C}}]);