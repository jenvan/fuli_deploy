{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./src/views/JDMall/Bill.vue?e3c8","webpack:///./src/views/JDMall/Bill.vue","webpack:///./src/views/JDMall/Bill.vue?10bc","webpack:///./node_modules/core-js/internals/array-reduce.js"],"names":["$","$reduce","left","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","STRICT_METHOD","CHROME_BUG","target","proto","forced","reduce","callbackfn","this","arguments","length","undefined","class","title","state","addr","name","size","icon","mobile","label","province","city","county","address","to","is-link","center","list","item","index","key","desc","spec","thumb","image","price","num","value","amount","freight","profile","cash","right-icon","useCash","point","usePoint","button-text","style","disabled","total","buy","top","deposit","__exports__","render","components","BaseLayout","data","created","cartAddress","$http","get","then","_","result","v","k","round","sku","push","arr","addressCode","split","JSON","stringify","computed","max","methods","$router","isEmpty","$toast","type","post","id","replace","aFunction","toObject","IndexedObject","toLength","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","i","TypeError","module","exports","right"],"mappings":"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","file":"asset/js/chunk-856ab0fe.8159bdb2.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Bill.vue?vue&type=style&index=0&id=68349334&scoped=true&lang=css\"","<template>\n  <BaseLayout title=\"确认订单\">\n\n    <div class=\"main\">\n\n      <van-cell class=\"card\" v-if=\"state.addr && state.addr.name\" size=\"large\" icon=\"location\" :title=\"state.addr.name + ' ' + state.addr.mobile\" :label=\"state.addr.province + state.addr.city + state.addr.county + state.addr.address\" :to=\"'/my/address/change?target=' + target\" is-link center></van-cell>\n      <van-cell class=\"card\" v-else size=\"large\" title=\"新增收货地址\" :to=\"'/my/address/add?target=' + target\" is-link></van-cell>\n    \n      <van-card class=\"item\" v-for=\"(item, index) in state.list\" :key=\"index\" :title=\"item.title\" :desc=\"item.spec\" :thumb=\"item.image\" :price=\"item.price\" :num=\"item.num\" />\n      \n      <van-cell-group class=\"fee\">\n        <van-cell title=\"商品总金额\" :value=\"state.amount + ' 元'\"></van-cell>\n        <van-cell title=\"商品总运费\" :value=\"state.freight + ' 元'\"></van-cell>\n        <van-cell title=\"使用优惠券\" value=\"无\" is-link></van-cell>\n        <van-cell title=\"使用余额支付\" :value=\"'（' + profile.cash + ' 可用）'\">\n          <template #right-icon>&nbsp;<van-switch v-model=\"state.useCash\" size=\"24\" /></template>\n        </van-cell>\n        <van-cell title=\"使用积分支付\" :value=\"'（' + profile.point + ' 可用）'\">\n          <template #right-icon>&nbsp;<van-switch v-model=\"state.usePoint\" size=\"24\" /></template>\n        </van-cell>\n      </van-cell-group>\n\n      <van-submit-bar label=\"待支付总金额：\" button-text=\"结算\" :style=\"{bottom:'0px'}\" :price=\"amount*100\" :disabled=\"total == 0 || amount>0\" @submit=\"buy\">\n        <template #top>\n          <div class=\"notify\" v-show=\"total-profile.cash-profile.point > 0\" @click=\"deposit\">账户资产不足，请充值后再来结算 &gt;&gt;&gt;</div>\n        </template>\n      </van-submit-bar>\n\n    </div>\n  </BaseLayout>\n</template>\n\n<style scoped>\n.main {\n  position: relative;\n  margin: 10px;\n  min-height: 500px;\n  padding-bottom: 60px;\n}\n.card, .item, .fee {\n  margin-bottom: 10px;\n  background: #FFF;\n  border-radius: 5px;\n  overflow: hidden;\n}\n.card::before {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  background: repeating-linear-gradient(-45deg,#ff6c6c 0,#ff6c6c 20%,transparent 0,transparent 25%,#1989fa 0,#1989fa 45%,transparent 0,transparent 50%);\n  background-size: 80px;\n  content: '';\n}\n\n.notify {\n  padding: 8px;\n  background: #FFC;\n  color: #F96;\n  font-size: 12px;\n  text-align: center;\n}\n.red {\n  color: red;\n}\n</style>\n\n<script>\nimport {reactive, ref} from 'vue'\nimport {mapState, mapGetters, mapMutations} from 'vuex'\nimport BaseLayout from '@/components/BaseLayout.vue'\n\nexport default {\n  components: {BaseLayout},\n\n  data() {\n    const state = reactive({\n      addr: {},\n      list: [],\n      amount: 0,\n      freight: 0,\n      useCash: false,\n      usePoint: false,\n    });\n    return {state};\n  },\n\n  created() {\n    \n    this.state.addr = this.profile.cartAddress;\n\n    this.$http.get(\"/mall/cartlist?channel=1&status=1\").then((data) => {\n      this.state.list = data;\n\n      this.state.amount = _.reduce(this.state.list, function(result, v, k) {\n        result = _.round(result + v.price * v.num, 2);\n        return result;\n      }, 0);\n\n      let sku = _.reduce(this.state.list, function(result, v, k) {\n        result.push({\"skuId\":v.sku, \"num\":v.num});\n        return result;\n      }, []);\n\n      let arr = this.addressCode.split(\"_\");\n      this.$http.get(\"/jdmall/query?method=order/getFreight&paymentType=4&sku=\" + JSON.stringify(sku) + \"&province=\" + arr[0] + \"&city=\" + arr[1] + \"&county=\" + arr[2] + \"&town=\" + arr[3]).then((data) => {\n        this.state.freight = data.freight;\n      });\n\n    });\n  },\n\n  computed: {\n    target() {\n      //return escape(this.$route.fullPath);\n      return \"/jdmall/cart\";\n    },\n\n    total() {\n      return this.state.amount + this.state.freight;\n    },\n\n    amount() {\n      let amount = 0;\n      if (this.state.usePoint && this.state.useCash)\n        amount = this.total - this.profile.point - this.profile.cash\n      else if (this.state.usePoint)\n        amount = this.total - this.profile.point;\n      else if (this.state.useCash)\n        amount = this.total - this.profile.cash;\n      else\n        amount = this.total;\n      return _.max([amount, 0]);\n    },\n    ...mapState([\"profile\"]),\n    ...mapGetters([\"addressCode\"]),\n  },\n\n  methods: {\n    deposit() {\n      this.$router.push(\"/my/deposit\");\n    },\n\n    buy() {\n      if (_.isEmpty(this.state.addr)){\n        return this.$toast(\"请先选择收货地址\");\n      }\n\n      let type = \"\";\n      this.state.usePoint && !this.state.useCash && (type = \"point\");\n      !this.state.usePoint && this.state.useCash && (type = \"cash\");\n\n      this.$http.post(\"/jdmall/bill?aid=\" + this.state.addr.id).then((data) => {\n        this.$http.post(\"/jdmall/pay?id=\" + data[\"id\"] + \"&type=\" + type).then(() => {\n          this.$router.replace(\"/my/order\");\n        });\n      });\n    }\n  }\n}\n</script>\n","import { render } from \"./Bill.vue?vue&type=template&id=68349334&scoped=true\"\nimport script from \"./Bill.vue?vue&type=script&lang=js\"\nexport * from \"./Bill.vue?vue&type=script&lang=js\"\n\nimport \"./Bill.vue?vue&type=style&index=0&id=68349334&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/fuli/fuli/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-68349334\"]])\n\nexport default __exports__","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n"],"sourceRoot":""}