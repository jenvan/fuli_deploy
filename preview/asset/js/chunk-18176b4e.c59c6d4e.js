(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18176b4e"],{"07b3":function(t,e,a){"use strict";a("6dae")},"38d7":function(t,e,a){"use strict";(function(t){var n=a("5530"),c=a("7a23"),i=a("2824");e["a"]={components:{BaseLayout:i["a"]},setup:function(){var t=Object(c["B"])({refreshing:!1,loading:!1,finished:!1,list:[],offset:0,limit:20,show1:!1,item:{},contact:{},cards:[],show2:!1,giftcard:""}),e=Object(c["C"])("4");Object(c["C"])(0);return{state:t,choose:e}},mounted:function(){this.onRefresh()},computed:{},methods:{onRefresh:function(){this.state.loading=!0,this.state.finished=!1,this.state.offset=0,this.state.list=[],this.onLoad()},onLoad:function(){var t=this;this.$http.get("/mall/orderlist?offset="+this.state.offset+"&limit="+this.state.limit).then((function(e){for(var a in t.state.refreshing=!1,(0==e.length||e.length<t.state.limit)&&(t.state.finished=!0),t.state.loading=!1,t.state.offset+=e.length,e){var c=e[a];t.state.list.push(Object(n["a"])(Object(n["a"])({},c),{status:["未付款","已付款","已发货","交易成功","交易关闭"][c.status],color:["#CCC","#666","#00C","#0C0","#C00"][c.status]}))}}))},popup:function(e){var a=this;this.state.contact={},this.state.cards=[],this.$http.post("/mall/orderDetail?id="+e.id).then((function(n){if(a.state.show1=!0,a.state.item=n,a.state.item.result=["未付款","已付款","已发货","交易成功","交易关闭"][n.status],e.card<=0)a.state.contact=n.contact;else{for(var c in n.cards)n.cards[c].bg="rgb("+t.random(150,250)+","+t.random(150,250)+","+t.random(150,250)+")";a.state.cards=n.cards}}))},copy:function(t){var e="亲，送你一张提货卡略表心意！请关注微信公众号“福鲤社”，点击下方菜单提货，提货卡号："+t;this.$copy(e)},save:function(t){this.state.show2=!0,this.state.giftcard=this.$host+"/mall/card?token="+t}}}}).call(this,a("81b0"))},"6dae":function(t,e,a){},"957a":function(t,e,a){"use strict";a.r(e);a("b0c0");var n=a("7a23"),c=Object(n["R"])("data-v-1bfa6ad7");Object(n["A"])("data-v-1bfa6ad7");var i={class:"van-ellipsis"},s={class:"card"},l={class:"tool"},o=Object(n["h"])(" 复制卡号"),u=Object(n["h"])("   "),r=Object(n["h"])(" 显示卡片"),b={class:"indicator"},d={class:"action"},f=Object(n["i"])("br",null,null,-1),j=Object(n["h"])("长按图片保存到手机或分享给好友");Object(n["y"])();var O=c((function(t,e,a,O,h,m){var v=Object(n["F"])("van-tag"),p=Object(n["F"])("van-col"),g=Object(n["F"])("van-image"),_=Object(n["F"])("van-row"),k=Object(n["F"])("van-list"),w=Object(n["F"])("van-pull-refresh"),C=Object(n["F"])("van-icon"),y=Object(n["F"])("van-cell"),x=Object(n["F"])("van-collapse-item"),F=Object(n["F"])("van-swipe-item"),J=Object(n["F"])("van-swipe"),L=Object(n["F"])("van-collapse"),R=Object(n["F"])("van-button"),V=Object(n["F"])("van-action-sheet"),B=Object(n["F"])("van-popup"),D=Object(n["F"])("BaseLayout");return Object(n["x"])(),Object(n["f"])(D,{title:"我的订单"},{default:c((function(){return[Object(n["i"])(w,{modelValue:O.state.refreshing,"onUpdate:modelValue":e[2]||(e[2]=function(t){return O.state.refreshing=t}),onRefresh:m.onRefresh},{default:c((function(){return[Object(n["i"])(k,{class:"list",loading:O.state.loading,"onUpdate:loading":e[1]||(e[1]=function(t){return O.state.loading=t}),finished:O.state.finished,"loading-text":"正在请求数据 ...","finished-text":"没有更多了","immediate-check":!1,onLoad:m.onLoad},{default:c((function(){return[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(O.state.list,(function(t,e){return Object(n["x"])(),Object(n["f"])(_,{class:"block",align:"center",key:e,onClick:function(e){return m.popup(t)}},{default:c((function(){return[Object(n["i"])(p,{span:"24",class:"dt"},{default:c((function(){return[Object(n["i"])(v,{color:"#CCC"},{default:c((function(){return[Object(n["h"])(Object(n["J"])(t.dt_create),1)]})),_:2},1024)]})),_:2},1024),Object(n["i"])(p,{span:"12",class:"id"},{default:c((function(){return[Object(n["h"])("# "+Object(n["J"])(t.id),1)]})),_:2},1024),Object(n["i"])(p,{span:"12",class:"status",style:{color:t.color}},{default:c((function(){return[Object(n["h"])(Object(n["J"])(t.status),1)]})),_:2},1032,["style"]),Object(n["i"])(p,{span:"19",class:"detail"},{default:c((function(){return[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(t.detail,(function(t,e){return Object(n["x"])(),Object(n["f"])(g,{class:"img",key:e,src:t.image,fit:"contain"},null,8,["src"])})),128))]})),_:2},1024),Object(n["i"])(p,{span:"5",class:"amount"},{default:c((function(){return[Object(n["i"])("div",null,"共 "+Object(n["J"])(t.total)+" 件",1),Object(n["i"])("div",null,"￥ "+Object(n["J"])(t.amount),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1},8,["loading","finished","onLoad"])]})),_:1},8,["modelValue","onRefresh"]),Object(n["i"])(V,{show:O.state.show1,"onUpdate:show":e[4]||(e[4]=function(t){return O.state.show1=t}),title:"订单详情"},{default:c((function(){return[Object(n["i"])(L,{class:"bill",modelValue:O.choose,"onUpdate:modelValue":e[3]||(e[3]=function(t){return O.choose=t}),accordion:""},{default:c((function(){return[Object(n["i"])(x,{name:"1",title:"商品数量",value:(O.state.item.card<=0?O.state.item.total:O.state.item.card+" x "+O.state.item.total/O.state.item.card)+" 件"},{default:c((function(){return[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(O.state.item.detail,(function(t,e){return Object(n["x"])(),Object(n["f"])(y,{key:e,label:t.spec,style:{alignItems:"center"}},{icon:c((function(){return[Object(n["i"])(C,{class:"img",name:t.image,size:"32"},null,8,["name"])]})),title:c((function(){return[Object(n["i"])("div",i,Object(n["J"])(t.title),1)]})),extra:c((function(){return[Object(n["h"])("x "+Object(n["J"])(t.num),1)]})),_:2},1032,["label"])})),128))]})),_:1},8,["value"]),Object(n["i"])(x,{name:"2",title:"订单总额",value:O.state.item.amount+" 元"},{default:c((function(){return[Object(n["i"])(y,{title:"实付积分",value:O.state.item.point+" 分"},null,8,["value"]),Object(n["i"])(y,{title:"实付现金",value:O.state.item.cash+" 元"},null,8,["value"])]})),_:1},8,["value"]),Object(n["i"])(x,{name:"3",title:"交易状态",value:O.state.item.result},{default:c((function(){return[Object(n["i"])(y,{title:"创建时间",value:O.state.item.dt_create},null,8,["value"]),Object(n["i"])(y,{title:"付款时间",value:O.state.item.dt_pay},null,8,["value"]),Object(n["i"])(y,{title:"发货时间",value:O.state.item.dt_send},null,8,["value"]),Object(n["i"])(y,{title:"完成时间",value:O.state.item.dt_finish},null,8,["value"])]})),_:1},8,["value"]),Object(n["i"])(x,{name:"4",title:"收货方式",value:0==O.state.item.card?"物流":"提货卡"},{default:c((function(){return[0==O.state.item.card?(Object(n["x"])(),Object(n["f"])(y,{key:0,title:O.state.contact.name+"（"+O.state.contact.mobile+"）"},{label:c((function(){return[Object(n["h"])(Object(n["J"])(O.state.contact.province)+" "+Object(n["J"])(O.state.contact.city)+" "+Object(n["J"])(O.state.contact.district)+" "+Object(n["J"])(O.state.contact.address),1)]})),_:1},8,["title"])):(Object(n["x"])(),Object(n["f"])(J,{key:1,class:"swipe"},{indicator:c((function(t){var e=t.active;return[Object(n["i"])("div",b,Object(n["J"])(e+1)+" / "+Object(n["J"])(O.state.cards.length),1)]})),default:c((function(){return[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(O.state.cards,(function(t,e){return Object(n["x"])(),Object(n["f"])(F,{class:"sitem",key:e,style:{background:t.bg}},{default:c((function(){return[Object(n["i"])("div",s,"提货卡号：****"+Object(n["J"])(t.token.substr(4)),1),Object(n["i"])("div",l,[Object(n["i"])(C,{name:"more-o",onClick:function(e){return m.copy(t.token)}},{default:c((function(){return[o]})),_:2},1032,["onClick"]),u,Object(n["i"])(C,{name:"photo-o",onClick:function(e){return m.save(t.token)}},{default:c((function(){return[r]})),_:2},1032,["onClick"])])]})),_:2},1032,["style"])})),128))]})),_:1}))]})),_:1},8,["value"])]})),_:1},8,["modelValue"]),Object(n["i"])("div",d,[Object(n["P"])(Object(n["i"])(R,{type:"danger",text:"确认收货",onClick:t.onClickButton,block:"",round:""},null,8,["onClick"]),[[n["M"],2==O.state.item.status]]),Object(n["P"])(Object(n["i"])(R,{type:"danger",text:"申请售后",onClick:t.onClickButton,block:"",round:""},null,8,["onClick"]),[[n["M"],3==O.state.item.status]])])]})),_:1},8,["show"]),Object(n["i"])(B,{show:O.state.show2,"onUpdate:show":e[5]||(e[5]=function(t){return O.state.show2=t})},{default:c((function(){return[Object(n["i"])(g,{class:"giftcard",src:O.state.giftcard,width:"300"},{default:c((function(){return[f,j]})),_:1},8,["src"])]})),_:1},8,["show"])]})),_:1})})),h=a("38d7");a("07b3");h["a"].render=O,h["a"].__scopeId="data-v-1bfa6ad7";e["default"]=h["a"]}}]);
//# sourceMappingURL=chunk-18176b4e.c59c6d4e.js.map