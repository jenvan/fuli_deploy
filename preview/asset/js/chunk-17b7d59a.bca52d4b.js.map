{"version":3,"sources":["webpack:///./src/views/Recharge/Mobile.vue","webpack:///./src/views/Recharge/Mobile.vue?b3bc","webpack:///./src/views/Recharge/Mobile.vue?969a"],"names":["class","title","nonavbar","bg","type","state","mobile","placeholder","active","config","item","index","key","name","list","v","k","value","onChoose","label","rate","icon","text","popup","$router","push","onRecharge","show","contact","__exports__","render","components","BaseLayout","data","price","created","this","authorized","auth","window","location","replace","test","host","escape","$route","fullPath","$http","get","then","computed","valid","methods","WeixinJSBridge","$dialog","alert","message","theme","invoke","res","err_msg","$toast","loading","forbidClick","setTimeout","recharge","oid","post","_","isEmpty"],"mappings":"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","file":"asset/js/chunk-17b7d59a.bca52d4b.js","sourcesContent":["<template>\n  <BaseLayout title=\"话费充值\" nonavbar bg=\"linear-gradient(180deg, var(--van-tabs-default-color), #F66 30%, #F6F6F6 50%, #F6F6F6)\">\n\n    <div class=\"panel\">\n\n      <div class=\"title\">全国手机话费充值</div>\n      <input class=\"mobile\" type=\"mobile\" v-model=\"state.mobile\" placeholder=\"请输入手机号码\" />\n\n      <van-tabs class=\"tabs\" type=\"card\" v-model:active=\"state.type\">\n        <van-tab v-for=\"(item,index) in state.config\" :key=\"index\" :title=\"item.name\">\n          <div class=\"list\">\n            <van-cell class=\"goods\" v-for=\"(v,k) in item.list\" :key=\"k\" :class=\"{active: state.value == v}\" @click=\"onChoose(item, v)\">\n              <template #title><span class=\"value\">{{v}}</span> 元</template>\n              <template #label><span class=\"price\">折扣价 ￥{{item.rate * v}}</span></template>\n            </van-cell>\n          </div>\n        </van-tab>\n      </van-tabs>\n\n      <ul class=\"notice\">\n        <dt>充值说明</dt>\n        <dd>1、本页面提供话费充值专享优惠服务；快充业务在支付成功后预计30分钟内话费到账；慢充业务在支付成功后一般2-4小时话费到账，最晚72小时内到账，请留意【充值成功通知】短信。</dd>\n        <dd>2、如遇高峰或其他问题未能充值到账，系统将自动原路退款，敬请谅解。</dd>\n        <dd>3、携号转网、副卡不支持充值，下单30分钟内请联系客服申请退款，如超时恕不退款。</dd>\n        <dd>4、因本业务为第三方代充值服务，故无法提供充值发票，有开票需求的请勿充值。</dd>\n        <dd>5、本业务由“福鲤社”提供技术支持，如有疑问请点击页面左下角联系客服。</dd>\n        <dd class=\"recommend\">** 企业团充可享更高折扣，详询客服 **</dd>\n      </ul>\n\n    </div>\n\n    <van-action-bar class=\"bar\">\n      <van-action-bar-icon icon=\"chat-o\" text=\"客服\" @click=\"state.popup=true\" />\n      <van-action-bar-icon icon=\"cash-on-deliver\" text=\"订单\" @click=\"$router.push('/recharge/record')\" />\n      <van-action-bar-button type=\"danger\" text=\"立即充值\" @click=\"onRecharge\" />\n    </van-action-bar>\n\n    <van-popup v-model:show=\"state.popup\"><div class=\"contact\" v-html=\"config.contact\"></div></van-popup>\n\n  </BaseLayout>\n</template>\n\n<style scoped>\n.panel {\n  padding: 10px;\n}\n\n.title {\n  margin-top: 20px;\n  color: #FFF;\n  font-size: 12px;\n}\n\n.mobile {\n  width: 100%;\n  padding: 10px 0;\n  background: transparent;\n  border:0;\n  border-bottom: solid 1px #FCC;\n  color: #FFF;\n  font-size: 24px; \n}\n.mobile::-webkit-input-placeholder {\n  color: #FCC;\n}\n\n.tabs {\n  margin: 15px 0;\n  padding: 15px 5px;\n  background: #FFF;\n  border-radius: 5px;\n}\n.list {\n  margin-top: 10px;\n  display: flex;\n  flex-flow: row nowrap;\n  align-content: space-between;\n}\n.goods {\n  margin: 5px;\n  padding: 15px 5px;\n  background: #F9F9F9;\n  border: solid 1px #CCC;\n  border-radius: 5px;\n  text-align: center;\n  overflow: hidden;\n}\n.goods.active {\n  background: #FEE;\n  border-color: #F00;\n}\n.goods .value {\n  color: #333;\n  font-size: 21px;\n  font-weight: 600;\n}\n.goods .price {\n  color: #F66;\n  font-size: 12px;\n}\n\n.notice {\n  padding: 10px;\n  background: #FFF;\n  border-radius: 5px;\n  color: #666;\n  font-size: 12px;\n  line-height: 21px;\n}\n.notice dt {\n  color: #333;\n  font-weight: 600;\n}\n.notice dd {\n  margin: 5px 0;\n  padding: 0px;\n}\n.recommend {\n  color: #F00;\n}\n\n.bar {\n  padding-left: 10px;\n}\n\n.contact {\n  padding: 20px;\n  border-radius: 10px;\n}\n</style>\n\n<script>\nimport {reactive, ref} from 'vue'\nimport {mapState, mapGetters, mapMutations} from 'vuex'\nimport BaseLayout from '@/components/BaseLayout.vue'\n\nexport default {\n  components: {BaseLayout},\n\n  data() {\n    const state = reactive({\n      mobile: \"\",\n      type: 0,\n      value: 0,\n      price: 0,\n      popup: false,\n\n      config: [{\n        name: \"98折快充\",\n        list: [50, 100, 200],\n        rate: 0.98,\n      },{\n        name: \"95折慢充\",\n        list: [50, 100, 200],\n        rate: 0.95,\n      },],\n    });\n    return {state};\n  },\n\n  created() {\n    if (!this.authorized){\n      this.auth(null);\n      return window.location.replace(\"http://api.fuchijihua.com/wechat/?test=\" + (/(192|test)/.test(window.location.host) ? 1 : 0) + \"&page=\" + escape(this.$route.fullPath));\n    }\n\n    this.$http.get(\"/digital/rechargemobile\").then((data) => {\n      this.state.config = data;\n    });\n  },\n\n  computed: {\n    valid() {\n      return /^1[\\d]{10}$/.test(this.state.mobile) && this.state.value > 0;\n    },\n\n    ...mapState([\"config\", \"profile\"]),\n    ...mapGetters([\"authorized\"]),\n  },\n\n  methods: {\n    onChoose(item, v) {\n      this.state.value = v;\n      this.state.price = item.rate * v;\n    },\n    onRecharge(){\n      if (!this.valid)\n        return this.$toast(\"请填写正确的手机号码并选择充值金额\");\n      \n      if (typeof WeixinJSBridge == \"undefined\") {\n        return this.$dialog.alert({\n          title: \"环境不支持\",\n          message: \"请在微信中打开本充值页面\",\n          theme: \"round-button\",\n        });\n      }\n\n      this.$http.get(\"/digital/rechargemobile?mobile=\" + this.state.mobile + \"&type=\" + this.state.type + \"&value=\" + this.state.value).then((data) => {\n        WeixinJSBridge.invoke(\"getBrandWCPayRequest\", data, (res) => {\n          if (res.err_msg != \"get_brand_wcpay_request:ok\"){\n            return this.$dialog.alert({message:\"微信支付失败，请重试！\"});\n          }\n          this.$toast.loading({\n            message: \"订单生成中...\",\n            forbidClick: true,\n          });\n          return setTimeout(() => {\n            this.recharge(data.oid);\n          }, 3000);\n        });\n      });\n    },\n\n    recharge(oid) {\n      this.$http.post(\"/digital/rechargemobile?oid=\" + oid).then((data) => {\n        if (!_.isEmpty(data) && typeof data.oid != \"undefined\"){\n          return setTimeout(() => {\n            this.recharge(data.oid);\n          }, 3000);\n        }\n        return this.$dialog.alert({\n          title: \"订单生成完毕\",\n          message: \"请点击下方“订单”查看充值到账情况\",\n          theme: \"round-button\",\n        });\n      });\n    },\n\n    ...mapMutations([\"auth\"]),\n  }\n}\n</script>\n","import { render } from \"./Mobile.vue?vue&type=template&id=0989afba&scoped=true\"\nimport script from \"./Mobile.vue?vue&type=script&lang=js\"\nexport * from \"./Mobile.vue?vue&type=script&lang=js\"\n\nimport \"./Mobile.vue?vue&type=style&index=0&id=0989afba&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/fuli/fuli/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0989afba\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Mobile.vue?vue&type=style&index=0&id=0989afba&scoped=true&lang=css\""],"sourceRoot":""}