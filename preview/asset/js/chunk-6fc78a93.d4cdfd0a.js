(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fc78a93"],{"0a9c":function(e,t,n){"use strict";(function(e){var a=n("53ca"),o=n("5530"),i=(n("b0c0"),n("7db0"),n("a15b"),n("d81d"),n("7a23")),c=n("5502"),l=n("2824"),r=n("6c74");t["a"]={components:{BaseLayout:l["a"],VanCode:r["a"]},props:{code:{type:String,default:""}},data:function(){var e=Object(i["E"])(0),t=Object(i["E"])(new Date),n=Object(i["D"])({calendar:!1,type:!0,device:{},order:{},show:!1,popup1:!1,popup2:!1,keyboard:!1,password:""}),a=Object(i["D"])({id:0,uid:"",code:this.code,discount:100,pos:"",box:"",pwd:"",name:"",remark:""});return{id:e,date:t,state:n,field:a}},created:function(){this.init()},watch:{id:function(){this.query()},date:function(){this.state.calendar=!1,this.query()}},computed:Object(o["a"])(Object(o["a"])({info:function(){return 0==this.id?"全部设备":this.field.name||"商户编码："+this.field.code},param:function(){return"code="+this.field.code+"&pwd="+this.state.password}},Object(c["d"])(["profile"])),Object(c["b"])(["uid"])),methods:Object(o["a"])({init:function(){var t=this;this.$http.post("/o2o/deviceList?"+this.param).then((function(n){t.state.device=n,t.field=e.find(n,{code:t.code}),t.id=t.field.id,t.state.popup2=!1})).catch((function(e){969==e.rtn&&(t.state.popup1=!0,t.field.uid=t.uid),968==e.rtn&&(t.state.popup2=!0)}))},query:function(){var e=this;this.$http.post("/o2o/deviceOrder?"+this.param+"&id="+this.id+"&dt="+this.format(this.date)).then((function(t){e.state.order=t}))},bind:function(){var e=this;this.$http.post("/o2o/deviceBind?"+this.param,this.field).then((function(t){e.state.popup1=!1,e.state.show=!1,e.init(),e.$dialog.alert({message:"操作成功",theme:"round-button"})})).catch((function(t){e.$dialog.alert({message:t.msg,theme:"round-button"})}))},choose:function(t){this.state.show=!1,this.id=t,this.field=e.find(this.state.device,{id:t})},format:function(t){if(e.isArray(t))return e.map(t,this.format).join(" ~ ");var n="object"==Object(a["a"])(t)?new Date(t):new Date,o=n.getFullYear(),i=""+(n.getMonth()+1),c=""+n.getDate();return i.length<2&&(i="0"+i),c.length<2&&(c="0"+c),[o,i,c].join("-")},getName:function(t){var n=["被动收款"];return e.isEmpty(t.mobile)||n.push("主动收款（手机）"),e.isEmpty(t.pos)||n.push("主动收款（POS机）"),e.isEmpty(t.box)||n.push("音箱"),n.join("，")},getCode:function(e){return window.location.protocol+"//"+window.location.host+"/#/o2o/"+e+"?code="+this.field.code}},Object(c["c"])(["auth"]))}}).call(this,n("81b0"))},"46d7":function(e,t,n){"use strict";n("79cf")},"79cf":function(e,t,n){},"7db0":function(e,t,n){"use strict";var a=n("23e7"),o=n("b727").find,i=n("44d2"),c="find",l=!0;c in[]&&Array(1)[c]((function(){l=!1})),a({target:"Array",proto:!0,forced:l},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(c)},eb09:function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23"),o=Object(a["V"])("data-v-25b85cae");Object(a["C"])("data-v-25b85cae");var i=Object(a["i"])(" "),c={class:"box"},l=Object(a["j"])("div",{class:"dt"},"按设备筛选",-1),r=Object(a["j"])("div",null,"全部",-1),u=Object(a["j"])("br",null,null,-1),d=Object(a["i"])("设置 "),s=Object(a["j"])("div",{class:"dt"},"按日期筛选",-1),b={class:"type"},p={class:"list"},j={class:"fee"},f=Object(a["j"])("span",{class:"symbol"},"￥",-1),O=Object(a["i"])("暂无记录"),h={class:"popup"},m={class:"title"},v={class:"qrcode"},g=Object(a["i"])("收款码"),w=Object(a["i"])("管理码"),y=Object(a["j"])("div",{class:"remark"},"注：商家只能修改表单后四项，修改其他项请联系商务",-1),k=Object(a["i"])("绑定 / 修改");Object(a["A"])();var V=o((function(e,t,n,V,x,C){var U=Object(a["H"])("van-icon"),_=Object(a["H"])("van-cell"),E=Object(a["H"])("van-switch"),H=Object(a["H"])("van-empty"),z=Object(a["H"])("van-calendar"),L=Object(a["H"])("van-code"),F=Object(a["H"])("van-field"),D=Object(a["H"])("van-stepper"),q=Object(a["H"])("van-button"),S=Object(a["H"])("van-popup"),I=Object(a["H"])("van-password-input"),$=Object(a["H"])("van-number-keyboard"),A=Object(a["H"])("BaseLayout");return Object(a["z"])(),Object(a["g"])(A,{title:"商家账单",bg:"linear-gradient(180deg, #EEE, #F9F9F9 40%, #F9F9F9)",height:"0"},{back:o((function(){return[i]})),more:o((function(){return[Object(a["j"])(U,{name:"replay",size:"16",color:"#666",onClick:C.query},null,8,["onClick"])]})),default:o((function(){return[Object(a["j"])("div",c,[Object(a["j"])(_,{class:"filter",icon:"filter-o",border:!1,onClick:t[2]||(t[2]=function(e){return x.state.show=!x.state.show})},{title:o((function(){return[l]})),value:o((function(){return[Object(a["j"])(U,{name:0==x.id?"checked":"circle",size:"18",color:"#F66",onClick:t[1]||(t[1]=Object(a["U"])((function(e){return x.id=0}),["stop"]))},null,8,["name"]),r]})),label:o((function(){return[Object(a["i"])(Object(a["L"])(C.info),1)]})),_:1}),(Object(a["z"])(!0),Object(a["g"])(a["a"],null,Object(a["F"])(x.state.device,(function(e,n){return Object(a["S"])((Object(a["z"])(),Object(a["g"])(_,{key:n,class:{device:!0,active:x.id==e.id},title:e.name||e.code,border:!1,onClick:function(t){return C.choose(e.id)}},{label:o((function(){return[Object(a["i"])(" 商户编码："+Object(a["L"])(e.code),1),u,Object(a["i"])("收款方式："+Object(a["L"])(C.getName(e)),1)]})),value:o((function(){return[Object(a["j"])(U,{class:"icon",name:x.id==e.id?"checked":"circle",size:"18"},null,8,["name"])]})),extra:o((function(){return[Object(a["S"])(Object(a["j"])("div",{class:"extra",onClick:t[3]||(t[3]=function(e){return x.state.popup1=!0})},[d,Object(a["j"])(U,{name:"arrow-down",size:"16"})],512),[[a["O"],0==x.state.password.length]])]})),_:2},1032,["class","title","onClick"])),[[a["O"],x.state.show]])})),128)),Object(a["j"])(_,{class:"filter",icon:"calendar-o",label:C.format(x.date),border:!1,onClick:t[5]||(t[5]=Object(a["U"])((function(e){return x.state.calendar=!0}),["stop"]))},{title:o((function(){return[s]})),value:o((function(){return[Object(a["j"])(E,{modelValue:x.state.type,"onUpdate:modelValue":t[4]||(t[4]=function(e){return x.state.type=e}),size:"14"},null,8,["modelValue"]),Object(a["j"])("div",b,Object(a["L"])(x.state.type?"单":"多")+"日",1)]})),_:1},8,["label"]),Object(a["j"])(_,{icon:"chart-trending-o"},{title:o((function(){return[Object(a["i"])("共收款 "+Object(a["L"])(x.state.order.total||0)+" 笔，合计 "+Object(a["L"])(x.state.order.amount||0)+" 元",1)]})),_:1}),Object(a["j"])("div",p,[(Object(a["z"])(!0),Object(a["g"])(a["a"],null,Object(a["F"])(x.state.order.list,(function(t,n){return Object(a["z"])(),Object(a["g"])(_,{key:n,title:t.dt,label:t.remark,onClick:function(n){return e.$copy(t.remark)}},{value:o((function(){return[Object(a["j"])("div",j,[f,Object(a["i"])(Object(a["L"])(t.fee),1)])]})),_:2},1032,["title","label","onClick"])})),128)),Object(a["S"])(Object(a["j"])(H,null,{default:o((function(){return[O]})),_:1},512),[[a["O"],!x.state.order||0==x.state.order.total]])])]),Object(a["j"])(z,{show:x.state.calendar,"onUpdate:show":t[6]||(t[6]=function(e){return x.state.calendar=e}),type:x.state.type?"single":"range","max-range":31,"min-date":new Date("2022-01-01"),"max-date":new Date,"default-date":x.date,"show-confirm":!1,onConfirm:t[7]||(t[7]=function(e){return x.date=e})},null,8,["show","type","min-date","max-date","default-date"]),Object(a["j"])(S,{show:x.state.popup1,"onUpdate:show":t[16]||(t[16]=function(e){return x.state.popup1=e}),position:"top",style:{height:"100%"},"close-on-popstate":!0,closeable:""},{default:o((function(){return[Object(a["j"])("div",h,[Object(a["j"])("div",m,"商户编码："+Object(a["L"])(x.field.code||n.code),1),Object(a["j"])("div",v,[Object(a["j"])(L,{type:"qrimage",value:C.getCode("pay"),width:"100",margin:"0"},{default:o((function(){return[g]})),_:1},8,["value"]),Object(a["j"])(L,{type:"qrimage",value:C.getCode("biz"),width:"100",margin:"0"},{default:o((function(){return[w]})),_:1},8,["value"])]),Object(a["j"])(F,{modelValue:x.field.uid,"onUpdate:modelValue":t[8]||(t[8]=function(e){return x.field.uid=e}),type:"text",label:"绑定用户",placeholder:"用户 UID","input-align":"right"},null,8,["modelValue"]),Object(a["j"])(_,{center:"",title:"会员折扣"},{"right-icon":o((function(){return[Object(a["j"])(D,{modelValue:x.field.discount,"onUpdate:modelValue":t[9]||(t[9]=function(e){return x.field.discount=e}),min:20,max:120},null,8,["modelValue"])]})),_:1}),Object(a["j"])(F,{modelValue:x.field.box,"onUpdate:modelValue":t[10]||(t[10]=function(e){return x.field.box=e}),type:"text",label:"到账提示音箱",placeholder:"机器 IMEI","input-align":"right"},null,8,["modelValue"]),Object(a["j"])(F,{modelValue:x.field.pos,"onUpdate:modelValue":t[11]||(t[11]=function(e){return x.field.pos=e}),type:"text",label:"POS扫码收款",placeholder:"机器 IMEI","input-align":"right"},null,8,["modelValue"]),Object(a["j"])(F,{modelValue:x.field.mobile,"onUpdate:modelValue":t[12]||(t[12]=function(e){return x.field.mobile=e}),type:"text",label:"手机扫码收款",placeholder:"手机号","input-align":"right"},null,8,["modelValue"]),Object(a["j"])(F,{modelValue:x.field.pwd,"onUpdate:modelValue":t[13]||(t[13]=function(e){return x.field.pwd=e}),type:"digit",maxlength:"6",label:"授权管理密码",placeholder:"进入本页面的密码","input-align":"right"},null,8,["modelValue"]),Object(a["j"])(F,{modelValue:x.field.name,"onUpdate:modelValue":t[14]||(t[14]=function(e){return x.field.name=e}),type:"text",label:"名称",placeholder:"便于区分对账，可填商户、收银台名称","input-align":"right"},null,8,["modelValue"]),Object(a["j"])(F,{modelValue:x.field.remark,"onUpdate:modelValue":t[15]||(t[15]=function(e){return x.field.remark=e}),type:"textarea",rows:"1",autosize:"",label:"备注","input-align":"right",placeholder:"便于区分对账，可以不填"},null,8,["modelValue"]),y,Object(a["j"])(q,{type:"primary",class:"bind",block:"",round:"",onClick:C.bind},{default:o((function(){return[k]})),_:1},8,["onClick"])])]})),_:1},8,["show"]),Object(a["j"])(S,{show:x.state.popup2,"onUpdate:show":t[18]||(t[18]=function(e){return x.state.popup2=e}),position:"bottom",overlay:!1,style:{height:"calc(100vh - 40px)",background:"#EEE"},"close-on-popstate":!0,"close-on-click-overlay":!1,closeable:!1},{default:o((function(){return[Object(a["j"])(I,{info:"请输入管理密码",gutter:10,style:{margin:"60px 20px"},value:x.state.password},null,8,["value"]),Object(a["j"])($,{modelValue:x.state.password,"onUpdate:modelValue":t[17]||(t[17]=function(e){return x.state.password=e}),show:!0,theme:"custom","close-button-text":"查看","safe-area-inset-bottom":!1,onClose:C.init},null,8,["modelValue","onClose"])]})),_:1},8,["show","style"]),Object(a["S"])(Object(a["j"])("div",{class:"watermark"},Object(a["L"])(e.uid),513),[[a["O"],!x.state.popup2]])]})),_:1})})),x=n("0a9c"),C=(n("46d7"),n("6b0d")),U=n.n(C);const _=U()(x["a"],[["render",V],["__scopeId","data-v-25b85cae"]]);t["default"]=_}}]);