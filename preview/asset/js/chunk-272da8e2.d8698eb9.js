(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-272da8e2"],{"0ac3":function(t,e,n){"use strict";n.r(e);var r=n("7a23"),a=Object(r["V"])("data-v-4a944be6");Object(r["C"])("data-v-4a944be6");var i=Object(r["i"])("团队管理"),o={class:"list"},c=Object(r["i"])("保存");Object(r["A"])();var s=a((function(t,e,n,s,l,u){var d=Object(r["H"])("van-button"),f=Object(r["H"])("van-dropdown-item"),b=Object(r["H"])("van-dropdown-menu"),h=Object(r["H"])("van-col"),p=Object(r["H"])("van-search"),g=Object(r["H"])("van-row"),j=Object(r["H"])("van-sticky"),m=Object(r["H"])("van-icon"),v=Object(r["H"])("van-tag"),O=Object(r["H"])("van-cell"),y=Object(r["H"])("van-empty"),w=Object(r["H"])("van-action-bar-button"),x=Object(r["H"])("van-action-bar"),k=Object(r["H"])("van-contact-edit"),C=Object(r["H"])("van-action-sheet"),S=Object(r["H"])("van-loading"),H=Object(r["H"])("van-field"),A=Object(r["H"])("BaseLayout");return Object(r["z"])(),Object(r["g"])(A,{title:"员工",navbar:u.callee?"hide":"show"},{extra:a((function(){return[Object(r["j"])(d,{icon:"friends",type:"primary",size:"small",onClick:e[1]||(e[1]=function(e){return t.$router.push("group")})},{default:a((function(){return[i]})),_:1})]})),default:a((function(){return[Object(r["j"])(j,{"offset-top":40},{default:a((function(){return[Object(r["j"])(g,{class:"toolbar",align:"center",gutter:"5"},{default:a((function(){return[Object(r["j"])(h,{span:"6"},{default:a((function(){return[Object(r["j"])(b,null,{default:a((function(){return[Object(r["j"])(f,{modelValue:s.state.gid,"onUpdate:modelValue":e[2]||(e[2]=function(t){return s.state.gid=t}),options:s.state.options,onChange:u.onChange},null,8,["modelValue","options","onChange"])]})),_:1})]})),_:1}),Object(r["j"])(h,{span:"18"},{default:a((function(){return[Object(r["j"])(p,{modelValue:s.state.keyword,"onUpdate:modelValue":e[3]||(e[3]=function(t){return s.state.keyword=t}),placeholder:"输入UID、手机号、员工姓名搜索",clearable:"",onSearch:u.onSearch,onClear:u.onSearch},null,8,["modelValue","onSearch","onClear"])]})),_:1})]})),_:1})]})),_:1}),Object(r["j"])("div",o,[(Object(r["z"])(!0),Object(r["g"])(r["a"],null,Object(r["F"])(s.state.list,(function(t,e){return Object(r["z"])(),Object(r["g"])(O,{class:"item",key:e,title:t.uid+" / "+t.truename,label:t.mobile,border:!1,"is-link":!u.callee,onClick:function(e){return u.onChoose(t)}},{icon:a((function(){return[Object(r["j"])(m,{class:"icon",name:u.contains(t.uid)?"manager":"manager-o",color:u.contains(t.uid)?"#F66":"#CCC",size:"24"},null,8,["name","color"])]})),value:a((function(){return[(Object(r["z"])(!0),Object(r["g"])(r["a"],null,Object(r["F"])(t.group,(function(t,e){return Object(r["z"])(),Object(r["g"])(v,{key:e,color:s.colors[u.getIndex(t)],plain:"",round:""},{default:a((function(){return[Object(r["i"])(Object(r["L"])(s.state.group[t]||"失效组"),1)]})),_:2},1032,["color"])})),128))]})),_:2},1032,["title","label","is-link","onClick"])})),128))]),Object(r["S"])(Object(r["j"])(y,{style:{width:"100%"}},null,512),[[r["O"],0==s.state.list.length]]),Object(r["j"])(x,null,{default:a((function(){return[u.callee?(Object(r["z"])(),Object(r["g"])(w,{key:0,type:"warning",text:"取消选择",onClick:u.onCancel},null,8,["onClick"])):Object(r["h"])("",!0),u.callee?(Object(r["z"])(),Object(r["g"])(w,{key:1,type:"primary",text:"选择完成",onClick:u.onSubmit},null,8,["onClick"])):Object(r["h"])("",!0),u.callee?Object(r["h"])("",!0):(Object(r["z"])(),Object(r["g"])(w,{key:2,type:"warning",text:"批量添加员工",onClick:e[4]||(e[4]=function(t){return s.state.add=!0})})),u.callee?Object(r["h"])("",!0):(Object(r["z"])(),Object(r["g"])(w,{key:3,type:"primary",text:"新增单个员工",onClick:e[5]||(e[5]=function(t){return u.onChoose(null)})}))]})),_:1}),Object(r["j"])(C,{show:s.state.edit,"onUpdate:show":e[6]||(e[6]=function(t){return s.state.edit=t}),title:s.state.title},{default:a((function(){return[Object(r["j"])(k,{"is-edit":s.state.del,"contact-info":s.state.info,onSave:u.onSave,onDelete:u.onDelete},null,8,["is-edit","contact-info","onSave","onDelete"])]})),_:1},8,["show","title"]),Object(r["j"])(C,{show:s.state.add,"onUpdate:show":e[8]||(e[8]=function(t){return s.state.add=t}),title:"批量添加员工",style:{boxSizing:"border-box",padding:"0 5px 10px 5px"}},{default:a((function(){return[Object(r["S"])(Object(r["j"])(S,{class:"loading",color:"#F66"},{default:a((function(){return[Object(r["i"])(Object(r["L"])(s.state.loading),1)]})),_:1},512),[[r["O"],s.state.loading.length>0]]),Object(r["j"])(H,{modelValue:s.state.body,"onUpdate:modelValue":e[7]||(e[7]=function(t){return s.state.body=t}),type:"textarea",placeholder:"每个员工一行（手机号码在前，姓名在后，用逗号、分号或空格隔开）",autosize:{minHeight:200,maxHeight:350},formatter:u.format,"format-trigger":"onChange"},null,8,["modelValue","formatter"]),Object(r["j"])(d,{type:"primary",block:"",round:"",onClick:u.onAdd},{default:a((function(){return[c]})),_:1},8,["onClick"])]})),_:1},8,["show"])]})),_:1},8,["navbar"])})),l=n("5833"),u=(n("2903"),n("6b0d")),d=n.n(u);const f=d()(l["a"],[["render",s],["__scopeId","data-v-4a944be6"]]);e["default"]=f},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"13d5":function(t,e,n){"use strict";var r=n("23e7"),a=n("d58f").left,i=n("a640"),o=n("2d00"),c=n("605d"),s=i("reduce"),l=!c&&o>79&&o<83;r({target:"Array",proto:!0,forced:!s||l},{reduce:function(t){return a(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2532:function(t,e,n){"use strict";var r=n("23e7"),a=n("5a34"),i=n("1d80"),o=n("ab13");r({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(i(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),a=n("825a"),i=n("d039"),o=n("ad6d"),c="toString",s=RegExp.prototype,l=s[c],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=c;(u||d)&&r(RegExp.prototype,c,(function(){var t=a(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in s)?o.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},2903:function(t,e,n){"use strict";n("9e4e")},3835:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function a(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,a,i=[],o=!0,c=!1;try{for(n=n.call(t);!(o=(r=n.next()).done);o=!0)if(i.push(r.value),e&&i.length===e)break}catch(s){c=!0,a=s}finally{try{o||null==n["return"]||n["return"]()}finally{if(c)throw a}}return i}}n("fb6a"),n("b0c0"),n("a630");function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return r(t)||a(t,e)||o(t,e)||c()}},5833:function(t,e,n){"use strict";(function(t){var r=n("3835"),a=(n("d3b7"),n("25f0"),n("ac1f"),n("1276"),n("13d5"),n("99af"),n("4de4"),n("841c"),n("a15b"),n("b0c0"),n("caad"),n("2532"),n("b64b"),n("5319"),n("7a23")),i=n("2824");e["a"]={components:{BaseLayout:i["a"]},name:"Member",props:{selected:{type:[String,Object],default:function(){return null}}},emits:["update:selected"],setup:function(){for(var t=Object(a["D"])({member:[],group:[],gid:0,options:[],keyword:"",list:[],selected:[],edit:!1,del:!1,title:"",info:{},add:!1,loading:"",body:""}),e=[],n=0;n<20;n++)e.push("#"+Math.random().toString(16).substr(3,6));return{state:t,colors:e}},created:function(){var e=this;this.state.member=[],this.state.list=[],this.state.selected=t.isEmpty(this.selected)?[]:this.selected.split(","),this.$http.get("/team/groupList").then((function(n){e.state.group=n,e.state.options=t.reduce(n,(function(t,e,n){return t.concat({text:e,value:n})}),[{text:"选择团队",value:0}])})),this.onChange()},watch:{selected:function(e,n){e!=n&&(this.state.selected=t.isEmpty(this.selected)?[]:this.selected.split(","))}},computed:{callee:function(){return null!=this.selected}},methods:{onChange:function(){var t=this;this.state.add=!1,this.state.edit=!1,this.$http.post("/team/memberList?gid="+this.state.gid).then((function(e){t.state.member=e,t.onSearch()}))},onSearch:function(){var e=this;this.state.list=0==this.state.keyword.length?this.state.member:t.filter(this.state.member,(function(t){return t.truename.search(e.state.keyword)>-1||t.mobile.search(e.state.keyword)>-1}))},onSubmit:function(){this.$emit("update:selected",this.state.selected.join(",")),this.$emit("close",this.state.selected)},onCancel:function(){this.state.selected=t.isEmpty(this.selected)?[]:this.selected.split(","),this.$emit("close",null)},onChoose:function(e){this.callee?this.contains(e.uid)?t.pull(this.state.selected,e.uid):this.state.selected.push(e.uid):(this.state.del=!1,this.state.title="新增员工",this.state.info={},null!=e&&(this.state.del=!0,this.state.title="员工管理",this.state.info={id:e.id,name:e.truename,tel:e.mobile}),this.state.edit=!0)},onSave:function(t){this.$http.post("/team/memberSave?"+(t.id?"id="+t.id:"")+"&truename="+t.name+"&mobile="+t.tel).then(this.onChange)},onDelete:function(t){this.$http.post("/team/memberSave?id="+t.id+"&remove=1").then(this.onChange)},onAdd:function(){var t=this,e=this.state.body.split("\n");if(e.length>100)return this.$toast("每次最多支持新增 100 个员工");for(var n in e)if(!/^1[\d]{10},.+$/.test(e[n]))return this.$toast("第 "+(parseInt(n)+1)+" 行数据不合要求");var a=setInterval((function(){var n=e.shift();if("undefined"==typeof n)return t.state.loading="",t.onChange(),clearInterval(a);var i=n.split(","),o=Object(r["a"])(i,2),c=o[0],s=o[1];t.state.loading="正在新增员工 "+s+" ...",t.$http.get("/team/memberSave?mobile="+c+"&truename="+s)}),500)},contains:function(e){return t.includes(this.state.selected,e)},getIndex:function(e){return t.indexOf(Object.keys(this.state.group),e)},format:function(t){return t.replace(/，/g,",").replace(/、/g,",").replace(/；/g,",").replace(/;/g,",").replace(/ /,",")}}}}).call(this,n("81b0"))},"5a34":function(t,e,n){var r=n("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},"841c":function(t,e,n){"use strict";var r=n("d784"),a=n("825a"),i=n("1d80"),o=n("129f"),c=n("14c3");r("search",1,(function(t,e,n){return[function(e){var n=i(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=a(t),s=String(this),l=i.lastIndex;o(l,0)||(i.lastIndex=0);var u=c(i,s);return o(i.lastIndex,l)||(i.lastIndex=l),null===u?-1:u.index}]}))},"99af":function(t,e,n){"use strict";var r=n("23e7"),a=n("d039"),i=n("e8b5"),o=n("861d"),c=n("7b0b"),s=n("50c4"),l=n("8418"),u=n("65f0"),d=n("1dde"),f=n("b622"),b=n("2d00"),h=f("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",j=b>=51||!a((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),m=d("concat"),v=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:i(t)},O=!j||!m;r({target:"Array",proto:!0,forced:O},{concat:function(t){var e,n,r,a,i,o=c(this),d=u(o,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?o:arguments[e],v(i)){if(a=s(i.length),f+a>p)throw TypeError(g);for(n=0;n<a;n++,f++)n in i&&l(d,f,i[n])}else{if(f>=p)throw TypeError(g);l(d,f++,i)}return d.length=f,d}})},"9e4e":function(t,e,n){},a15b:function(t,e,n){"use strict";var r=n("23e7"),a=n("44ad"),i=n("fc6a"),o=n("a640"),c=[].join,s=a!=Object,l=o("join",",");r({target:"Array",proto:!0,forced:s||!l},{join:function(t){return c.call(i(this),void 0===t?",":t)}})},a630:function(t,e,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),o=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:a})},ab13:function(t,e,n){var r=n("b622"),a=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,"/./"[t](e)}catch(r){}}return!1}},caad:function(t,e,n){"use strict";var r=n("23e7"),a=n("4d64").includes,i=n("44d2");r({target:"Array",proto:!0},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},d58f:function(t,e,n){var r=n("1c0b"),a=n("7b0b"),i=n("44ad"),o=n("50c4"),c=function(t){return function(e,n,c,s){r(n);var l=a(e),u=i(l),d=o(l.length),f=t?d-1:0,b=t?-1:1;if(c<2)while(1){if(f in u){s=u[f],f+=b;break}if(f+=b,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=b)f in u&&(s=n(s,u[f],f,l));return s}};t.exports={left:c(!1),right:c(!0)}},fb6a:function(t,e,n){"use strict";var r=n("23e7"),a=n("861d"),i=n("e8b5"),o=n("23cb"),c=n("50c4"),s=n("fc6a"),l=n("8418"),u=n("b622"),d=n("1dde"),f=d("slice"),b=u("species"),h=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var n,r,u,d=s(this),f=c(d.length),g=o(t,f),j=o(void 0===e?f:e,f);if(i(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?a(n)&&(n=n[b],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return h.call(d,g,j);for(r=new(void 0===n?Array:n)(p(j-g,0)),u=0;g<j;g++,u++)g in d&&l(r,u,d[g]);return r.length=u,r}})}}]);