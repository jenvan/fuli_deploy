(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ee6e782"],{"0245":function(t,e,a){"use strict";a("12c1")},"12c1":function(t,e,a){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var i=a("1d80"),s=a("5899"),r="["+s+"]",n=RegExp("^"+r+r+"*"),c=RegExp(r+r+"*$"),o=function(t){return function(e){var a=String(i(e));return 1&t&&(a=a.replace(n,"")),2&t&&(a=a.replace(c,"")),a}};t.exports={start:o(1),end:o(2),trim:o(3)}},7156:function(t,e,a){var i=a("861d"),s=a("d2bb");t.exports=function(t,e,a){var r,n;return s&&"function"==typeof(r=e.constructor)&&r!==a&&i(n=r.prototype)&&n!==a.prototype&&s(t,n),t}},a9e3:function(t,e,a){"use strict";var i=a("83ab"),s=a("da84"),r=a("94ca"),n=a("6eeb"),c=a("5135"),o=a("c6b6"),u=a("7156"),l=a("c04e"),d=a("d039"),p=a("7c73"),b=a("241c").f,f=a("06cf").f,h=a("9bf2").f,m=a("58a8").trim,j="Number",O=s[j],g=O.prototype,v=o(p(g))==j,y=function(t){var e,a,i,s,r,n,c,o,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:i=2,s=49;break;case 79:case 111:i=8,s=55;break;default:return+u}for(r=u.slice(2),n=r.length,c=0;c<n;c++)if(o=r.charCodeAt(c),o<48||o>s)return NaN;return parseInt(r,i)}return+u};if(r(j,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var C,N=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof N&&(v?d((function(){g.valueOf.call(a)})):o(a)!=j)?u(new O(y(e)),a,N):y(e)},k=i?b(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),I=0;k.length>I;I++)c(O,C=k[I])&&!c(N,C)&&h(N,C,f(O,C));N.prototype=g,g.constructor=N,n(s,j,N)}},bc21:function(t,e,a){"use strict";a.r(e);a("b0c0");var i=a("7a23"),s=Object(i["S"])("data-v-522c51b3");Object(i["B"])("data-v-522c51b3");var r={class:"main"},n={key:0},c=Object(i["i"])(" "),o=Object(i["i"])(" "),u=Object(i["i"])(" ");Object(i["z"])();var l=s((function(t,e,a,l,d,p){var b=Object(i["G"])("van-switch"),f=Object(i["G"])("van-cell"),h=Object(i["G"])("van-stepper"),m=Object(i["G"])("van-card"),j=Object(i["G"])("van-cell-group"),O=Object(i["G"])("van-submit-bar"),g=Object(i["G"])("BaseLayout");return Object(i["y"])(),Object(i["g"])(g,{title:"确认订单"},{default:s((function(){return[Object(i["j"])("div",r,[d.state.digiCard?Object(i["h"])("",!0):(Object(i["y"])(),Object(i["g"])("div",n,[Object(i["j"])(f,{title:"生成提货卡",border:!1},{"right-icon":s((function(){return[c,Object(i["j"])(b,{modelValue:d.state.pickCard,"onUpdate:modelValue":e[1]||(e[1]=function(t){return d.state.pickCard=t}),size:"24"},null,8,["modelValue"])]})),_:1}),Object(i["Q"])(Object(i["j"])(f,{title:"提货卡数量"},{"right-icon":s((function(){return[Object(i["j"])(h,{modelValue:d.state.number,"onUpdate:modelValue":e[2]||(e[2]=function(t){return d.state.number=t}),theme:"round","button-size":"22",max:9999},null,8,["modelValue"])]})),_:1},512),[[i["N"],d.state.pickCard]]),Object(i["Q"])(Object(i["j"])("div",null,[d.state.addr&&d.state.addr.name?(Object(i["y"])(),Object(i["g"])(f,{key:0,class:"card",size:"large",icon:"location",title:d.state.addr.name+" "+d.state.addr.mobile,label:d.state.addr.province+d.state.addr.city+d.state.addr.county+d.state.addr.address,to:"/my/address/choose?target="+p.target,"is-link":"",center:""},null,8,["title","label","to"])):(Object(i["y"])(),Object(i["g"])(f,{key:1,class:"card",size:"large",title:"新增收货地址",to:"/my/address/add?target="+p.target,"is-link":""},null,8,["to"]))],512),[[i["N"],!d.state.pickCard]])])),(Object(i["y"])(!0),Object(i["g"])(i["a"],null,Object(i["E"])(d.state.list,(function(t,e){return Object(i["y"])(),Object(i["g"])(m,{class:"item",key:e,title:t.title,desc:t.spec,thumb:t.image,price:t.price,num:t.num},null,8,["title","desc","thumb","price","num"])})),128)),Object(i["j"])(j,{class:"fee"},{default:s((function(){return[Object(i["j"])(f,{title:"商品总金额",value:p.total+" 元"},null,8,["value"]),Object(i["j"])(f,{title:"使用优惠券",value:"无","is-link":""}),Object(i["j"])(f,{title:"使用余额支付",value:"（"+t.profile.cash+" 可用）"},{"right-icon":s((function(){return[o,Object(i["j"])(b,{modelValue:d.state.useCash,"onUpdate:modelValue":e[3]||(e[3]=function(t){return d.state.useCash=t}),size:"24"},null,8,["modelValue"])]})),_:1},8,["value"]),Object(i["j"])(f,{title:"使用积分支付",value:"（"+t.profile.point+" 可用）"},{"right-icon":s((function(){return[u,Object(i["j"])(b,{modelValue:d.state.usePoint,"onUpdate:modelValue":e[4]||(e[4]=function(t){return d.state.usePoint=t}),size:"24"},null,8,["modelValue"])]})),_:1},8,["value"])]})),_:1}),Object(i["j"])(O,{label:"待支付总金额：","button-text":"结算",style:{bottom:"50px"},price:100*p.amount,disabled:0==p.total||p.amount>0,onSubmit:p.buy},{top:s((function(){return[Object(i["Q"])(Object(i["j"])("div",{class:"notify",onClick:e[5]||(e[5]=function(){return p.deposit&&p.deposit.apply(p,arguments)})},"账户资产不足，请充值后再来结算 >>>",512),[[i["N"],p.total-t.profile.cash-t.profile.point>0]])]})),_:1},8,["price","disabled","onSubmit"])])]})),_:1})})),d=a("c11d"),p=(a("0245"),a("6b0d")),b=a.n(p);const f=b()(d["a"],[["render",l],["__scopeId","data-v-522c51b3"]]);e["default"]=f},c11d:function(t,e,a){"use strict";(function(t){var i=a("5530"),s=(a("a9e3"),a("ac1f"),a("5319"),a("7a23")),r=a("5502"),n=a("2824");e["a"]={components:{BaseLayout:n["a"]},props:{type:{type:String,default:"mall"},direct:{type:[String,Number],default:0},digital:{type:[String,Number],default:0},aid:{type:[String,Number],default:0}},data:function(){var t=Object(s["C"])({addr:{},list:[],number:1,amount:0,pickCard:!1,digiCard:!1,useCash:!1,usePoint:!1});return{state:t}},created:function(){var e=this;this.state.digiCard=this.digital>0,this.$http.get("/mall/addresslist").then((function(a){for(var i in a)if(0==e.aid&&2==a[i].status||a[i].id==e.aid){e.state.addr=a[i];break}t.isEmpty(e.state.addr)&&!t.isEmpty(a)&&(e.state.addr=a[0])})),this.$http.get("/mall/cartlist?status="+(parseInt(this.direct)+1)).then((function(t){e.state.list=t;var a=0;for(var i in e.state.list)a+=e.state.list[i].price*e.state.list[i].num;e.state.amount=a}))},computed:Object(i["a"])({target:function(){return escape(this.$route.fullPath)},total:function(){return this.state.pickCard?this.state.amount*this.state.number:this.state.amount},amount:function(){var e=0;return e=this.state.usePoint&&this.state.useCash?this.total-this.profile.point-this.profile.cash:this.state.usePoint?this.total-this.profile.point:this.state.useCash?this.total-this.profile.cash:this.total,t.max([e,0])}},Object(r["d"])(["profile"])),methods:{deposit:function(){this.$router.push("/my/deposit")},buy:function(){var e=this;if(t.isEmpty(this.state.addr)&&!this.state.pickCard&&!this.state.digiCard)return this.$toast("请先选择收货地址");var a=0;this.state.pickCard&&(a=this.state.number),this.state.digiCard&&(a=-1);var i="";this.state.usePoint&&!this.state.useCash&&(i="point"),!this.state.usePoint&&this.state.useCash&&(i="cash"),this.$http.post("/mall/bill?aid="+(this.state.pickCard||this.state.digiCard?0:this.state.addr.id)+"&card="+a+"&direct="+this.direct).then((function(t){e.$http.post("/mall/pay?id="+t["id"]+"&type="+i).then((function(){e.$router.replace("/my/order")}))}))}}}}).call(this,a("81b0"))}}]);
//# sourceMappingURL=chunk-3ee6e782.8e906bd4.js.map