(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-749a5d92"],{1443:function(t,e,n){},2824:function(t,e,n){"use strict";var i=n("7a23"),a=Object(i["X"])("data-v-35e22a62");Object(i["D"])("data-v-35e22a62");var o={class:"container"},c={class:"back"},s={class:"head"},r={class:"more"},u={class:"subtitle"},l={class:"extra"};Object(i["B"])();var d=a((function(t,e,n,d,b,p){var f=Object(i["I"])("van-icon"),h=Object(i["I"])("van-nav-bar"),j=Object(i["I"])("van-sticky"),O=Object(i["I"])("van-col"),v=Object(i["I"])("van-row");return Object(i["A"])(),Object(i["g"])("div",o,[Object(i["U"])(Object(i["k"])(j,{onChange:e[1]||(e[1]=function(t){return d.state.isTop=!d.state.isTop})},{default:a((function(){return[Object(i["k"])(h,{class:["navbar",{notTop:!d.state.isTop,autoNav:"auto"==n.navbar}],border:!1,onClickLeft:p.onClickLeft,onClickRight:p.onClickRight},{left:a((function(){return[Object(i["U"])(Object(i["k"])("div",c,[Object(i["H"])(t.$slots,"back",{},(function(){return[Object(i["k"])(f,{name:"arrow-left"})]}),{},!0)],512),[[i["Q"],!n.noback]])]})),title:a((function(){return[Object(i["k"])("div",s,[Object(i["H"])(t.$slots,"head",{},(function(){return[Object(i["k"])("div",{style:{width:"100%",color:d.state.isTop?n.fg:"inherit"}},Object(i["M"])(d.state.isTop&&"0"!=n.height?"":n.title),5)]}),{},!0)])]})),right:a((function(){return[Object(i["k"])("div",r,[Object(i["H"])(t.$slots,"more",{},void 0,!0)])]})),_:1},8,["class","onClickLeft","onClickRight"])]})),_:1},512),[[i["Q"],"hide"!=n.navbar]]),Object(i["k"])("div",{class:["page",{notTop:!d.state.isTop,hideNav:"hide"==n.navbar,autoNav:"auto"==n.navbar,hasBar:t.$store.state.showTabbar}],style:{background:n.bg}},[Object(i["k"])(i["d"],{name:"van-slide-down"},{default:a((function(){return[Object(i["U"])(Object(i["k"])(v,{justify:"space-between",align:"center",class:"outline",style:{height:n.height+"px",color:n.fg}},{default:a((function(){return[Object(i["k"])(O,{span:"16"},{default:a((function(){return[Object(i["k"])("div",{class:"title",style:{color:n.fg},onClick:e[2]||(e[2]=function(e){return t.$emit("click-title")})},[Object(i["H"])(t.$slots,"title",{},(function(){return[Object(i["j"])(Object(i["M"])(n.title),1)]}),{},!0),Object(i["k"])("div",u,Object(i["M"])(n.subtitle),1)],4)]})),_:3}),Object(i["k"])(O,{span:"8"},{default:a((function(){return[Object(i["k"])("div",l,[Object(i["H"])(t.$slots,"extra",{},void 0,!0)])]})),_:3})]})),_:1},8,["style"]),[[i["Q"],d.state.isTop&&"show"==n.navbar]])]})),_:1}),Object(i["H"])(t.$slots,"default",{},void 0,!0)],6)])})),b={props:{navbar:{type:String,default:"show"},noback:{type:Boolean,default:!1},title:String,subtitle:String,height:String,bg:String,fg:String},setup:function(){var t=Object(i["E"])({isTop:!0});return{state:t}},methods:{onClickLeft:function(){var t=this;this.noback||(this.$emit("click-back"),setTimeout((function(e){if(e==t.$route)return window&&window.history.length>1?t.$router.back():t.$router.push("/")}),200,this.$route))},onClickRight:function(){return this.$emit("click-more")}}},p=(n("a4de"),n("6b0d")),f=n.n(p);const h=f()(b,[["render",d],["__scopeId","data-v-35e22a62"]]);e["a"]=h},"5afd":function(t,e,n){},a4de:function(t,e,n){"use strict";n("5afd")},ab12:function(t,e,n){"use strict";n.r(e);n("b0c0");var i=n("7a23"),a=Object(i["X"])("data-v-74febf98");Object(i["D"])("data-v-74febf98");var o=Object(i["j"])("切换账号"),c={class:"info"},s=Object(i["j"])("解绑账号"),r=Object(i["j"])("退出登录"),u={style:{padding:"10px"}},l=Object(i["j"])("立即切换"),d=Object(i["k"])("br",null,null,-1),b=Object(i["j"])("当前微信绑定如下账号，点击进行切换"),p=Object(i["j"])(" 长按图片分享给好友扫码试用 ");Object(i["B"])();var f=a((function(t,e,n,f,h,j){var O=Object(i["I"])("van-button"),v=Object(i["I"])("van-uploader"),m=Object(i["I"])("van-field"),k=Object(i["I"])("van-cell"),g=Object(i["I"])("van-action-sheet"),w=Object(i["I"])("van-image"),y=Object(i["I"])("van-popup"),$=Object(i["I"])("BaseLayout");return Object(i["A"])(),Object(i["g"])($,{title:"我的账号",onClickTitle:j.onTitle,onClickBack:e[9]||(e[9]=function(e){return t.$router.push("/my")})},{extra:a((function(){return[j.inWechat?Object(i["U"])((Object(i["A"])(),Object(i["g"])(O,{key:0,icon:"sort",style:{width:"100%",borderRadius:"10px 0 0 10px",color:"#F60"},color:"#F6F6F6",onClick:e[1]||(e[1]=function(t){return h.state.popup2=!0})},{default:a((function(){return[o]})),_:1},512)),[[i["Q"],t.authorized]]):Object(i["h"])("",!0)]})),default:a((function(){return[Object(i["k"])(v,{class:"avatar",modelValue:h.avatar,"onUpdate:modelValue":e[2]||(e[2]=function(t){return h.avatar=t}),"max-size":524288,"max-count":1,"preview-size":120,multiple:!1,"after-read":j.onUpload},null,8,["modelValue","after-read"]),Object(i["k"])("div",c,[(Object(i["A"])(!0),Object(i["g"])(i["a"],null,Object(i["G"])(h.fields,(function(t,e){return Object(i["A"])(),Object(i["g"])(m,{key:e,label:t.name,modelValue:h.fields[e].value,"onUpdate:modelValue":function(t){return h.fields[e].value=t},clickable:"","right-icon":h.fields[e].icon,"input-align":"edit"==h.fields[e].icon?"center":"right",onClickInput:function(t){return h.fields[e].icon="edit"},onBlur:function(t){return j.onChange(e)}},null,8,["label","modelValue","onUpdate:modelValue","right-icon","input-align","onClickInput","onBlur"])})),128)),Object(i["k"])(k,{title:"最近登录时间",value:t.profile.login_dt},null,8,["value"]),Object(i["k"])(k,{title:"最近登录地址",border:!1,value:t.profile.login_ip},null,8,["value"]),t.team&&t.team.code?(Object(i["A"])(),Object(i["g"])(k,{key:0,title:"试用邀请码",border:!1,value:t.team.code,onClick:j.onTry},null,8,["value","onClick"])):Object(i["h"])("",!0),Object(i["U"])(Object(i["k"])(O,{block:"",class:"btn",type:"primary",plain:"",onClick:j.onUnbind},{default:a((function(){return[s]})),_:1},8,["onClick"]),[[i["Q"],j.inWechat]]),Object(i["k"])(O,{block:"",class:"btn",type:"primary",to:"/logout"},{default:a((function(){return[r]})),_:1})]),Object(i["k"])(g,{show:h.state.popup1,"onUpdate:show":e[5]||(e[5]=function(t){return h.state.popup1=t}),title:"切换账号",round:"",closeable:""},{default:a((function(){return[Object(i["k"])("form",u,[Object(i["k"])(m,{type:"text",border:!0,modelValue:h.state.uid,"onUpdate:modelValue":e[3]||(e[3]=function(t){return h.state.uid=t}),"input-align":"center",placeholder:"请输入 UID",style:{margin:"10px 0"}},null,8,["modelValue"]),Object(i["k"])(O,{type:"primary",round:"",block:"",onClick:e[4]||(e[4]=function(t){return j.onSwitch(h.state.uid)})},{default:a((function(){return[l]})),_:1})])]})),_:1},8,["show"]),Object(i["k"])(g,{show:h.state.popup2,"onUpdate:show":e[6]||(e[6]=function(t){return h.state.popup2=t}),actions:h.state.list,"cancel-text":"绑定新账号","close-on-click-action":"",onSelect:j.onSwitch,onCancel:j.onBind},{description:a((function(){return[Object(i["j"])(Object(i["M"])(t.profile.openid),1),d,b]})),_:1},8,["show","actions","onSelect","onCancel"]),Object(i["k"])(y,{show:h.state.popup3,"onUpdate:show":e[8]||(e[8]=function(t){return h.state.popup3=t})},{default:a((function(){return[Object(i["k"])(w,{class:"code",src:h.state.qrcode,width:"300"},{default:a((function(){return[p,Object(i["k"])("div",{onClick:e[7]||(e[7]=function(e){return t.$copy(h.state.code,"邀请码已复制到剪贴板\r\n试用有效期 30 天")})},"[ 复制文字邀请码 ]")]})),_:1},8,["src"])]})),_:1},8,["show"])]})),_:1},8,["onClickTitle"])})),h=n("53ca"),j=n("5530"),O=(n("ac1f"),n("5319"),n("5502")),v=n("2824"),m={components:{BaseLayout:v["a"]},data:function(){var t=Object(i["F"])([]),e=Object(i["E"])({nickname:{name:"昵称",icon:"arrow",value:""},mobile:{name:"手机号",icon:"arrow",value:""},username:{name:"用户名",icon:"arrow",value:""},password:{name:"密码",icon:"arrow",value:""}}),n=Object(i["E"])({uid:"",popup1:!1,popup2:!1,popup3:!1,list:[],code:"",qrcode:""});return{avatar:t,fields:e,state:n}},created:function(){this.$init(this.reset,!0)},computed:Object(j["a"])(Object(j["a"])({inWechat:function(){return this.profile.wechat&&this.profile.wechat.openid&&this.profile.wechat.openid.length>10}},Object(O["d"])(["profile","team"])),Object(O["b"])(["authorized","uid","mobile","nickname"])),methods:Object(j["a"])({reset:function(){if(this.avatar=[{url:this.profile.avatar,isImage:!0}],this.fields.mobile.value=this.mobile,this.fields.username.value=this.profile.username,this.fields.nickname.value=this.nickname,this.fields.password.value="******",this.state.list=[],this.inWechat)for(var t in this.profile.wechat.bind){var e=this.profile.wechat.bind[t];this.state.list.push(Object(j["a"])(Object(j["a"])({},e),{name:e.mobile,subname:e.nickname+" (UID:"+e.id+") "}))}},onTitle:function(){return!this.authorized||1!=this.uid&&1e4!=this.uid?this.$init(this.reset):this.state.popup1=!0},onSwitch:function(t){var e=this,n="object"==Object(h["a"])(t)?"/wechat/switch?u="+t.id:"/user/switch?id="+t;this.$http.post(n).then((function(t){e.state.popup1=!1,e.state.popup2=!1,e.auth(t),e.$init(e.reset)}))},onUpload:function(t){var e=this;t.status="uploading",t.message="上传中...";var n=new FormData;n.append("file",t.file),this.$http.post("/mall/upload",n).then((function(n){t.status="done",t.message="上传成功",t.url=n.filepath,e.$http.get("/user/modify?avatar="+n.filepath)}))},onChange:function(t){var e=this;if(this.fields[t].icon="arrow",("mobile"!=t||this.fields.mobile.value!=this.mobile)&&("username"!=t||this.fields.username.value!=this.profile.username)&&("nickname"!=t||this.fields.nickname.value!=this.nickname)&&("password"!=t||"******"!=this.fields.password.value)){var n="/user/change",i={what:t,value:this.fields[t].value};/(mobile|username|password)/.test(t)||(n="/user/modify",i[t]=this.fields[t].value),this.$http.post(n,i).then((function(){e.$init(e.reset)})).catch((function(){e.reset(),e.fields[t].icon="edit"}))}},onBind:function(){this.$router.push("/bind")},onUnbind:function(){var t=this;this.$dialog.confirm({title:"",message:"确认解除账号 "+this.mobile+" 和微信（ID:"+this.profile.openid+"）的绑定关系？",theme:"round-button"}).then((function(){t.$http.post("/wechat/unbind").then((function(e){t.auth(e),t.$init(t.reset,!0)}))}))},onTry:function(){this.state.code=this.team.code,this.state.qrcode="https://api.qrserver.com/v1/create-qr-code/?size=300x300&margin=10&ecc=H&data="+encodeURIComponent(window.location.href.replace("profile","join?code="+this.team.code)),this.state.popup3=!0}},Object(O["c"])(["auth"]))},k=(n("c993"),n("6b0d")),g=n.n(k);const w=g()(m,[["render",f],["__scopeId","data-v-74febf98"]]);e["default"]=w},c993:function(t,e,n){"use strict";n("1443")}}]);