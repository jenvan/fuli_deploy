(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72fe1b1d"],{"0b05":function(t,e,a){"use strict";a.r(e);a("b0c0"),a("b64b"),a("ac1f"),a("5319");var i=a("7a23"),n=Object(i["V"])("data-v-33fdbba4");Object(i["C"])("data-v-33fdbba4");var s={class:"box"},c={class:"nav"},o={key:0,class:"head"},u={class:"name1"},l={key:1},b={class:"name2"},j={class:"tab"},d={class:"panel"},h=Object(i["j"])("div",{class:"title"},"项目",-1),p={class:"chooser"},r=Object(i["j"])("div",{class:"title"},"价格",-1),O={class:"chooser"},f={class:"item"},v={class:"sale"},y={class:"face"},g={class:"title"};Object(i["A"])();var m=n((function(t,e,a,m,k,C){var w=Object(i["H"])("van-icon"),S=Object(i["H"])("van-image"),H=Object(i["H"])("van-tab"),L=Object(i["H"])("van-tabs"),z=Object(i["H"])("van-empty"),$=Object(i["H"])("van-field"),_=Object(i["H"])("van-stepper"),x=Object(i["H"])("van-cell"),q=Object(i["H"])("van-action-bar-icon"),V=Object(i["H"])("van-action-bar-button"),D=Object(i["H"])("van-action-bar"),T=Object(i["H"])("van-popup"),F=Object(i["H"])("pay"),M=Object(i["H"])("BaseLayout");return Object(i["z"])(),Object(i["g"])(M,{title:k.state.title,height:"0"},{default:n((function(){return[Object(i["j"])("div",s,[Object(i["j"])("div",c,["coupon"!=a.action?(Object(i["z"])(),Object(i["g"])("div",o,[Object(i["j"])(w,{class:"icon",name:k.state.topCat.icon||"vip-card",size:"36"},null,8,["name"]),Object(i["j"])("div",u,Object(i["L"])(k.state.topCat.name),1)])):Object(i["S"])((Object(i["z"])(),Object(i["g"])("div",l,[Object(i["j"])(S,{src:k.state.topCat.icon},null,8,["src"]),Object(i["j"])("div",b,Object(i["L"])(k.state.topCat.name),1)],512)),[[i["O"],!k.state.subCat||0==Object.keys(k.state.subCat).length]]),k.state.subCat&&Object.keys(k.state.subCat).length>0?(Object(i["z"])(),Object(i["g"])(L,{key:2,class:["tabs",a.action],active:k.state.active,"onUpdate:active":e[1]||(e[1]=function(t){return k.state.active=t}),"swipe-threshold":3,animated:"",swipeable:"",onChange:C.handleChange},{default:n((function(){return[(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["F"])(k.state.subCat,(function(t,e){return Object(i["z"])(),Object(i["g"])(H,{key:e,name:t.id},{title:n((function(){return[Object(i["j"])("div",j,[Object(i["j"])(w,{name:t.icon,size:"36"},null,8,["name"]),Object(i["i"])(Object(i["L"])(t.name),1)])]})),_:2},1032,["name"])})),128))]})),_:1},8,["class","active","onChange"])):Object(i["h"])("",!0)]),Object(i["S"])(Object(i["j"])("div",d,[h,Object(i["j"])("div",p,[(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["F"])(k.state.spu,(function(t,e){return Object(i["z"])(),Object(i["g"])("div",{class:["spu",{active:k.state.id==t.id}],key:e,onClick:function(e){return C.handleChoose(t)}},Object(i["L"])(t.title),11,["onClick"])})),128))]),r,Object(i["j"])("div",O,[(Object(i["z"])(!0),Object(i["g"])(i["a"],null,Object(i["F"])(k.state.sku,(function(t,e){return Object(i["S"])((Object(i["z"])(),Object(i["g"])("div",{class:["sku",{more:Object.keys(k.state.sku).length>3,active:k.state.api==e}],key:e,onClick:function(t){return k.state.api=e}},[Object(i["j"])("div",f,Object(i["L"])(t.name),1),Object(i["j"])("div",v,"￥"+Object(i["L"])(t.sale_price),1),Object(i["j"])("div",y,"官方价：￥"+Object(i["L"])(t.face_price.replace(".00","")),1)],10,["onClick"])),[[i["O"],t.stock>0]])})),128))]),Object(i["S"])(Object(i["j"])("div",g,"描述",512),[[i["O"],k.state.intro]]),Object(i["S"])(Object(i["j"])("div",{class:"intro",innerHTML:t.$safeHTML(k.state.intro)},null,8,["innerHTML"]),[[i["O"],k.state.intro]])],512),[[i["O"],Object.keys(k.state.spu).length>0]]),Object(i["S"])(Object(i["j"])(z,{description:"暂无项目"},null,512),[[i["O"],0==Object.keys(k.state.spu).length]])]),Object(i["j"])(D,{class:"bar"},{default:n((function(){return[Object(i["S"])(Object(i["j"])($,{class:"param",modelValue:k.state.account,"onUpdate:modelValue":e[2]||(e[2]=function(t){return k.state.account=t}),type:"text",placeholder:"充值账号"},null,8,["modelValue"]),[[i["O"],0==k.state.type&&k.state.api.length>0]]),Object(i["S"])(Object(i["j"])(x,{class:"param",title:"购买数量"},{value:n((function(){return[Object(i["j"])(_,{modelValue:k.state.entity,"onUpdate:modelValue":e[3]||(e[3]=function(t){return k.state.entity=t}),theme:"round","input-width":"42","button-size":"24","disable-input":!1,min:"1",max:"100",integer:""},null,8,["modelValue"])]})),_:1},512),[[i["O"],1==k.state.type&&k.state.api.length>0]]),Object(i["j"])(q,{icon:"chat-o",text:"客服",onClick:e[4]||(e[4]=function(t){return k.state.popup=!0})}),Object(i["j"])(q,{icon:"cash-on-deliver",text:"订单",onClick:e[5]||(e[5]=function(e){return t.$router.push("/digital/order")})}),Object(i["j"])(V,{type:"danger",text:"立即购买",onClick:C.handleSubmit},null,8,["onClick"])]})),_:1}),Object(i["j"])(T,{show:k.state.popup,"onUpdate:show":e[6]||(e[6]=function(t){return k.state.popup=t}),position:"top",style:{height:"50%",padding:"20px"}},{default:n((function(){return[Object(i["j"])("div",{class:"contact",innerHTML:t.config.contact},null,8,["innerHTML"])]})),_:1},8,["show"]),Object(i["j"])(F,Object(i["q"])(k.state.payData,{show:k.state.payShow,"onUpdate:show":e[7]||(e[7]=function(t){return k.state.payShow=t}),onOnFinish:C.handlePay}),null,16,["show","onOnFinish"])]})),_:1},8,["title"])})),k=a("5530"),C=(a("a9e3"),a("5502")),w=a("2824"),S=a("a6e6"),H={components:{BaseLayout:w["a"],Pay:S["default"]},name:"DigitalDetail",props:{action:{type:String,default:"member"},cid:{type:[String,Number],default:0},id:{type:[String,Number],default:0}},data:function(){var t=Object(i["D"])({topCat:{},subCat:{},active:0,list:{},spu:{},sku:{},item:{},type:0,title:"",intro:"",id:0,api:0,account:"",quantity:1,payData:{},payShow:!1,popup:!1});return{state:t}},created:function(){var t=this;this.$http.get("/digital/category?type="+this.action+"&deep=0").then((function(e){t.state.title=e[0].name})),this.$http.post("/digital/category?id="+parseInt(this.cid)+"&deep=2").then((function(e){t.state.topCat=e[0],t.state.subCat=e[0]["children"],t.init()}))},computed:Object(k["a"])(Object(k["a"])({},Object(C["d"])(["config","profile"])),Object(C["b"])(["uid"])),watch:{$route:function(t,e){t.path==e.path&&t.query==e.query||setTimeout(this.init,100)}},methods:{init:function(){var t=this,e=/(\d+)[^\d](\d+)/.exec(this.cid);this.$http.post("/digital/list?cid="+(e?e[1]:this.cid)).then((function(a){t.state.list=a,t.state.active=e?e[2]:Object.keys(a).shift(),t.handleChange()}))},handleChange:function(){this.state.spu=this.state.list[this.state.active]||{},this.state.id=this.id||Object.keys(this.state.spu).shift(),this.handleChoose(this.state.spu[this.state.id]||null)},handleChoose:function(t){t&&"undefined"!=typeof t.id&&(this.state.item=t,this.state.id=t.id,this.state.type=t.type,this.state.intro=t.intro,this.state.api="",this.state.sku=JSON.parse(t.spec))},handleSubmit:function(){var t=this;return this.state.id<=0||this.state.api.length<=0?this.$toast("请选择项目及价格"):0==this.state.type&&this.state.account.length<5?this.$toast("请填写充值账号"):(0==this.state.type&&(this.state.quantity=1),1==this.state.type&&(this.state.account=""),void this.$http.post("/digital/checkout?id="+this.state.id+"&api="+this.state.api+"&account="+this.state.account+"&quantity="+this.state.quantity).then((function(e){t.state.payData=Object(k["a"])(Object(k["a"])({},e),{},{json:JSON.stringify(e)}),t.state.payShow=!0})))},handlePay:function(t){this.state.payShow=!1,t&&this.$dialog.alert({title:"订单已生成",message:"请点击下方“订单记录”查看到账情况",theme:"round-button"})}}},L=(a("da39"),a("6b0d")),z=a.n(L);const $=z()(H,[["render",m],["__scopeId","data-v-33fdbba4"]]);e["default"]=$},"3eea":function(t,e,a){},da39:function(t,e,a){"use strict";a("3eea")}}]);